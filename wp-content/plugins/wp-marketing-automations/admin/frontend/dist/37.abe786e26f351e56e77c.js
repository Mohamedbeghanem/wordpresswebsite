(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{1100:function(e,t,n){"use strict";var r=n(0),a=n(6),o=n.n(a),c=n(1),i=n(8),l=(n(1106),n(40)),u=n(3);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=s(Object(r.useState)(!1),2),n=t[0],a=t[1],f=e.modalContent,b=void 0===f?{}:f,m=e.content,p=e.onPage,O=void 0!==p&&p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":O}),onClick:function(){O||a(!0)}},O?Object(r.createElement)(l.a,{showHeader:!1,modalContent:b}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-king-tag-pro"},Object(r.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(r.createElement)("span",{className:"bwf-mt-8"},m||(Object(u.Yb)()?Object(c.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(c.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(r.createElement)(l.b,{isOpen:n,onRequestClose:function(){return a(!1)},modalContent:b}))}},1106:function(e,t,n){},1127:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(6),c=n.n(o),i=n(110),l=(n(1137),n(182));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.className,n=e.align,o=void 0===n?"left":n,u=e.title,b=e.message,m=e.proLink,p=b||Object(a.sprintf)(Object(a.__)("Use our sample data to explore %s. See how it summarises metrics across multiple funnels.","wp-marketing-automations"),u),O=f(Object(r.useState)(!1),2),y=O[0],d=O[1];return Object(r.useEffect)((function(){var e=document.querySelector("body:not(.modal-open) #bwf-header-upgrade-pro-cta");if(e){var t=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?d(!1):d(!0)}))}),{root:null,rootMargin:"0px",threshold:.1});return t.observe(e),function(){t.disconnect()}}d(!0)}),[]),Object(r.createElement)("div",{className:c()("bwf-lite-noticebar is-sample-data-notice",t,s(s({},"bwf-notice-".concat(o),!!o),"is-btn-visible",y))},Object(r.createElement)("div",{className:"bwf-lite-noticebar__content-wrap"},u&&Object(r.createElement)("div",{className:"bwf-lite-noticebar__title-wrap"},u," ",Object(r.createElement)(i.b,{content:Object(a.__)("Sample Data","wp-marketing-automations"),type:"black"})),Object(r.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(r.createElement)("div",{className:"bwf-noticebar-content"},p))),y&&Object(r.createElement)(l.a,{isPrimary:!0,proLink:m}))}},1137:function(e,t,n){},1200:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(9),c=n.n(o),i=n(3),l=n(345);function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return s(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function f(){}t=Object.getPrototypeOf;var b=[][r]?t(t([][r]())):(s(t={},r,(function(){return this})),t),m=f.prototype=i.prototype=Object.create(b);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=f,s(m,"constructor",f),s(f,"constructor",l),l.displayName="GeneratorFunction",s(f,a,"GeneratorFunction"),s(m),s(m,a,"Generator"),s(m,r,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:o,m:p}})()}function s(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(s=function(e,t,n,r){function o(t,n){s(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function f(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.conversation,n=void 0===t?{}:t,o=n.ID,s=n.mode,m=n.type,p=e.onRequestClose,O=e.isOpen,y=(e.contact,b(Object(r.useState)({}),2)),d=y[0],j=y[1],v=b(Object(r.useState)(!1),2),g=v[0],w=v[1],h=b(Object(r.useState)(""),2),E=h[0],_=h[1],S=function(){var e,t=(e=u().m((function e(){var t,n;return u().w((function(e){for(;;)switch(e.p=e.n){case 0:if(o&&!(!parseInt(o)>0)){e.n=1;break}return e.a(2);case 1:return w(!0),e.p=2,e.n=3,c()({method:"GET",path:Object(i.B)("/engagement/".concat(parseInt(o),"?mode=1"))});case 3:"result"in(t=e.v)&&j(t.result),e.n=5;break;case 4:e.p=4,n=e.v,console.log(n),n&&"message"in n?_(n.message):Object(a.__)("There are some technical difficulties while getting emails. Please contact support.","wp-marketing-automations");case 5:w(!1);case 6:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){f(o,r,a,c,i,"next",e)}function i(e){f(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){O&&S()}),[O]);return Object(r.createElement)(l.a,{isOpen:O,isLoading:g,onRequestClose:function(){p(),j({}),_("")},error:E,subject:![2,3].includes(parseInt(s))&&d?d.subject:"",body:d&&d.body?d.body:"",sourceType:m,mode:s,contact:e.contact,conversation:e.conversation,template:d})}},1456:function(e,t,n){},1457:function(e,t,n){},1458:function(e,t,n){},1472:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1087),o=n(1),c=n(357),i=n(3),l=n(344),u=n(12),s=n(6),f=n.n(s),b=n(2),m=n(9),p=n.n(m),O=n(5),y=(n(1456),n(11)),d=n(8),j=n(40),v=n(33),g=n(103),w=n(51);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=["getStateProp"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(){var e=Object(w.a)("emailNotifs"),t=e.getStateProp;return S(S({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,E)),{},{getTransactionalMails:function(){return t("data")},isLoading:t("isLoading")})},N=n(50);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=["fetch","setStateProp"];function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(){var e=Object(N.a)("emailNotifs"),t=e.fetch,n=e.setStateProp;return x(x({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,C)),{},{fetch:function(e){n("isLoading",!0),t("GET",Object(i.B)("/transactional-mails"))},setTemplateValues:function(e,t){n(e,t)},setStateValue:function(e,t){n(e,t)}})};function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var U=[{slug:"processing_order",recipient:"customer",name:Object(o.__)("Processing Order","wp-marketing-automations")},{slug:"completed_order",recipient:"customer",name:Object(o.__)("Completed Order","wp-marketing-automations")},{slug:"hold_order",recipient:"customer",name:Object(o.__)("Order On-hold","wp-marketing-automations")},{slug:"refunded_order",recipient:"customer",name:Object(o.__)("Refunded Order","wp-marketing-automations")},{slug:"invoice_order",recipient:"customer",name:Object(o.__)("Order Details ","wp-marketing-automations")},{slug:"customer_order_note",recipient:"customer",name:Object(o.__)("Customer Note Added","wp-marketing-automations")},{slug:"new_account",recipient:"customer",name:Object(o.__)("New Account ","wp-marketing-automations")},{slug:"reset_password",recipient:"customer",name:Object(o.__)("Reset Password ","wp-marketing-automations")},{slug:"new_order",recipient:"admin",name:Object(o.__)("New Order","wp-marketing-automations")},{slug:"failed_order",recipient:"admin",name:Object(o.__)("Failed Order","wp-marketing-automations")},{slug:"cancel_order",recipient:"admin",name:Object(o.__)("Cancelled Order","wp-marketing-automations")}],z=function(e){var t=e.upgradeProOverlay,n=e.languages,a=void 0===n?[]:n,c=e.showHeader,l=void 0!==c&&c,u=F(Object(r.useState)(!1),2),s=u[0],f=u[1];return Object(r.createElement)("div",{className:"bwf-email-notifs ".concat(l?"bwf-pt-24":"")},t,l&&Object(r.createElement)("div",{className:"bwf-email-notifs-header"},Object(r.createElement)("div",{className:"bwf-email-notifs__lang-tabs"},Object.keys(a).map((function(e){var t;return Object(r.createElement)(y.a,{className:"is-light",key:"email-notif-head-".concat(e),onClick:function(){},disabled:!0},null!==(t=a[e])&&void 0!==t?t:e)})))),Object(r.createElement)("div",{className:"bwf-email-notifs-list"},U.map((function(e){return Object(r.createElement)("div",{className:"bwf-email-notifs-list-item",key:e.slug},Object(r.createElement)("div",{className:"bwf-email-notifs-list-item-l"},Object(r.createElement)("a",{onClick:function(e){Object(i.cc)()||f(!0)}},e.name),Object(r.createElement)("div",{className:"bwf-t-capitalize"},Object(r.createElement)("span",null,Object(o.__)("Recipient","wp-marketing-automations")+": "+e.recipient))),Object(r.createElement)("div",{className:"last-updated"}),Object(r.createElement)("div",{className:"bwf-email-notifs-list-item-r"},Object(r.createElement)(y.a,{disabled:!0,onClick:function(){f(!0)},className:"is-light"},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(r.createElement)(d.a,{icon:"view",size:16}),Object(o.__)("Preview","wp-marketing-automations"))),Object(r.createElement)(y.a,{disabled:!0,className:"is-light",onClick:function(){Object(i.cc)()||f(!0)}},Object(o.__)("Edit","wp-marketing-automations")),Object(r.createElement)(O.ToggleControl,{className:"bwf-tooglecontrol-advance",onChange:function(){Object(i.cc)()||f(!0)},disabled:!0,checked:!1})))}))),Object(r.createElement)(j.b,{isOpen:s,onRequestClose:function(){return f(!1)},modalContent:{isFeature:!0,featureTitle:Object(o.__)("Transactional Email","wp-marketing-automations"),proLink:Object(i.gb)("upgrade",{utm_medium:"Email+Notifications+Upgrade+Modal"})}}))},M=n(23),R=n(48),L=n(84),q=n(382);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return K(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(K(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,K(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,K(f,"constructor",u),K(u,"constructor",l),l.displayName="GeneratorFunction",K(u,a,"GeneratorFunction"),K(f),K(f,a,"Generator"),K(f,r,(function(){return this})),K(f,"toString",(function(){return"[object Generator]"})),(H=function(){return{w:o,m:b}})()}function K(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(K=function(e,t,n,r){function o(t,n){K(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Q(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Q(o,r,a,c,i,"next",e)}function i(e){Q(o,r,a,c,i,"throw",e)}c(void 0)}))}}function W(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.value,n=void 0===t?"":t,a=e.onUpdate,o=void 0===a?function(){}:a,c=e.label,l=void 0===c?"":c,u=e.placeholder,s=void 0===u?"":u,f=X(Object(r.useState)(""),2),m=f[0],p=f[1],O=Object(r.useRef)(null),y=""!==n?n.split(","):[];return Object(r.createElement)(r.Fragment,null,""!==l&&Object(r.createElement)("div",{className:"bwf-add-mail-input-label"},l),Object(r.createElement)("div",{className:"bwf-add-mail-input-wrap",onClick:function(){return O.current.focus()}},function(){if(""!==n)return Object(r.createElement)(r.Fragment,null,y.map((function(e,t){return""!==e.trim()&&Object(r.createElement)("span",{key:t,className:"bwf-search__selected-tag",onClick:function(e){return e.stopPropagation()}},e,Object(r.createElement)("span",{onClick:function(t){t.stopPropagation();var n=W(y).filter((function(t){return t!=e}));o(n.join(","))}},Object(r.createElement)(d.a,{size:16,icon:"cross-circle"})))})))}(),y.length<10&&Object(r.createElement)("input",{type:"text",ref:O,value:m,onChange:function(e){return p(e.target.value)},onKeyDown:function(e){if(["Enter"," "].includes(e.key)&&(e.preventDefault(),Object(i.ic)(m))){var t=Object(b.cloneDeep)(y);t.push(m),o(t.join(",")),p("")}},onBlur:function(e){if(e.preventDefault(),Object(i.ic)(m)){var t=Object(b.cloneDeep)(y);t.push(m),o(t.join(",")),p("")}},autoComplete:"off",placeholder:s})))},ne=function(e){var t=Object(r.useContext)(i.h),n=e.mailType,a=void 0===n?"":n,c=e.onClose,l=void 0===c?function(){}:c,u=e.language,s=void 0===u?"":u,m=X(Object(r.useState)(""),2),j=m[0],v=m[1],g=X(Object(r.useState)({}),2),w=g[0],h=g[1],E=X(Object(r.useState)(!0),2),_=E[0],S=E[1],k=X(Object(r.useState)(Object(i.Db)()),2),P=k[0],N=k[1],T=X(Object(r.useState)(""),2),C=T[0],A=T[1],x=X(Object(r.useState)("desktop"),2),I=x[0],D=x[1],F=X(Object(r.useState)(!1),2),G=F[0],U=F[1];Object(r.useEffect)((function(){z()}),[]);var z=function(){var e=Y(H().m((function e(){return H().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,p()({path:Object(i.B)("/transactional-mail/".concat(a,"/preview?lang=").concat(s)),method:"GET"}).then((function(e){200==e.code&&(e.hasOwnProperty("result")&&e.result.hasOwnProperty("body")?v(e.result.body.replace(/\\/g,"")):v('<div style="display: flex;align-items: center;justify-content: center;font-size: 24px;font-weight: 500;padding: 24px;}" >'.concat(Object(o.__)("No Preview Found","wp-marketing-automations"),"</div>")),e.hasOwnProperty("result")&&e.result.hasOwnProperty("data")&&h(e.result.data)),S(!1)}));case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Y(H().m((function e(){var n,r;return H().w((function(e){for(;;)switch(e.p=e.n){case 0:if(U(!0),a=void 0,a=!1,Object(b.isEmpty)(P)&&(a=!0),a){e.n=5;break}return A(""),e.p=1,n={email:P,content:JSON.stringify($($({},w),{},{body:j,type:"block"}))},e.n=2,p()({method:"POST",path:Object(i.B)("/send-test-email"),data:n}).then((function(){U(!1),t(Object(o.__)("Test email sent successfully","wp-marketing-automations")),Object(i.Nb)(t,2e3)})).catch((function(e){throw Error(e)}));case 2:e.n=4;break;case 3:e.p=3,e.v,U(!1),t(Object(o.__)("Failed to send test email, please try again","wp-marketing-automations")),Object(i.Nb)(t,2e3);case 4:e.n=6;break;case 5:r="",Object(b.isEmpty)(P)&&(r=Object(o.__)("Email is required.","wp-marketing-automations")),Object(b.isEmpty)(r)&&!(!0).content&&(r=Object(o.__)("Mail content is required field.","wp-marketing-automations")),A(r),U(!1);case 6:return e.a(2)}var a}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(O.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-fullsc-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-stretch-header-single"},Object(r.createElement)("div",{className:"bwf-left-section"},Object(r.createElement)("div",{className:"bwf-editable-title"},Object(o.__)("Preview & Test","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwfan-responsive-toggle"},["desktop","mobile"].map((function(e){return Object(r.createElement)(y.a,{key:e,className:f()("bwf-responsive-toggle-icon",{"active-screen":I===e}),onClick:function(){void 0!==D&&D(e)},showTooltip:!1,size:20,title:Object(b.capitalize)(e)},Object(r.createElement)(d.a,{icon:e,size:20,color:I===e?"#353030":"#82838e"}))}))),Object(r.createElement)("div",{className:"bwf-right-section"},Object(r.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:l},Object(r.createElement)(d.a,{icon:"cross"})))),Object(r.createElement)("div",{className:"bwf-transactional-preview-model-content"},Object(r.createElement)("div",{className:"bwf-preview-model-c-sidebar"},Object(r.createElement)("div",{className:f()("bwf-send-test-email",{"bwf-has-error":!!C})},Object(r.createElement)("div",{className:"bwf-send-test-email-header"},Object(o.__)("Send Test Email","wp-marketing-automations")),Object(r.createElement)(te,{value:P,onUpdate:function(e){var t,n;Object(i.yc)(e),N(e),t=e,n="",Object(b.isEmpty)(t)&&(n=Object(o.__)("Email is required.","wp-marketing-automations")),A(n),Object(b.isEmpty)(n)},placeholder:Object(o.__)("Enter email addressâ€¦","wp-marketing-automations")}),""!==C&&Object(r.createElement)("div",{className:"bwf-send-email-err"},C),Object(r.createElement)(y.a,{variant:"primary",className:"bwf-test-email-btn bwf-no-ripple "+(G?"isloading":""),onClick:M},G?Object(r.createElement)(L.a,{color:"#ffffff"}):Object(o.__)("Send Email","wp-marketing-automations"))),!_&&Object(r.createElement)(q.a,{previewData:j,content:null,isTransactional:!0})),Object(r.createElement)("div",{className:"bwf-preview-model-c-preview"},Object(r.createElement)("div",{className:"bwf-iframe bwf-preview-screen-"+I},_?Object(r.createElement)(R.a,null):Object(r.createElement)("iframe",{srcDoc:j})))))};function re(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return ae(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(ae(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,ae(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,ae(f,"constructor",u),ae(u,"constructor",l),l.displayName="GeneratorFunction",ae(u,a,"GeneratorFunction"),ae(f),ae(f,a,"Generator"),ae(f,r,(function(){return this})),ae(f,"toString",(function(){return"[object Generator]"})),(re=function(){return{w:o,m:b}})()}function ae(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(ae=function(e,t,n,r){function o(t,n){ae(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function oe(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ce(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return ue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var se=Object(i.nb)(),fe=function(e){var t=e.upgradeProOverlay,n=Object(u.i)(),a=n.lang,c=void 0===a?"":a,l=Object(r.useContext)(i.h),s=Object(i.R)(),m=ie(Object(r.useState)(""!==c?c:s),2),w=m[0],h=m[1],E=ie(Object(r.useState)(!1),2),_=E[0],S=E[1],k=ie(Object(r.useState)(!1),2),N=k[0],T=k[1],C=ie(Object(r.useState)(""),2),A=C[0],x=C[1],I=P(),F=I.isLoading,G=I.getTransactionalMails,U=D(),R=U.fetch,L=U.setStateValue;if(Object(r.useEffect)((function(){Object(i.m)(Object(o.__)("Transactional Emails","wp-marketing-automations")),Object(i.cc)()&&-1!==Object(i.n)(bwfcrm_contacts_data.bwf_pro_version,"3.3.1")&&R(n)}),[]),!Object(i.cc)()||-1===Object(i.n)(bwfcrm_contacts_data.bwf_pro_version,"3.3.1"))return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z,{upgradeProOverlay:t,showHeader:!Object(b.isEmpty)(se),languages:se}));var q=G(),B=function(){var e,t=(e=re().m((function e(){var t,n,r,a=arguments;return re().w((function(e){for(;;)switch(e.p=e.n){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"all",n=a.length>1&&void 0!==a[1]&&a[1],T(!0),e.p=1,e.n=2,p()({path:Object(i.B)("/transactional-mail/".concat(t,"/status")),method:"POST",data:{status:n}}).then((function(e){if(200!==e.code)throw Error(Object(i.v)(null==e?void 0:e.message));l(e.message),L("data",Object(b.cloneDeep)(q).map((function(e){return"all"!==t&&e.slug!==t||(e.enabled=n),e}))),Object(i.Nb)(l,2e3),T(!1)})).catch((function(e){throw Error(Object(i.v)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,console.log(r),l(r.message),T(!1),Object(i.Nb)(l,2e3);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){oe(o,r,a,c,i,"next",e)}function i(e){oe(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-email-notifs ".concat(Object(b.isEmpty)(se)?"bwf-pt-24":"")},t,F?Object(r.createElement)(r.Fragment,null,Object(b.isEmpty)(se)?null:Object(r.createElement)("div",{className:"bwf-email-notifs-header"},Object(r.createElement)("div",{className:"bwf-email-notifs__lang-tabs"},ce(Array(5)).map((function(e,t){return Object(r.createElement)(g.a,{h:30,w:80,br:8,key:"header-place-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-email-notifs-list"},ce(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-email-notifs-list-item",key:"notfi-placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf-email-notifs-list-item-l"},Object(r.createElement)(g.a,{h:16,w:150}),Object(r.createElement)(g.a,{h:12,w:50,mt:4})),Object(r.createElement)("div",{className:"last-updated"},Object(r.createElement)(g.a,{h:16,w:150})),Object(r.createElement)("div",{className:"bwf-email-notifs-list-item-r"},Object(r.createElement)(g.a,{h:30,w:80}),Object(r.createElement)(g.a,{h:30,w:40}),Object(r.createElement)(g.a,{h:30,w:40})))})))):Object(r.createElement)(r.Fragment,null,Object(b.isEmpty)(se)?null:Object(r.createElement)("div",{className:"bwf-email-notifs-header"},Object(r.createElement)("div",{className:"bwf-email-notifs__lang-tabs"},Object.keys(se).map((function(e){var t;return Object(r.createElement)(y.a,{className:f()("is-light",{"is-selected":e===w}),key:"email-notif-head-".concat(e),onClick:function(){h(e),Object(u.l)({page:"autonami",path:"/transactional-emails/notifications",lang:e},"/",{})}},null!==(t=se[e])&&void 0!==t?t:e)})))),Object(r.createElement)("div",{className:"bwf-email-notifs-list"},q.map((function(e){return Object(r.createElement)("div",{className:"bwf-email-notifs-list-item",key:e.slug},Object(r.createElement)("div",{className:"bwf-email-notifs-list-item-l"},Object(i.cc)()?Object(r.createElement)(v.a,{href:Object(i.ob)("/transactional-email/".concat(e.slug).concat(s!==w?"/".concat(w):""))},Object(r.createElement)("div",{className:"bwf-display-flex gap--8 bwf-flex-start"},Object(r.createElement)("span",{className:"bwf-normal-a-t bwf-notif-title"},e.name),e.hasOwnProperty("description")&&!Object(b.isEmpty)(e.description)&&Object(r.createElement)(M.a,{icon:"help-circle",iconSize:15,iconColor:"#82838E",size:300,toolTipText:Object(r.createElement)("span",{className:"bwfan_tooltip_text","data-position":"top"},e.description)}))):Object(r.createElement)("a",{onClick:function(){Object(i.cc)()||S(!0)}},e.name),Object(r.createElement)("span",{className:"bwf-t-capitalize"},Object(o.__)("Recipient","wp-marketing-automations")+": ",(t=e).hasOwnProperty("other_recipient")?Object(r.createElement)("span",{className:"bwf-txt-transform-normal bwf-display-inline"},"customer"===t.recipient&&Object(o.__)("Customer","wp-marketing-automations")+", ",t.other_recipient):t.recipient)),Object(r.createElement)("div",{className:"last-updated"}),Object(r.createElement)("div",{className:"bwf-email-notifs-list-item-r"},function(e){return Object(r.createElement)(r.Fragment,null,Object(i.cc)()?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,{className:"components-button is-light",onClick:function(){x(e.slug)}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(r.createElement)(d.a,{icon:"view",size:16}),Object(o.__)("Preview","wp-marketing-automations"))),Object(r.createElement)(v.a,{className:"components-button is-light",href:Object(i.ob)("/transactional-email/".concat(e.slug).concat(s!==w?"/".concat(w):"","&editor=block"))},Object(o.__)("Edit","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,{onClick:function(){S(!0)},className:"is-light"},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(r.createElement)(d.a,{icon:"view",size:16}),Object(o.__)("Preview","wp-marketing-automations"))),Object(r.createElement)(y.a,{className:"is-light",onClick:function(){S(!0)}},Object(o.__)("Edit","wp-marketing-automations"))),Object(r.createElement)(O.ToggleControl,{className:"bwf-tooglecontrol-advance",onChange:function(){Object(i.cc)()?B(e.slug,!e.enabled):S(!0)},disabled:N,checked:e.enabled||!1}))}(e)));var t})))),A&&Object(r.createElement)(ne,{mailType:A,language:w!==s?w:"",onClose:function(){return x("")}}),!Object(i.cc)()&&Object(r.createElement)(j.b,{isOpen:_,onRequestClose:function(){return S(!1)},modalContent:{isFeature:!0,featureTitle:Object(o.__)("Transactional Email","wp-marketing-automations"),proLink:Object(i.gb)("upgrade",{utm_medium:"Email+Notifications+Upgrade+Modal"})}}))},be=n(146),me=n(202);n(1457);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Oe=["fetch","setStateProp"];function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(){var e=Object(N.a)("transactionalCA"),t=e.fetch,n=e.setStateProp;return de(de({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Oe)),{},{fetch:function(e,r,a){n("isLoading",!0);var o={offset:r,limit:a,search:e.s};t("GET",Object(i.B)("/transactional-activity"),o)},setTemplateValues:function(e,t){n(e,t)},setStateValue:function(e,t){n(e,t)}})};function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var we=["getStateProp"];function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(){var e=Object(w.a)("transactionalCA"),t=e.getStateProp;return Ee(Ee({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,we)),{},{getActivity:function(){return t("data")},pageNo:parseInt(t("offset"))/parseInt(t("limit"))+1,limit:parseInt(t("limit")),offset:parseInt(t("offset")),total:parseInt(t("total"))})},ke=n(343),Pe=n(1200);function Ne(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var l=r&&r.prototype instanceof i?r:i,u=Object.create(l.prototype);return Te(u,"_invoke",function(n,r,a){var o,i,l,u=0,s=a||[],f=!1,b={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return o=t,i=0,l=e,b.n=n,c}};function m(n,r){for(i=n,l=r,t=0;!f&&u&&!a&&t<s.length;t++){var a,o=s[t],m=b.p,p=o[2];n>3?(a=p===r)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=m&&((a=n<2&&m<o[1])?(i=0,b.v=r,b.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,b.n=p,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,s,p){if(u>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,p),i=s,l=p;(t=i<2?e:l)||!f;){o||(i?i<3?(i>1&&(b.n=-1),m(i,l)):b.n=l:b.v=l);try{if(u=2,o){if(i||(a="next"),t=o[a]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((t=(f=b.n<0)?l:n.call(r,b))!==c)break}catch(t){o=e,i=1,l=t}finally{u=1}}return{value:t,done:f}}}(n,a,o),!0),u}var c={};function i(){}function l(){}function u(){}t=Object.getPrototypeOf;var s=[][r]?t(t([][r]())):(Te(t={},r,(function(){return this})),t),f=u.prototype=i.prototype=Object.create(s);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,Te(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=u,Te(f,"constructor",u),Te(u,"constructor",l),l.displayName="GeneratorFunction",Te(u,a,"GeneratorFunction"),Te(f),Te(f,a,"Generator"),Te(f,r,(function(){return this})),Te(f,"toString",(function(){return"[object Generator]"})),(Ne=function(){return{w:o,m:b}})()}function Te(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Te=function(e,t,n,r){function o(t,n){Te(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,r)}function Ce(e,t,n,r,a,o,c){try{var i=e[o](c),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,c,i=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ie=[{key:"contact",label:Object(o.__)("Contact","wp-marketing-automations"),cellClassName:"bwf-word-break"},{key:"type",label:Object(o.__)("Type","wp-marketing-automations"),cellClassName:"bwf-word-break"},{key:"orderId",label:Object(o.__)("Order ID","wp-marketing-automations")},{key:"sentOn",label:Object(o.__)("Sent On","wp-marketing-automations"),cellClassName:"bwf-w-180"},{key:"sent",label:Object(o.__)("Sent","wp-marketing-automations"),cellClassName:"bwf-t-center"},{key:"open",label:Object(o.__)("Open","wp-marketing-automations"),cellClassName:"bwf-t-center"},{key:"click",label:Object(o.__)("Click","wp-marketing-automations"),cellClassName:"bwf-t-center"},{key:"action",label:Object(o.__)("Action","wp-marketing-automations"),cellClassName:"bwf-w-150"}],De=Array(10).fill({transactional_type:Object(o.__)("New Order","wp-marketing-automations"),is_order:!0,c_status:2}),Fe=function(e){var t=e.upgradeProOverlay,n=Object(r.useContext)(i.h),a=Ae(Object(r.useState)(!1),2),c=a[0],l=a[1],s=ve(),f=s.fetch,m=s.setStateValue,O=Ae(Object(r.useState)(0),2),g=O[0],w=O[1],h=Ae(Object(r.useState)({status:!1}),2),E=h[0],_=h[1],S=i.ac||-1===Object(i.n)(bwfcrm_contacts_data.bwf_pro_version,"3.3.1"),k=Se(),P=k.pageNo,N=k.getActivity,T=k.total,C=k.getLoading,A=k.limit,x=k.offset,I=!S&&C(),D=Object(u.i)(),F=S?De:N(),G=function(){var e,t=(e=Ne().m((function e(t){var r;return Ne().w((function(e){for(;;)switch(e.p=e.n){case 0:if(!S){e.n=1;break}return!Object(i.cc)()&&l(!0),e.a(2);case 1:return w(t),e.p=2,e.n=3,p()({path:Object(i.B)("/transactional-mail/".concat(t,"/resend")),method:"POST"}).then((function(e){n(e.message),f(D,0,A)}));case 3:e.n=5;break;case 4:e.p=4,r=e.v,n(r.hasOwnProperty("message")?r.message:Object(o.__)("Unable to resend mail","wp-marketing-automations"));case 5:w(0),Object(i.Nb)(n,2e3);case 6:return e.a(2)}}),e,null,[[2,4]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function c(e){Ce(o,r,a,c,i,"next",e)}function i(e){Ce(o,r,a,c,i,"throw",e)}c(void 0)}))});return function(e){return t.apply(this,arguments)}}(),U=F.map((function(e){return[{display:Object(r.createElement)(r.Fragment,null,S?Object(r.createElement)("span",{className:"bwf-normal-a-t",onClick:function(){return!Object(i.cc)()&&l(!0)}},"John Doe"):Object(r.createElement)(v.a,{className:"bwf-a-no-underline",href:Object(i.ob)("/contact/"+e.cid+"/email&return_to=".concat(D.path))},Object(r.createElement)(ke.a,{contact:e.contact,hideJoiningDate:!0,showContactInitials:!1}))),value:""},{display:e.transactional_type,value:""},{display:e.hasOwnProperty("is_order")&&e.is_order&&e.hasOwnProperty("oid")&&parseInt(e.oid)>0?Object(r.createElement)("a",{className:"bwf-a-no-underline bwf-display-flex gap-4 bwf-flex-start",href:"post.php?post=".concat(e.oid,"&action=edit"),target:"_blank",rel:"noreferrer"},Object(r.createElement)(d.a,{icon:"external-link",size:"16",color:"#0073aa"}),e.oid):S?Object(r.createElement)("span",{className:"bwf-normal-a-t bwf-display-flex gap-4 bwf-flex-start",onClick:function(){return!Object(i.cc)()&&l(!0)}},Object(r.createElement)(d.a,{icon:"external-link",size:"16",color:"#0073aa"}),123):"-",value:e.oid},{display:Object(i.jb)(e.created_at),value:""},{display:Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-".concat(parseInt(e.c_status))}),value:""},{display:parseInt(e.open)>0?Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-2"}):Object(r.createElement)("span",{className:"bwf-crm-status"}),value:""},{display:parseInt(e.click)>0?Object(r.createElement)("span",{className:"bwf-crm-status bwf-crm-status-2"}):Object(r.createElement)("span",{className:"bwf-crm-status"}),value:""},{display:Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start"},Object(r.createElement)(y.a,{isSecondary:!0,className:"is-secondary bwf-btn-small is-blue-btn",disabled:g===e.ID||S,isBusy:g===e.ID,onClick:function(){return G(e.ID)}},Object(o.__)("Resend","wp-marketing-automations")),Object(r.createElement)(y.a,{className:"is-secondary bwf-btn-small is-blue-btn",onClick:function(){return _({status:!0,contact:e.contact,conversation:e})}},Object(o.__)("View","wp-marketing-automations"))),value:""}]}));Object(r.useEffect)((function(){S||f(D,x,A),Object(i.m)(Object(o.__)("Transactional Activity","wp-marketing-automations"))}),[D.s]),Object(r.useEffect)((function(){return function(){return m("offset",0)}}),[]);var z=function(e){e!==A&&(m("limit",e),f(D,x,e))},M=[Object(r.createElement)(me.a,{key:"search",isLoading:I,searchTerm:"",showResultCount:!1,setSearchData:function(e){if(Object(b.size)(e))Object(u.l)({s:e},"/",D);else{var t=Object(b.cloneDeep)(D);t.hasOwnProperty("s")&&(null==t||delete t.s),Object(u.l)(t,"/",{})}}})];return Object(r.createElement)("div",{className:"bwf-transactional-email-contact-activity"},t,Object(r.createElement)(be.a,{rows:U,headers:Ie,query:{paged:P},rowsPerPage:A,totalRows:!Object(i.cc)()||S?10:T,isLoading:I,onPageChange:S?function(){}:function(e){m("offset",(e-1)*A),f(D,(e-1)*A,A)},onQueryChange:S?function(){}:function(e){return"per_page"!==e?function(){}:z},showMenu:!1,rowHeader:!0,actions:Object(i.cc)()&&!S?M:[],emptyMessage:Object(o.__)("No Contact Activity Found","wp-marketing-automations"),className:S?"":"has-search"}),i.ac&&Object(r.createElement)(j.b,{isOpen:c,onRequestClose:function(){return l(!1)},modalContent:{isFeature:!0,featureTitle:Object(o.__)("Transactional Email","wp-marketing-automations"),proLink:Object(i.gb)("upgrade",{utm_medium:"Email+Notifications+Upgrade+Modal"})}}),Object(r.createElement)(Pe.a,{onRequestClose:function(){return _({status:!1})},conversation:E.conversation,contact:E.contact,isOpen:E.status}))},Ge=(n(1458),n(1100)),Ue=n(1127);function ze(){return(ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var Me=[{slug:"notifications",name:Object(o.__)("Email Notifications","wp-marketing-automations"),path:"/transactional-emails/notifications"},{slug:"contact-activity",name:Object(o.__)("Contact Activity","wp-marketing-automations"),path:"/transactional-emails/contact-activity"}];t.default=function(){var e=Object(a.f)().tab,t=void 0===e?"notifications":e;Object(c.a)(Object(o.__)("Transactional Emails","wp-marketing-automations"),"",0,"transactional");var n=!i.ac&&!Object(i.cc)()&&Object(r.createElement)(Ge.a,{onPage:!0});return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-content-header-new bwf-transactional-email-header"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(r.createElement)("span",null,Object(o.__)("Transactional Emails","wp-marketing-automations")," ",!Object(i.cc)()&&i.e)),i.ac&&Object(r.createElement)(r.Fragment,null,"notifications"===t&&Object(r.createElement)(Ue.a,{message:Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)(d.a,{icon:"info",size:"24"}),Object(o.__)("Transactional emails follow customer actions like order confirmations, shipping, etc. Create stunning, multilingual emails with Email Builder.","wp-marketing-automations")),proLink:Object(i.gb)("upgrade",{utm_medium:"Transactional+Email+Upgrade+Notice"})}),"contact-activity"===t&&Object(r.createElement)(Ue.a,{title:Object(o.__)("Contact Activity","wp-marketing-automations"),message:Object(o.__)("Tracks email interactions such as opens, clicks, and bounces, providing engagement insights and ensuring better follow-up.","wp-marketing-automations"),proLink:Object(i.gb)("upgrade",{utm_medium:"Transactional+Email+Activity+Upgrade+Notice"})})))),Object(r.createElement)(l.a,{tabs:Me,selected:t||"notifications",className:i.ac?"bwf-tab-section-lite":"",disableUrlUpdate:!0,onChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.l)({page:"autonami",path:t},"/",{})}}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(a.c,null,Object(r.createElement)(a.a,{exact:!0,path:["/transactional-emails","/transactional-emails/notifications"],render:function(e){return Object(r.createElement)(fe,ze({},e,{upgradeProOverlay:n}))}}),Object(r.createElement)(a.a,{exact:!0,path:"/transactional-emails/contact-activity",render:function(e){return Object(r.createElement)(Fe,ze({},e,{upgradeProOverlay:n}))}}))))}}}]);