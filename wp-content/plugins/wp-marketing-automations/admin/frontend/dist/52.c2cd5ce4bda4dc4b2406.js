(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1195:function(e,t,n){},1433:function(e,t,n){},1512:function(e,t,n){"use strict";n.r(t),n.d(t,"previewProModalData",(function(){return re}));var a=n(0),r=n(2),c=n(6),o=n.n(c),i=n(1),l=n(5),s=n(11),m=n(8),b=n(3),u=n(1095),d=function(e){var t=e.data,n=void 0===t?{}:t,c=n.nice_name,o=void 0===c?"":c,i=n.source,l=void 0===i?"":i;return Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(a.createElement)("div",{className:"bwf-node-icon icon-start"},Object(a.createElement)(m.a,{size:22,icon:"rocket"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(r.isEmpty)(l)?"":l),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(r.isEmpty)(o)?"":o)))),Object(a.createElement)(u.d,{type:"source",position:"bottom",isConnectable:!1}))},f=function(e){var t=e.data,n=void 0===t?{}:t,c=n.subject,o=void 0===c?"":c,l=n.nice_name,s=void 0===l?"":l,b=n.integration,d=void 0===b?"":b;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(u.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-action"},Object(a.createElement)(m.a,{size:22,icon:"charge"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Action","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(r.isEmpty)(d)?"":d),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(r.isEmpty)(s)?"":s),!Object(r.isEmpty)(o)&&Object(a.createElement)("div",{className:"bwf-node-inner-label bwf-two-line-ellipse-text"},o)))))))),Object(a.createElement)(u.d,{type:"source",isConnectable:!1,position:"bottom"}))},p=function(e){var t=e.data,n=(void 0===t?{}:t).values,c=void 0===n?[]:n;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(u.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon"},Object(a.createElement)(m.a,{size:26,icon:"condition"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Conditional","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(r.isEmpty)(c)?Object(i.__)("No Condition Found","wp-marketing-automations"):Object(a.createElement)(a.Fragment,null,c.map((function(e,t){return Object(a.createElement)(a.Fragment,null,0!==t&&Object(a.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(a.createElement)("span",{className:"bwf-divider"},"OR")),e.map((function(e,t){return Object(a.createElement)(a.Fragment,null,0!==t&&Object(a.createElement)("div",{className:"bwf-step-divider"},Object(a.createElement)("span",{className:"bwf-divider"},"AND")),Object(a.createElement)("div",{className:"bwf-step-content-content"},e))})))}))))))),Object(a.createElement)(u.d,{type:"source",position:"bottom",isConnectable:!1}))},O=function(){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(u.d,{type:"source",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-node-content bwf-end"},Object(a.createElement)("div",{className:"bwf-node-content-item"},Object(i.__)("End Automation","wp-marketing-automations")))))},w=function(e){var t=e.data,n=void 0===t?{}:t,c=n.nice_name,o=void 0===c?"":c,l=n.source_name;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(u.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-goal"},Object(a.createElement)(m.a,{size:26,icon:"goal"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Goal","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(r.isEmpty)(l)?"":l),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(r.isEmpty)(o)?"":o))))))),Object(a.createElement)(u.d,{type:"source",position:"bottom",isConnectable:!1}))},j={1:Object(i.__)("Delay for a specific period","wp-marketing-automations"),2:Object(i.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(i.__)("Delay until a custom field date","wp-marketing-automations")},v=function(e){var t=e.data,n=e.id,r=t.type,c=void 0===r?1:r,o=t.value,l=void 0===o?"":o;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper","node-id":n},Object(a.createElement)(u.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(a.createElement)(m.a,{size:28,icon:"time-left"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Delay","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},j.hasOwnProperty(parseInt(c))?j[parseInt(c)]:""),Object(a.createElement)("div",{className:"bwf-node-content-label"},l))))))),Object(a.createElement)(u.d,{type:"source",position:"bottom",isConnectable:!1}))},y=function(e){return Object(a.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(a.createElement)(u.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(a.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?Object(i.__)("No","wp-marketing-automations"):Object(i.__)("Yes","wp-marketing-automations")),Object(a.createElement)(u.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},E=function(e){var t=e.data,n=void 0===t?{}:t;return Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick is-start-node-selected"},Object(a.createElement)("div",{className:"bwf-node-icon icon-exit"},Object(a.createElement)(m.a,{size:26,icon:"exit"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(i.__)("Step","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(i.__)("Exit Automation","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"},n.hasOwnProperty("step_status")&&3===parseInt(n.step_status)&&Object(a.createElement)("div",{className:"bwf-node-stat deleted"},Object(i.__)("Deleted","wp-marketing-automations"))))),Object(a.createElement)(u.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},g=(n(1160),n(1195),n(1161),n(1207)),h=n.n(g),N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.type)return 200+t;var a=0;switch(e.type){case"start":a=n?90:60;break;case"end":a=30;break;case"exit":a=65;break;case"wait":a=n&&e.data&&e.data.sidebarValues?160:105;break;case"yesNoNode":a=n?50:20;break;case"benchmark":a=n&&e.data&&e.data.benchmark?165:120;break;case"action":var c=e.data&&e.data.selected?e.data.selected:"";a=""!==c?n?165:120:105;break;case"conditional":var o=Object(r.flatten)(e.data.values).length,i=o-1;a=o?32*o+29*i+75:150,n||(a-=30);break;default:a=200}return a+t},_=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new h.a.graphlib.Graph;return a.setDefaultEdgeLabel((function(){return{}})),a.setGraph({rankdir:"TB",ranksep:90,nodesep:100}),e.forEach((function(e){Object(u.k)(e)?a.setNode(e.id,{width:280,height:N(e,3,t)+n}):a.setEdge(e.source,e.target,{weight:"conditional"===e.type?2:5})})),h.a.layout(a),e.map((function(e){if(Object(u.k)(e)){var n=a.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var r=N(e,"conditional"===e.type?70:50,t);e.position={x:n.x-140+Math.random()/1e3,y:n.y-r/2}}return e}))},k=n(383);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var P=function(e){var t=e.recipeID,n=e.previewData,c=e.hasPRO,o={start:d,action:f,conditional:p,end:O,benchmark:w,wait:v,yesNoNode:y,exit:E},i=S(Object(a.useState)([]),2),l=i[0],s=i[1],m=Object(u.l)(),j=Object(u.n)().setCenter,g=Object(a.useRef)();return Object(a.useEffect)((function(){Object(r.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(g.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect(),s(n))}),[]),Object(a.useEffect)((function(){var e=0,t=0,n=m.getState().nodes;if(n.length&&g.current){var a=n[0];a.hasOwnProperty("__rf")?(e=a.__rf.position.x+140,t=a.__rf.position.y):(e=a.position.x+140,t=a.position.y),t=parseFloat(t)+.45*parseFloat(g.current.height),j(e,t,1)}}),[l]),Object(a.createElement)("div",{id:"bwf-single-automation-wrap",className:"bwf-automation-wrap",key:t},!b.Zb&&c&&Object(a.createElement)(k.a,{dismissable:!1,isRecipe:!0}),Object(a.createElement)(u.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:o,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:_(l,!1)},Object(a.createElement)(u.c,{showInteractive:!1}),Object(a.createElement)(u.a,null)))},A=n(9),x=n.n(A),T=n(48);function F(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function c(n,a,r,c){var l=a&&a.prototype instanceof i?a:i,s=Object.create(l.prototype);return D(s,"_invoke",function(n,a,r){var c,i,l,s=0,m=r||[],b=!1,u={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return c=t,i=0,l=e,u.n=n,o}};function d(n,a){for(i=n,l=a,t=0;!b&&s&&!r&&t<m.length;t++){var r,c=m[t],d=u.p,f=c[2];n>3?(r=f===a)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=d&&((r=n<2&&d<c[1])?(i=0,u.v=a,u.n=c[1]):d<f&&(r=n<3||c[0]>a||a>f)&&(c[4]=n,c[5]=a,u.n=f,i=0))}if(r||n>1)return o;throw b=!0,a}return function(r,m,f){if(s>1)throw TypeError("Generator is already running");for(b&&1===m&&d(m,f),i=m,l=f;(t=i<2?e:l)||!b;){c||(i?i<3?(i>1&&(u.n=-1),d(i,l)):u.n=l:u.v=l);try{if(s=2,c){if(i||(r="next"),t=c[r]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);c=e}else if((t=(b=u.n<0)?l:n.call(a,u))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:b}}}(n,r,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var m=[][a]?t(t([][a]())):(D(t={},a,(function(){return this})),t),b=s.prototype=i.prototype=Object.create(m);function u(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,D(e,r,"GeneratorFunction")),e.prototype=Object.create(b),e}return l.prototype=s,D(b,"constructor",s),D(s,"constructor",l),l.displayName="GeneratorFunction",D(s,r,"GeneratorFunction"),D(b),D(b,r,"Generator"),D(b,a,(function(){return this})),D(b,"toString",(function(){return"[object Generator]"})),(F=function(){return{w:c,m:u}})()}function D(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(D=function(e,t,n,a){function c(t,n){D(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,a)}function I(e,t,n,a,r,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var M=function(e){var t=e.recipeData,n=e.onRequestClose,c=e.isImporting,o=e.importRecipe,u=R(Object(a.useState)(!0),2),d=u[0],f=u[1],p=R(Object(a.useState)({}),2),O=p[0],w=p[1],j=function(){var e,n=(e=F().m((function e(){var n;return F().w((function(e){for(;;)switch(e.p=e.n){case 0:return f(!0),e.p=1,e.n=2,x()({path:Object(b.B)("/automation/recipe/?recipe_slug=".concat(t.slug)),method:"GET"}).then((function(e){f(!1),200===e.code&&(Object(r.isEmpty)(e.result)||w(e.result))}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,f(!1),w(n),console.log(n);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){I(c,a,r,o,i,"next",e)}function i(e){I(c,a,r,o,i,"throw",e)}o(void 0)}))});return function(){return n.apply(this,arguments)}}();return Object(a.useEffect)((function(){w({}),f(!0),Object(r.isEmpty)(t)||j()}),[t]),Object(a.createElement)(a.Fragment,null,!Object(r.isEmpty)(t)&&Object(a.createElement)(l.Modal,{title:"",className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-fullscreen bwf-recipe-preview-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-recipe-preview-content-wrap"},Object(a.createElement)("div",{className:"bwf-stretch-header-customer-journey"},Object(a.createElement)("div",{className:"bwf-wrapper"},Object(a.createElement)("div",{className:"bwf-left-section"},Object(a.createElement)("div",{className:"bwf-back-button bwf-display-flex bwf-cursor-pointer",onClick:n},Object(a.createElement)(m.a,{icon:"arrow-left",size:20})),Object(a.createElement)("div",{className:"bwf-title bwf-h3"},t.hasOwnProperty("name")?t.name:""),!b.Zb&&t.hasPRO&&Object(a.createElement)("div",{className:"bwf-recipe-paid"},b.e)),Object(a.createElement)("div",{className:"bwf-right-section"},Object(a.createElement)(s.a,{isPrimary:!0,onClick:function(){return o(t.slug,t.name,!!t.hasOwnProperty("hasPRO")&&t.hasPRO)},isBusy:c&&c.loading,disabled:c&&c.loading||d||Object(r.isEmpty)(O)||O.hasOwnProperty("code")&&400===O.code},Object(i.__)("Import Recipe","wp-marketing-automations"))))),Object(a.createElement)("div",{className:"bwf-recipe-preview-sidebar"},Object(a.createElement)("div",{className:"bwf-about-recipe"},Object(a.createElement)("div",{className:"bwf-recipe-title"},Object(i.__)("Description","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-recipe-description"},t.description)),Object(a.createElement)("div",{className:"bwf-recipe-tags"},!Object(r.isEmpty)(t.tag)&&Object.values(t.tag).map((function(e,t){return Object(a.createElement)("span",{className:"bwf-recipe-tag",key:t},e)}))),O.hasOwnProperty("video")&&!Object(r.isEmpty)(O.video)&&Object(a.createElement)("div",{className:"bwf-recipe-video"},Object(a.createElement)("iframe",{src:O.video}))),d?Object(a.createElement)("div",{className:"bwf-preview-reactflow-loader"},Object(a.createElement)(T.a,{size:"l"})):Object(a.createElement)(a.Fragment,null,O.hasOwnProperty("preview")&&!Object(r.isEmpty)(O.preview)?Object(a.createElement)(P,{recipeID:O.id,previewData:O.preview,hasPRO:t.hasPRO}):Object(a.createElement)("div",{className:"bwf-preview-reactflow-loader bwf-h2"},O.hasOwnProperty("message")?O.message:Object(i.__)("No Preview Data Found","wp-marketing-automations"))))))},z=(n(1433),n(26));function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var L=function(e){var t=B(Object(a.useState)(""),2),n=t[0],r=t[1],c=B(Object(a.useState)(""),2),o=c[0],b=c[1],u=e.onCloseModal,d=e.isLoading,f=void 0!==d&&d,p=e.onTitleAdded,O=e.recipeSlug;Object(a.useEffect)((function(){b("")}),[]);var w=function(){o?(r(""),p(O,o)):r(Object(i.__)("Automation name is required field","wp-marketing-automations"))};return Object(a.createElement)(l.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-modal-header"},Object(a.createElement)("div",{className:"bwf-modal-heading"},Object(i.__)("Add Automation","wp-marketing-automations")),Object(a.createElement)("span",{onClick:u,className:"bwf-modal-close"},Object(a.createElement)(m.a,{icon:"close",color:"#353030"}))),n&&Object(a.createElement)(z.a,{status:"error",onRemove:function(){return r("")}},n),Object(a.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&w()}},Object(a.createElement)(l.TextControl,{placeholder:Object(i.__)("Enter automation name","wp-marketing-automations"),autoFocus:!0,label:Object(i.__)("Name","wp-marketing-automations"),value:o,onChange:function(e){return b(e)},disabled:f}),Object(a.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(a.createElement)(s.a,{onClick:function(){return u()},className:"bwf-cancel-btn"},Object(i.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(s.a,{isPrimary:!0,disabled:f,onClick:w,isBusy:f},Object(i.__)("Create","wp-marketing-automations")))))},Z=n(12),q=n(341),$=(n(40),n(367));function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function c(n,a,r,c){var l=a&&a.prototype instanceof i?a:i,s=Object.create(l.prototype);return V(s,"_invoke",function(n,a,r){var c,i,l,s=0,m=r||[],b=!1,u={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return c=t,i=0,l=e,u.n=n,o}};function d(n,a){for(i=n,l=a,t=0;!b&&s&&!r&&t<m.length;t++){var r,c=m[t],d=u.p,f=c[2];n>3?(r=f===a)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=d&&((r=n<2&&d<c[1])?(i=0,u.v=a,u.n=c[1]):d<f&&(r=n<3||c[0]>a||a>f)&&(c[4]=n,c[5]=a,u.n=f,i=0))}if(r||n>1)return o;throw b=!0,a}return function(r,m,f){if(s>1)throw TypeError("Generator is already running");for(b&&1===m&&d(m,f),i=m,l=f;(t=i<2?e:l)||!b;){c||(i?i<3?(i>1&&(u.n=-1),d(i,l)):u.n=l:u.v=l);try{if(s=2,c){if(i||(r="next"),t=c[r]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),i=1);c=e}else if((t=(b=u.n<0)?l:n.call(a,u))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:b}}}(n,r,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var m=[][a]?t(t([][a]())):(V(t={},a,(function(){return this})),t),b=s.prototype=i.prototype=Object.create(m);function u(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,V(e,r,"GeneratorFunction")),e.prototype=Object.create(b),e}return l.prototype=s,V(b,"constructor",s),V(s,"constructor",l),l.displayName="GeneratorFunction",V(s,r,"GeneratorFunction"),V(b),V(b,r,"Generator"),V(b,a,(function(){return this})),V(b,"toString",(function(){return"[object Generator]"})),(K=function(){return{w:c,m:u}})()}function V(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(V=function(e,t,n,a){function c(t,n){V(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,a)}function W(e,t,n,a,r,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function Y(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){W(c,a,r,o,i,"next",e)}function i(e){W(c,a,r,o,i,"throw",e)}o(void 0)}))}}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=J(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){if(e){if("string"==typeof e)return ae(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var re=function(e){var t=e.templateName,n=e.proStatus;return X(X({title:Object(a.createElement)(a.Fragment,null,t,Object(i.__)(" is a PRO recipe","wp-marketing-automations")),content:Object(a.createElement)(a.Fragment,null,Object(i.__)("We're sorry, not all Recipe are available on your plan.","wp-marketing-automations"),b.ac?Object(i.__)(" Please upgrade to the PRO version to unlock all these awesome features.","wp-marketing-automations"):b.p<3?Object(i.__)(" Please activate your license to access premium recipe library","wp-marketing-automations"):Object(i.__)(" Please renew your license to access premium recipe library","wp-marketing-automations"))},!1!==n&&{action:function(){return Object(Z.l)({},"/settings/")}}),{},{proLink:Object(b.gb)("upgrade",{utm_medium:"Create+Automation+".concat(t,"+Upgrade+Modal")}),isTemplate:!0})};t.default=function(){var e=Object(Z.i)(),t=e.group,n=void 0===t?"All":t,c=e.subgroup,d=void 0===c?"":c,f=e.redirect,p=te(Object(a.useState)(!1),2),O=p[0],w=p[1],j=te(Object(a.useState)(!1),2),v=j[0],y=j[1],E=te(Object(a.useState)([]),2),g=E[0],h=E[1],N=te(Object(a.useState)([]),2),_=N[0],k=N[1],S=te(Object(a.useState)([]),2),C=S[0],P=S[1],A=te(Object(a.useState)({}),2),T=A[0],F=A[1],D=te(Object(a.useState)(!0),2),I=D[0],R=D[1],G=te(Object(a.useState)({}),2),z=G[0],B=G[1],U=te(Object(a.useState)({show:!1,recipeSlug:""}),2),J=U[0],V=U[1],W=te(Object(a.useState)(!1),2),Q=W[0],ee=W[1],ne=Object(q.a)().setAutomationData,ae=C.groups,ce=void 0===ae?[]:ae,oe=C.subGroups,ie=void 0===oe?[]:oe,le=function(t){""===t&&delete e.subgroup,Object(Z.l)(X({path:"/automations/create"},ie.hasOwnProperty(n)&&ie[n].includes(t)&&{subgroup:t}),"/",e)},se=te(Object(a.useState)(""),2),me=se[0],be=se[1],ue=Object(a.useContext)(b.h),de=function(){var e=Y(K().m((function e(t){var n;return K().w((function(e){for(;;)switch(e.p=e.n){case 0:return R(!0),e.p=1,e.n=2,x()({path:Object(b.B)("/recipes/?sync=".concat(Q)),signal:t}).then((function(e){var t,n,a,r;200===e.code&&null!=e&&null!==(t=e.result)&&void 0!==t&&t.data&&(h(pe("",null==e||null===(n=e.result)||void 0===n?void 0:n.data)),k(null==e||null===(a=e.result)||void 0===a?void 0:a.data),P(null==e||null===(r=e.result)||void 0===r?void 0:r.filters));ee(!1),R(!1)}));case 2:e.n=4;break;case 3:e.p=3,n=e.v,console.log(n),ee(!1),R(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=new AbortController;return de(null==e?void 0:e.signal),function(){null==e||e.abort()}}),[Q]);var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.includes(t)};function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=new RegExp(e.toLowerCase().trim(),"g"),c=t||_;return c.filter((function(e){return!(Object(r.isNull)(e.name.toLowerCase().match(a))||!(Object(r.isEmpty)(n)||"All"===n||e.hasOwnProperty("group")&&e.group.includes(n))||!(Object(r.isEmpty)(d)||e.hasOwnProperty("subgroup")&&fe(e.subgroup,d)))}))}Object(a.useEffect)((function(){I||h(pe(me))}),[me,n,d]);var Oe=function(){var e=Y(K().m((function e(t,n){var a,r=arguments;return K().w((function(e){for(;;)switch(e.n){case 0:if(a=r.length>2&&void 0!==r[2]&&r[2],b.Zb||!a){e.n=1;break}return w(!0),e.a(2);case 1:V({show:!0,slug:t});case 2:return e.a(2)}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var t=Y(K().m((function t(n){var a,r;return K().w((function(t){for(;;)switch(t.p=t.n){case 0:return F({loading:!0,id:"",message:Object(i.__)("Creating…","wp-marketing-automations")}),ue(Object(i.__)("Creating…","wp-marketing-automations")),V(X(X({},J),{},{loading:!0})),t.p=1,t.n=2,x()({path:Object(b.B)("/automations/create/"),method:"POST",data:{title:n,version:2}});case 2:(a=t.v)&&a.result&&a.result.automation_id&&(F({success:a.message,message:a.message}),bwfcrm_contacts_data.first_automation_id=a.result.automation_id,ue(a.message),ne("listData",n),V({}),setTimeout((function(){return Object(Z.l)({path:"/automation/"+a.result.automation_id},"/",e)}),500)),t.n=4;break;case 3:t.p=3,r=t.v,F({error:r.message});case 4:Object(b.Nb)(ue,3e3);case 5:return t.a(2)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}(),je=function(){var t=Y(K().m((function t(n,a){var r;return K().w((function(t){for(;;)switch(t.p=t.n){case 0:if(""!=n){t.n=1;break}return we(a),t.a(2);case 1:return F({loading:!0,id:n,message:Object(i.__)("Importing…","wp-marketing-automations")}),ue(Object(i.__)("Importing…","wp-marketing-automations")),V(X(X({},J),{},{loading:!0})),t.p=2,t.n=3,x()({path:Object(b.B)("/automation/recipe/import?recipe_slug=".concat(n,"&title=").concat(a))}).then((function(t){200===t.code&&t.result.hasOwnProperty("automation_id")?(F({success:t.message,message:t.message}),bwfcrm_contacts_data.first_automation_id=t.result.automation_id,ue(t.message),setTimeout((function(){return Object(Z.l)({path:"/automation/"+t.result.automation_id},"/",e)}),500),Object(b.Nb)(ue,3e3)):(F({error:t.message}),ue(t.hasOwnProperty("message")?Object(i.__)("Unable to import Recipe.","wp-marketing-automations")+" "+t.message:Object(i.__)("Unable to import Recipe","wp-marketing-automations")),Object(b.Nb)(ue,3e3))})).catch((function(e){F({error:e.message}),ue(e.hasOwnProperty("message")?Object(i.__)("Unable to import Recipe.","wp-marketing-automations")+" "+e.message:Object(i.__)("Unable to import Recipe","wp-marketing-automations")),Object(b.Nb)(ue,3e3)})).finally((function(){V({})}));case 3:t.n=5;break;case 4:t.p=4,r=t.v,console.log(r),ue(r.hasOwnProperty("message")?r.message:Object(i.__)("Unable to import Recipe","wp-marketing-automations")),Object(b.Nb)(ue,3e3);case 5:return t.a(2)}}),t,null,[[2,4]])})));return function(e,n){return t.apply(this,arguments)}}();return Object(a.createElement)(u.e,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>.components-modal__screen-overlay{ animation : none ! important }</style>"}}),Object(a.createElement)(l.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-recipe-wrapper-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(a.createElement)("div",{className:"bwf-recipe-modal-header"},Object(a.createElement)("div",{className:"bwf-recipe-modal-title"},Object(i.__)("Add Automation","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-recipe-search-field "+(v?"is-focus":"")},Object(a.createElement)("span",{className:"bwf-search-bar-icon"},Object(a.createElement)(m.a,{icon:"search",size:15})),Object(a.createElement)(l.TextControl,{value:me,type:"text",placeholder:Object(i.__)("Search Automation","wp-marketing-automations"),autoComplete:"off",onChange:be,disabled:I,onFocus:function(){y(!0)},onBlur:function(){y(!1)}})),Object(a.createElement)("div",{className:"bwf-recipe-sync"},I?Object(a.createElement)("div",{className:" bwf-recipe-sync bwf-placeholder-temp bwf-h-36 bwf-w-90"}):Object(a.createElement)(s.a,{variant:"secondary",onClick:function(){ee(!0)},isBusy:Q,disabled:I},Object(i.__)("Sync Library","wp-marketing-automations")),Object(a.createElement)("div",{onClick:function(){f?window.location.href="admin.php?page=".concat(f,"&path=/automation&status=true"):(delete e.group,delete e.subgroup,Object(Z.l)({path:"/automations"},"/",e))},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(a.createElement)(m.a,{icon:"close"})))),Object(a.createElement)("div",{className:"bwf-recipe-wrapper"},I?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-recipe-sidebar"},Object(a.createElement)("ul",null,H(Array(6)).map((function(e,t){return Object(a.createElement)("li",{className:"bwf-recipe-filter-item bwf-active-filter placeholder-temp",key:t})})))),Object(a.createElement)("div",{className:"bwf-recipe-item-wrapper"},Object(a.createElement)("div",{className:"bwf-recipe-items"},Object(a.createElement)("div",{className:"bwf-recipe-item scratch-recipe",style:{border:"2px dashed #DEDFEA"},key:"scratch"},Object(a.createElement)(m.a,{icon:"plus",width:"30",height:"30",color:"#DEDFEA"}),Object(a.createElement)("h2",null,Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"})),Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-mt-5"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(a.createElement)("div",{className:"bwf_clear_5"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}))),H(Array(19)).map((function(e,t){return Object(a.createElement)("div",{className:"bwf-recipe-item",key:t},Object(a.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(a.createElement)("div",{className:"bwf-recipe-title"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))),Object(a.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-120"})),Object(a.createElement)("div",{className:"bwf-recipe-tags"},Object(a.createElement)("span",{className:"bwf-recipe-tag placeholder-temp"},Object(a.createElement)("div",{className:"bwf-h-15 bwf-w-20"}))))}))))):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-recipe-sidebar"},Object(a.createElement)("ul",null,ce.map((function(t,r){return Object(a.createElement)("li",{className:o()("bwf-recipe-filter-item",{"bwf-active-filter":n===t}),onClick:function(){n!==t&&function(t){delete e.subgroup,Object(Z.l)(X({path:"/automations/create"},ce.includes(t)&&{group:t}),"/",e)}(t)},key:r},t)})))),Object(a.createElement)("div",{className:"bwf-recipe-item-wrapper"},ie.hasOwnProperty(n)&&!Object(r.isEmpty)(ie[n])&&Object(a.createElement)("div",{className:"bwf-recipe-group-wrap"},ie[n].map((function(e,t){return Object(a.createElement)(s.a,{isSecondary:d===e,isTertiary:d!==e,onClick:function(){le(e===d?"":e)},className:"bwf-btn-small "+(d===e?"is-border is-blue-bg":""),key:t},e)}))),Object(a.createElement)("div",{className:o()("bwf-recipe-items")},Object(a.createElement)("div",{className:"bwf-recipe-item scratch-recipe",onClick:function(){Oe("","",!1)},key:"scratch"},Object(a.createElement)(m.a,{icon:"plus",width:"30",height:"30",color:"#000"}),Object(a.createElement)("h2",null,Object(i.__)("Start from Scratch","wp-marketing-automations"))),g.map((function(e,t){return Object(a.createElement)("div",{className:"bwf-recipe-item",onClick:function(){return B(e)},key:t},Object(a.createElement)("div",{className:"bwf-recipe-title-wrap"},Object(a.createElement)("div",{className:"bwf-recipe-title"},e.name),!b.Zb&&e.hasPRO&&Object(a.createElement)("div",{className:"bwf-recipe-paid"},b.e)),Object(a.createElement)("div",{className:"bwf-recipe-description bwfan_m0"},e.description),Object(a.createElement)("div",{className:"bwf-recipe-tags"},!Object(r.isEmpty)(e.tag)&&Object.values(e.tag).map((function(e,t){return Object(a.createElement)("span",{className:o()("bwf-recipe-tag"),key:t},e)}))))}))))),Object(a.createElement)(M,{onRequestClose:function(){B({})},recipeData:z,isImporting:T,setIsImporting:F,importRecipe:Oe}),!b.Zb&&Object(a.createElement)($.a,{isOpen:O,onRequestClose:function(){return w(!1)},modalContent:re({templateName:z.name,proStatus:!b.ac}),className:""}),(null==J?void 0:J.show)&&Object(a.createElement)(L,{onCloseModal:function(){return V()},recipeSlug:null==J?void 0:J.slug,onTitleAdded:je,isLoading:null==J?void 0:J.loading}))))}}}]);