(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{1485:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1142),c=n(68),o=n(3),i=n(1),u=n(342),s=n(54),l=n(5),m=n(8),b=n(26),d=n(2),f=n(208),p=n(12),O=n(9),j=n.n(O),g=n(11);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function c(n,a,r,c){var u=a&&a.prototype instanceof i?a:i,s=Object.create(u.prototype);return _(s,"_invoke",function(n,a,r){var c,i,u,s=0,l=r||[],m=!1,b={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return c=t,i=0,u=e,b.n=n,o}};function d(n,a){for(i=n,u=a,t=0;!m&&s&&!r&&t<l.length;t++){var r,c=l[t],d=b.p,f=c[2];n>3?(r=f===a)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=d&&((r=n<2&&d<c[1])?(i=0,b.v=a,b.n=c[1]):d<f&&(r=n<3||c[0]>a||a>f)&&(c[4]=n,c[5]=a,b.n=f,i=0))}if(r||n>1)return o;throw m=!0,a}return function(r,l,f){if(s>1)throw TypeError("Generator is already running");for(m&&1===l&&d(l,f),i=l,u=f;(t=i<2?e:u)||!m;){c||(i?i<3?(i>1&&(b.n=-1),d(i,u)):b.n=u:b.v=u);try{if(s=2,c){if(i||(r="next"),t=c[r]){if(!(t=t.call(c,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),i=1);c=e}else if((t=(m=b.n<0)?u:n.call(a,b))!==o)break}catch(t){c=e,i=1,u=t}finally{s=1}}return{value:t,done:m}}}(n,r,c),!0),s}var o={};function i(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][a]?t(t([][a]())):(_(t={},a,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(l);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,_(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=s,_(m,"constructor",s),_(s,"constructor",u),u.displayName="GeneratorFunction",_(s,r,"GeneratorFunction"),_(m),_(m,r,"Generator"),_(m,a,(function(){return this})),_(m,"toString",(function(){return"[object Generator]"})),(w=function(){return{w:c,m:b}})()}function _(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(_=function(e,t,n,a){function c(t,n){_(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,a)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=y(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t,n,a,r,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(a,r)}var C=function(e){var t=Object(p.i)(),n=e.filter,r=e.config,c=e.audienceDetail,u=e.modalData,s=e.setModal,l=e.setOpen,b=e.reloadList,f=e.title,O=void 0===f?"":f,y=e.desc,_=e.setError,v=e.setOpenProModal,k=Object(a.useContext)(o.h),C=function(){var e,a=(e=w().m((function e(){var a,m,f;return w().w((function(e){for(;;)switch(e.p=e.n){case 0:if(Object(o.cc)()){e.n=1;break}return v(!0),e.a(2);case 1:if(_(!1),""!==O){e.n=2;break}return _(Object(i.__)("Name is required","wp-marketing-automations")),e.a(2);case 2:if(a=Object(p.j)(n,t,r.filters),!Object(d.isEmpty)(a)){e.n=3;break}_(Object(i.__)("Please fill the filter","wp-marketing-automations")),e.n=7;break;case 3:return s({loading:!0}),m=c?Object(o.B)("/audience/".concat(c.ID)):Object(o.B)("/audience"),e.p=4,e.n=5,j()({path:m,method:"POST",data:{name:O,data:{desc:y||"",filters:a}}}).then((function(e){if(200!==e.code)throw Error(Object(o.v)(null==e?void 0:e.message));Object(o.X)()||(bwfcrm_contacts_data.first_audience_id=1),k(e.message),Object(o.Nb)(k,3e3),b(),s({loading:!1,success:!1,error:!1,message:""}),l(!1)})).catch((function(e){throw Error(Object(o.v)(null==e?void 0:e.message))}));case 5:e.n=7;break;case 6:e.p=6,f=e.v,_(f.message),s(h(h({},u),{},{loading:!1}));case 7:return e.a(2)}}),e,null,[[4,6]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var c=e.apply(t,n);function o(e){E(c,a,r,o,i,"next",e)}function i(e){E(c,a,r,o,i,"throw",e)}o(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(a.createElement)(g.a,{isPrimary:!0,onClick:function(){return C()},disabled:u.loading,isBusy:u.loading},Object(a.createElement)("span",{className:"bwf-display-flex"},!Object(o.cc)()&&Object(a.createElement)(m.a,{icon:"king",size:16,color:"#fff"}),c?Object(i.__)("Save","wp-marketing-automations"):Object(i.__)("Add","wp-marketing-automations")))},S=n(1119),P=n(1203),N=n(1204),A=n(354),x=n(40);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,c,o,i=[],u=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=c.call(n)).done)&&(i.push(a.value),i.length!==t);u=!0);}catch(e){s=!0,r=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}t.default=function(){Object(o.m)(Object(i.__)("Audiences","wp-marketing-automations"));var e=Object(S.a)(!1,!0),t=Object(p.i)(),n=D(Object(a.useState)(!1),2),O=n[0],j=n[1],g=D(Object(a.useState)({loading:!1,status:!1}),2),y=g[0],w=g[1],_=D(Object(a.useState)({loading:!1,error:!1,success:!1,message:""}),2),v=_[0],h=_[1],k=D(Object(a.useState)(!1),2),E=k[0],T=k[1],M=Object(P.a)().fetch,L=Object(N.a)(),B=L.getOffset,F=(0,L.getPerPageCount)(),G=B(),U=t.s,q=function(){Object(o.cc)()&&(M(F,G,U||""),T(!1))},I=D(Object(a.useState)(!1),2),R=I[0],z=I[1],J=D(Object(a.useState)(""),2),X=J[0],$=J[1],H=D(Object(a.useState)(!1),2),K=H[0],Q=H[1],V=D(Object(a.useState)(""),2),W=V[0],Y=V[1],Z=D(Object(a.useState)(!1),2),ee=Z[0],te=Z[1],ne=[{type:"heading",data:{title:Object(i.__)("Create Audiences & Send Personalised Messaging","wp-marketing-automations"),desc:Object(i.__)("Get started Segment your contacts based on various filters and send them targeted campaigns","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(o.t)()+"audience/audience1.png",title:Object(i.__)("Create dynamic audiences","wp-marketing-automations"),desc:Object(i.__)("Pick from over 60+ conditions to create audiences that auto-update based on activity","wp-marketing-automations")},{img:Object(o.t)()+"audience/audience2.png",title:Object(i.__)("Send targeted campaigns","wp-marketing-automations"),desc:Object(i.__)("Use dynamic audiences and reach them with targeted campaigns","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(i.__)("Create Audiences","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(o.cc)()?(Q(!0),$(""),z(!1),Y("")):j(!0)}}]}},{type:"link-wth-text",data:{text:Object(i.__)("Curious about audiences?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/audiences/",linkText:Object(i.__)("Learn More","wp-marketing-automations")}}],ae=Object(a.createElement)(l.Button,{isPrimary:!0,key:"add",className:"bwf-display-flex",onClick:function(){Object(o.cc)()?(Q(!0),$(""),z(!1),Y("")):j(!0)}},!Object(o.cc)()&&Object(a.createElement)(m.a,{icon:"king",size:"16",color:"#fff"}),Object(i.__)("Create Audience","wp-marketing-automations"));Object(A.a)("manage_audiences","",Object(i.__)("ALL AUDIENCE","wp-marketing-automations"),ae);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(c.a,null),0!==o.p?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(r.b,{setModelData:w,setDescription:Y,setTitle:$,setAudienceData:z,setOpen:Q,setPreview:j,contactCountLoad:E,setContactCountLoad:T,menuButtons:ae,pitchData:ne}),Object(a.createElement)(s.a,{deleteEntityName:y.deleteEntityName,confirmButtonText:y.buttonConfirm,cancelButtonText:y.buttonCancel,onConfirm:y.onConfirm,isLoading:y.loading,successMessage:y.success,errorMessage:y.error,onRequestClose:function(){return w({status:!1})},isOpen:y.status,modalTitle:Object(i.__)("Delete Audience","wp-marketing-automations"),isDelete:!0})):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-content-header-new"},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title"},Object(i.__)("Audiences","wp-marketing-automations")),!Object(o.cc)()&&o.e)),Object(a.createElement)(u.a,{data:ne})),!Object(o.cc)()&&Object(a.createElement)(x.b,{isOpen:O,onRequestClose:function(){return j(!1)},modalContent:{isFeature:!0,featureTitle:Object(i.__)("Audiences","wp-marketing-automations"),proLink:Object(o.gb)("upgrade",{utm_medium:"Audiences+Upgrade+Modal"}),image:Object(o.tb)("audience.png"),benefit:Object(i.__)("Unlock Audiences and other awesome features.","wp-marketing-automations")}}),K&&Object(a.createElement)(l.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-audience-modal-update"},Object(a.createElement)("div",{className:"bwf-modal-header bwf-display-flex bwf-space-between"},Object(a.createElement)("div",{className:"bwf-modal-heading"},R?Object(i.__)("Edit Audience","wp-marketing-automations"):Object(i.__)("Add Audience","wp-marketing-automations")),Object(a.createElement)("span",{onClick:function(){return Q(!1)},className:"bwf-modal-close bwf-cursor-pointer"},Object(a.createElement)(m.a,{icon:"close",color:"#353030"}))),Object(a.createElement)("div",{className:"bwf-audience-modal-content"},Object(a.createElement)("div",{className:"bwf-audience-content-wrap"},Object(a.createElement)("div",{className:"bwf_clear_30"}),ee&&Object(a.createElement)(b.a,{status:"error",onRemove:function(){return te(!1)}},ee),Object(a.createElement)(l.TextControl,{type:"text",value:X,autoFocus:!0,placeholder:Object(i.__)("Enter Name","wp-marketing-automations"),label:Object(i.__)("Name","wp-marketing-automations"),onChange:function(e){$(e),Object(d.isEmpty)(e)?te(Object(i.__)("Name is required","wp-marketing-automations")):te(!1)},disabled:v&&v.loading}),Object(a.createElement)(l.TextareaControl,{placeholder:Object(i.__)("Enter description","wp-marketing-automations"),label:Object(i.__)("Description","wp-marketing-automations"),value:W,onChange:function(e){return Y(e)},disabled:v&&v.loading}),Object(a.createElement)("div",{className:"bwf-normal-text bwf-n-b"},Object(i.__)("Filters","wp-marketing-automations")),Object(a.createElement)(f.a,{siteLocale:"en-US",currency:Object(o.sc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(i.__)("Select Rules","wp-marketing-automations"),filters:e,enableGrouping:!0,hideAdvanceControl:!0,footerComponent:function(e){return Object(a.createElement)("div",{style:{marginBottom:"-24px"},className:"bwf-display-flex"},Object(a.createElement)(l.Button,{className:"bwf-cancel-btn",onClick:function(){return Q(!1)}},Object(i.__)("Cancel","wp-marketing-automations")),Object(a.createElement)(C,{filter:e.data,config:e.config,audienceDetail:R,setModal:h,modalData:v,setOpen:Q,title:X,desc:W,error:ee,setError:te,reloadList:q,setOpenProModal:j}))}},disabled:v&&v.loading,path:"/manage/audience",query:R?R.data.filters:{}})))))}}}]);