(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1099:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);var a=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}},1100:function(e,t,n){"use strict";var r=n(0),a=n(6),c=n.n(a),o=n(1),i=n(8),l=(n(1106),n(40)),s=n(3);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=u(Object(r.useState)(!1),2),n=t[0],a=t[1],m=e.modalContent,b=void 0===m?{}:m,f=e.content,p=e.onPage,d=void 0!==p&&p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:c()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||a(!0)}},d?Object(r.createElement)(l.a,{showHeader:!1,modalContent:b}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-king-tag-pro"},Object(r.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(r.createElement)("span",{className:"bwf-mt-8"},f||(Object(s.Yb)()?Object(o.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(o.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(r.createElement)(l.b,{isOpen:n,onRequestClose:function(){return a(!1)},modalContent:b}))}},1106:function(e,t,n){},1113:function(e,t,n){"use strict";var r=n(50),a=n(3),c=n(2);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=["fetch","setStateProp"],l=["s","page","filter","path"],s=["s","page","filter","path"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.a=function(){var e=Object(r.a)("contacts"),t=e.fetch,n=e.setStateProp;return m(m({},f(e,i)),{},{setStateProp:n,fetch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],O=arguments.length>10&&void 0!==arguments[10]&&arguments[10],j=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[];n("isLoading",!0);var w=e.s,y=void 0===w?"":w,v=(e.page,e.filter,e.path,f(e,l)),g={offset:r,limit:o,search:y,filters:v,get_wc:Object(a.sc)(),grab_totals:i,only_count:s,fetch_base:u,grab_custom_fields:!1,include_unsubs:!m,exclude_unsubs_lists:b,includeUnverified:d,includeSoftBounce:O,include_ids:j},h=Object(a.Cb)("table_sort_data"),_=h.hasOwnProperty("contact_sort_data")?h.contact_sort_data:{},E=Object(c.isObject)(_)&&!Object(c.isEmpty)(_)?_:{},k=E.orderby,S=void 0===k?"last_modified":k,N=E.order,C=void 0===N?"desc":N;C&&S&&(g.order=C,g.order_by=S),p&&(g.unopen_broadcast=parseInt(p)),t("GET",Object(a.B)("/contacts"),g)},fetchListing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],b=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8];n("isLoading",!0);var d=e.s,O=void 0===d?"":d,j=(e.page,e.filter,e.path,f(e,s)),w={offset:r,limit:o,search:O,filters:j,get_wc:Object(a.sc)(),grab_totals:i,only_count:l,fetch_base:u,grab_custom_fields:!1,exclude_unsubs:m,exclude_unsubs_lists:b},y=Object(a.Cb)("table_sort_data"),v=y.hasOwnProperty("contact_sort_data")?y.contact_sort_data:{},g=Object(c.isObject)(v)&&!Object(c.isEmpty)(v)?v:{},h=g.orderby,_=void 0===h?"last_modified":h,E=g.order,k=void 0===E?"desc":E;k&&_&&(w.order=k,w.order_by=_),p&&(w.unopen_broadcast=parseInt(p)),t("GET",Object(a.B)("/v3/contacts/listing"),w)},startIndexing:function(){return t("GET",Object(a.B)("/contacts"),{start_indexing:!0})}})}},1120:function(e,t,n){"use strict";var r=n(0),a=n(28),c=n(1),o=n(204);t.a=function(e){var t=e.selected,n=e.onTagsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add Tags","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.b,multiple:!1,allowFreeTextSearch:!0,inlineTags:!1,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e,r){var a=t.filter((function(t){return!(t.key==e&&t.label==r)}));n(a)},placeholder:Object(c.__)("Search by tag name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1129:function(e,t,n){"use strict";var r=n(51);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["getStateProp"];function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("contacts"),t=e.getStateProp;return i(i({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c)),{},{getContacts:function(){return t("contacts_list")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getTotalCount:function(){return parseInt(t("total"))},getCountData:function(){return t("countData")}})}},1130:function(e,t,n){"use strict";var r=n(0),a=n(28),c=n(1),o=n(204);t.a=function(e){var t=e.selected,n=e.onListsChange;return Object(r.createElement)("div",{className:"bwf-c-field-mapper-terms"},Object(r.createElement)("div",{className:"bwf-input-label"},Object(c.__)("Add to Lists","wp-marketing-automations")),Object(r.createElement)(a.a,{autocompleter:o.a,multiple:!1,allowFreeTextSearch:!0,selected:t,onChange:function(e){n(e)},onRemoveTag:function(e){var r=t.filter((function(t){return t.key!=e}));n(r)},placeholder:Object(c.__)("Search by list name","wp-marketing-automations"),showClearButton:!0,disabled:!1}))}},1167:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(124),a={"am-AM":/^(\+?374|0)(33|4[134]|55|77|88|9[13-689])\d{6}$/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)([569]\d{7}|41\d{6})$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-OM":/^((\+|00)968)?([79][1-9])\d{6}$/,"ar-PS":/^(\+?970|0)5[6|9](\d{7})$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SD":/^((\+?249)|0)?(9[012369]|1[012])\d{7}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(10|5[015]|7[07]|99)\d{7}$/,"ar-QA":/^(\+?974|0)?([3567]\d{7})$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^((\+49|0)1)(5[0-25-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7,9}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)([1-9])\d{1,9}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"dv-MV":/^(\+?960)?(7[2-9]|9[1-9])\d{5}$/,"el-GR":/^(\+?30|0)?6(8[5-9]|9(?![26])[0-9])\d{7}$/,"el-CY":/^(\+?357?)?(9(9|7|6|5|4)\d{6})$/,"en-AI":/^(\+?1|0)264(?:2(35|92)|4(?:6[1-2]|76|97)|5(?:3[6-9]|8[1-4])|7(?:2(4|9)|72))\d{4}$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-AG":/^(?:\+1|1)268(?:464|7(?:1[3-9]|[28]\d|3[0246]|64|7[0-689]))\d{4}$/,"en-BM":/^(\+?1)?441(((3|7)\d{6}$)|(5[0-3][0-9]\d{4}$)|(59\d{5}$))/,"en-BS":/^(\+?1[-\s]?|0)?\(?242\)?[-\s]?\d{3}[-\s]?\d{4}$/,"en-GB":/^(\+?44|0)7[1-9]\d{8}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|53|28|55|59)\d{7}$/,"en-GY":/^(\+592|0)6\d{6}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-JM":/^(\+?876)?\d{7}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"fr-CF":/^(\+?236| ?)(70|75|77|72|21|22)\d{6}$/,"en-SS":/^(\+?211|0)(9[1257])\d{7}$/,"en-KI":/^((\+686|686)?)?( )?((6|7)(2|3|8)[0-9]{6})$/,"en-KN":/^(?:\+1|1)869(?:46\d|48[89]|55[6-8]|66\d|76[02-7])\d{4}$/,"en-LS":/^(\+?266)(22|28|57|58|59|27|52)\d{6}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-MW":/^(\+?265|0)(((77|88|31|99|98|21)\d{7})|(((111)|1)\d{6})|(32000\d{4}))$/,"en-NA":/^(\+?264|0)(6|8)\d{7}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PG":/^(\+?675|0)?(7\d|8[18])\d{6}$/,"en-PK":/^((00|\+)?92|0)3[0-6]\d{8}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[3689]\d{7}$/,"en-SL":/^(\+?232|0)\d{8}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?0[79][567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"en-BW":/^(\+?267)?(7[1-8]{1})\d{6}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?3(0(0|1|2|4|5)|1\d|2[0-4]|5(0|1))\d{7}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-CU":/^(\+53|0053)?5\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8|3|2]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-GT":/^(\+?502)?[2|6|7]\d{7}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-NI":/^(\+?505)\d{7,8}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-SV":/^(\+?503)?[67]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"es-VE":/^(\+?58)?(2|4)\d{9}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4[0-6]|50)\s?(\d\s?){4,8}$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-BF":/^(\+226|0)[67]\d{7}$/,"fr-BJ":/^(\+229)\d{8}$/,"fr-CD":/^(\+?243|0)?(8|9)\d{8}$/,"fr-CM":/^(\+?237)6[0-9]{8}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-PF":/^(\+?689)?8[789]\d{6}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"fr-WF":/^(\+681)?\d{6}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36|06)(20|30|31|50|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"ir-IR":/^(\+98|0)?9\d{9}$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(79\d{7}|5\d{8})$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"ky-KG":/^(\+996\s?)?(22[0-9]|50[0-9]|55[0-9]|70[0-9]|75[0-9]|77[0-9]|880|990|995|996|997|998)\s?\d{3}\s?\d{3}$/,"lt-LT":/^(\+370|8)\d{8}$/,"lv-LV":/^(\+?371)2\d{7}$/,"mg-MG":/^((\+?261|0)(2|3)\d)?\d{7}$/,"mn-MN":/^(\+|00|011)?976(77|81|88|91|94|95|96|99)\d{6}$/,"my-MM":/^(\+?959|09|9)(2[5-7]|3[1-2]|4[0-5]|6[6-9]|7[5-9]|9[6-9])[0-9]{7}$/,"ms-MY":/^(\+?60|0)1(([0145](-|\s)?\d{7,8})|([236-9](-|\s)?\d{7}))$/,"mz-MZ":/^(\+?258)?8[234567]\d{7}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nl-AW":/^(\+)?297(56|59|64|73|74|99)\d{5}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?([5-8]\d|45) ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[1-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"pt-AO":/^(\+?244)?9\d{8}$/,"ro-MD":/^(\+?373|0)((6(0|1|2|6|7|8|9))|(7(6|7|8|9)))\d{6}$/,"ro-RO":/^(\+?40|0)\s?7\d{2}(\/|\s|\.|-)?\d{3}(\s|\.|-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"si-LK":/^(?:0|94|\+94)?(7(0|1|2|4|5|6|7|8)( |-)?)\d{7}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"so-SO":/^(\+?252|0)((6[0-9])\d{7}|(7[1-9])\d{7})$/,"sq-AL":/^(\+355|0)6[2-9]\d{7}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"tg-TJ":/^(\+?992)?[5][5]\d{7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"tk-TM":/^(\+993|993|8)\d{8}$/,"uk-UA":/^(\+?38)?0(50|6[36-8]|7[357]|9[1-9])\d{7}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^((\+?84)|0)((3([2-9]))|(5([25689]))|(7([0|6-9]))|(8([1-9]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?(1[3-9]|9[28])\d{9}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/,"dz-BT":/^(\+?975|0)?(17|16|77|02)\d{6}$/,"ar-YE":/^(((\+|00)9677|0?7)[0137]\d{7}|((\+|00)967|0)[1-7]\d{6})$/,"ar-EH":/^(\+?212|0)[\s\-]?(5288|5289)[\s\-]?\d{5}$/,"fa-AF":/^(\+93|0)?(2{1}[0-8]{1}|[3-5]{1}[0-4]{1})(\d{7})$/,"mk-MK":/^(\+?389|0)?((?:2[2-9]\d{6}|(?:3[1-4]|4[2-8])\d{6}|500\d{5}|5[2-9]\d{6}|7[0-9][2-9]\d{5}|8[1-9]\d{6}|800\d{5}|8009\d{4}))$/};function c(e,t,n){if(Object(r.a)(e),n&&n.strictMode&&!e.startsWith("+"))return!1;if(Array.isArray(t))return t.some((function(t){if(a.hasOwnProperty(t)&&a[t].test(e))return!0;return!1}));if(t in a)return a[t].test(e);if(!t||"any"===t){for(var c in a){if(a.hasOwnProperty(c))if(a[c].test(e))return!0}return!1}throw new Error("Invalid locale '".concat(t,"'"))}a["en-CA"]=a["en-US"],a["fr-CA"]=a["en-CA"],a["fr-BE"]=a["nl-BE"],a["zh-HK"]=a["en-HK"],a["zh-MO"]=a["en-MO"],a["ga-IE"]=a["en-IE"],a["fr-CH"]=a["de-CH"],a["it-CH"]=a["fr-CH"];Object.keys(a)},1168:function(e,t,n){},1201:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),a=n(5),c=n(1),o=n(2),i=n(1120),l=n(1130),s=n(19),u=n(68),m=n(8),b=n(26),f=n(3);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=e.headersData,n=e.onRequestImport,p=e.submitButtonText,d=e.secondaryButtonText,y=e.onSecondaryButtonClick,v=e.savedData,g=e.buttonAlignClass,h=e.backButtonText,_=e.backButtonClick,E=e.extra,k=e.isSubmitButtonBusy,S=e.sourceHeaderText,N=void 0===S?Object(c.__)("Columns To Import","wp-marketing-automations"):S,C=e.contactHeaderText,P=void 0===C?Object(c.__)("Map Into Field","wp-marketing-automations"):C,x=e.updateExistingText,I=void 0===x?Object(c.__)("Update Existing Contacts","wp-marketing-automations"):x,T=e.secondaryClass,A=void 0===T?"":T,F=t.headers,D=t.fields,$=w(Object(r.useState)(v&&v.mapped_fields?function(e,t){if(!e)return{};var n={},r=function(r){t.find((function(e){return e.index.toString()===r}))&&(n[r]=e[r])};for(var a in e)r(a);return n}(v.mapped_fields,F):{}),2),G=$[0],B=$[1],M=w(Object(r.useState)(0),2),L=M[0],z=M[1],U=v&&v.tags?v.tags.map((function(e){return{key:e.id,label:e.value}})):[],R=v&&v.lists?v.lists.map((function(e){return{key:e.id,label:e.value}})):[],q=w(Object(r.useState)(U),2),V=q[0],W=q[1],H=w(Object(r.useState)(R),2),K=H[0],Y=H[1],Q=w(Object(r.useState)(!(!v||!("update_existing"in v))&&v.update_existing),2),Z=Q[0],J=Q[1],X=w(Object(r.useState)(!v||!("update_blank"in v)||v.update_blank),2),ee=X[0],te=X[1],ne=w(Object(r.useState)(!v||!("marketing_status"in v)||v.marketing_status),2),re=ne[0],ae=(ne[1],w(Object(r.useState)(!(!v||!("trigger_events"in v))&&v.trigger_events),2)),ce=ae[0],oe=ae[1],ie=w(Object(r.useState)(null),2),le=ie[0],se=ie[1],ue=(E||{}).disableMarketingStatusCheck,me=void 0!==ue&&ue,be=function(){return se(null),0===Object(o.size)(G)?(setTimeout((function(){return se(Object(c.__)("Select the contact fields.","wp-marketing-automations"))}),500),!1):!!Object.values(G).includes("email")||(setTimeout((function(){return se(Object(c.__)("Map contact email with a form field.","wp-marketing-automations"))}),500),!1)},fe=function(){if(be()){var e={};F.map((function(t){t.index in G&&(e[t.index]=G[t.index])}));var t={map:e,tags:V.map((function(e){return{id:e.key,value:e.label}})),lists:K.map((function(e){return{id:e.key,value:e.label}})),update_existing:Z,trigger_events:ce,imported_contact_status:L,dont_update_blank:ee};!me&&(t.marketing_status=re),n(t)}},pe=function(){if(be()){var e={};F.map((function(t){t.index in G&&(e[t.index]=G[t.index])}));var t={map:e,tags:V.map((function(e){return{id:e.key,value:e.label}})),lists:K.map((function(e){return{id:e.key,value:e.label}})),update_existing:Z,trigger_events:ce};!me&&(t.marketing_status=re),y(t)}},de=Object(f.N)();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-import-mapper-fields bwf-card-wrap bwf-form-fields bwf-crm-importer-csv-wrap"},Object(r.createElement)("div",{className:"bwf-card-header"},Object(r.createElement)("span",{className:"bwf-form-title"},Object(c.__)("Mapping","wp-marketing-automations"))),le&&Object(r.createElement)("div",{className:"bwf-mr-16 bwf-ml-16"},Object(r.createElement)(u.a,null),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(b.a,{status:"error",onRemove:function(){return se(null)}},le)),!Object(o.isArray)(D)||!D.length>0||!Object(o.isArray)(F)||!F.length>0?!Object(o.isArray)(D)||!D.length>0?Object(r.createElement)(b.a,{status:"error",className:"bwf-mlr-24 bwf-mt-24-i"},Object(c.__)("No contact fields found","wp-marketing-automations")):!Object(o.isArray)(F)||!F.length>0?Object(r.createElement)(b.a,{status:"error",className:"bwf-mlr-24 bwf-mt-24-i"},Object(c.__)("No mapping fields found","wp-marketing-automations")):void 0:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-c-import-field",key:"mapper-sel-wrap"},Object(r.createElement)("strong",null,N),Object(r.createElement)("span",null),Object(r.createElement)("strong",null,P)),F.map((function(e,t){return Object(r.createElement)("div",{key:t,className:"bwf-c-import-field"},Object(r.createElement)(a.TextControl,{disabled:!0,value:e.header}),Object(r.createElement)("span",{className:"bwf-display-flex"},Object(r.createElement)(m.a,{icon:"mapper"})),Object(r.createElement)("select",{value:e.index in G?G[e.index]:"",onChange:function(t){return function(e,t){var n=t.target.value,r="index"in e?e.index:"";""===n&&r in G?B(Object(o.omit)(G,r)):""!==n&&""!==r&&B(O(O({},G),{},j({},r,n)))}(e,t)},key:"bwf-select-field"},Object(r.createElement)("option",{value:"",key:"default-key"+t},Object(c.__)("Do Not Import This Field","wp-marketing-automations")),D.map((function(e,n){return"fields"in e&&e.fields.length>0&&Object(r.createElement)("optgroup",{key:e.id+"-"+n+"-"+t,label:e.name},e.fields.map((function(e){return Object(r.createElement)("option",{key:e.id,value:e.id},e.name)})))}))))}))),Object(r.createElement)("div",{className:"bwf-crm-import-section",style:{border:0}},Object(r.createElement)("div",{className:"bwf-h4"},Object(c.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-c-import-field",key:"select-tag-list"},Object(r.createElement)(i.a,{onTagsChange:W,selected:V}),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(l.a,{onListsChange:Y,selected:K})),!me&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(c.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-csv-status-select",onChange:function(e){z(e.target.value)},key:"bwf-select-status",value:L},Object.keys(de).map((function(e){return Object(r.createElement)("option",{key:e,value:e},de[e])}))),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:I,checked:Z,className:"bwf-tooglecontrol-advance",onChange:J})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Don't Update Blank Values","wp-marketing-automations"),checked:ee,className:"bwf-tooglecontrol-advance",onChange:te})),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",null,Object(r.createElement)(a.ToggleControl,{label:Object(c.__)("Trigger Automations (For Tag & List Related Events)","wp-marketing-automations"),checked:ce,className:"bwf-tooglecontrol-advance",onChange:oe})))),Object(r.createElement)("div",{className:"bwf-pt-0"},g?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.a,null,!!h&&Object(r.createElement)(s.b,null,Object(r.createElement)(a.Button,{isSecondary:!0,onClick:_,className:A},h)),Object(r.createElement)(s.b,{className:g},Object(r.createElement)(a.Button,{onClick:fe,isBusy:!!k,disabled:!(!k&&F.length>0),isPrimary:!0},Object(r.createElement)("span",null,p||Object(c.__)("Import","wp-marketing-automations"))),d&&Object(r.createElement)(a.Button,{onClick:pe,className:"bwf-ml-10",isSecondary:!0},d)))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.Button,{onClick:fe,isPrimary:!0,isBusy:!!k,disabled:!!k,className:"bwf-display-flex"},Object(r.createElement)("span",null,p||Object(c.__)("Import","wp-marketing-automations"))),d&&Object(r.createElement)(a.Button,{onClick:pe,className:"bwf-ml-10",isSecondary:!0},d)))))}},1202:function(e,t,n){},1265:function(e,t,n){},1266:function(e,t,n){},1267:function(e,t,n){},1268:function(e,t,n){},1269:function(e,t,n){},1270:function(e,t,n){},1507:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n(17),o=n(6),i=n.n(o),l=n(3),s=n(146),u=n(2),m=n(203),b=n(60),f=n(61),p=n(5),d=n(19),O=n(1129),j=n(1113),w=n(9),y=n.n(w),v=n(364),g=n(8),h=n(159),_=n(26),E=n(11);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=["body"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return I(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(I(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,I(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,I(m,"constructor",s),I(s,"constructor",l),l.displayName="GeneratorFunction",I(s,a,"GeneratorFunction"),I(m),I(m,a,"Generator"),I(m,r,(function(){return this})),I(m,"toString",(function(){return"[object Generator]"})),(x=function(){return{w:c,m:b}})()}function I(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(I=function(e,t,n,r){function c(t,n){I(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function T(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D=function(e){var t=e.contact,n=Object(r.useContext)(l.h),c=A(Object(r.useState)(!1),2),o=c[0],i=c[1],s=A(Object(r.useState)({type:"email",title:"",body:"",id:0,send:!1}),2),m=s[0],b=s[1],f=A(Object(r.useState)({status:!1,message:""}),2),d=f[0],O=f[1],j=[{value:"",label:Object(a.__)("Select Type","wp-marketing-automations")}].concat(Object(l.M)()),w=function(){var r,a=(r=x().m((function r(a){var c,o;return x().w((function(r){for(;;)switch(r.p=r.n){case 0:return(c={title:a.title,body:a.body,type:a.type,private:a.send,modified_by:Object(l.O)()}).created_by=Object(l.O)(),i(!0),r.p=1,r.n=2,y()({path:Object(l.B)("/v3/contacts/".concat(t.id,"/notes/")),method:"POST",data:{notes:c},headers:{"Content-Type":"application/json"}}).then((function(t){if(200!=t.code)throw Error(Object(l.v)(null==t?void 0:t.message));n(t.message),e.setModelStatus({status:!1,contactInfo:{}})})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:r.n=4;break;case 3:r.p=3,o=r.v,O({status:!0,message:o.message}),i(!1);case 4:Object(l.Nb)(n,3e3);case 5:return r.a(2)}}),r,null,[[1,3]])})),function(){var e=this,t=arguments;return new Promise((function(n,a){var c=r.apply(e,t);function o(e){T(c,n,a,o,i,"next",e)}function i(e){T(c,n,a,o,i,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-message-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Add Note","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return e.setModelStatus(!1)},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-fields"},d.status&&Object(r.createElement)(_.a,{status:"error",onRemove:function(){return O(!1)},className:"bwf-send-note-notice"},d.message?d.message:Object(a.__)("Title, type and body are mandatory field. Kindly fill them","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-message-wrap"},Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Contact","wp-marketing-automations")),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-highlight-content"},Object(r.createElement)("b",null,t.f_name+" "+t.l_name)," ( "+t.email+" ) "))),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Type","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-select-full-wrap"},Object(r.createElement)(p.SelectControl,{value:m.type,className:"bwf-w-100p",options:j,onChange:function(e){return b(C(C({},m),{},{type:e}))},disabled:o}))),Object(r.createElement)("div",{className:"bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-w-120 bwf_bold"},Object(a.__)("Title","wp-marketing-automations")),Object(r.createElement)(p.TextControl,{type:"text",value:m.title,placeholder:Object(a.__)("Type here â€¦","wp-marketing-automations"),disabled:o,onChange:function(e){return b(C(C({},m),{},{title:e}))}})),Object(r.createElement)("div",{className:"bwf-message-textarea"},Object(r.createElement)(h.a,{keyid:"bwf-note-editor",content:m.body,setContent:function(e){b((function(t){t.body;return C(C({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,S)),{},{body:e})}))},height:200})),Object(r.createElement)("div",{className:"bwf-message-footer"},0==parseInt(m.id)&&Object(r.createElement)("div",{className:"bwf-note-send"},Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Send Note to Contact","wp-marketing-automations"),checked:Boolean(parseInt(m.send)),onChange:function(e){return b(C(C({},m),{},{send:e?"1":"0"}))},className:"bwf-tooglecontrol-advance"})),Object(r.createElement)("div",{className:"bwf-button-col"},Object(r.createElement)(E.a,{className:"bwf-cancel-btn",onClick:function(){return e.setModelStatus(!1)},disabled:o},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(E.a,{isPrimary:!0,isBusy:o,disabled:o,onClick:function(){Object(u.isEmpty)(m.title)||Object(u.isEmpty)(m.body)||Object(u.isEmpty)(m.type)?O({status:!0,message:""}):(O({status:!1,message:""}),b(C(C({},m),{},{loading:!0})),w(m))}},Object(a.__)("Add Note","wp-marketing-automations")))))))},$=n(48),G=n(149),B=n(12),M=n(350),L=n(148),z=(n(1202),n(1119)),U=n(1142),R=n(208),q=n(1100),V=function(e){var t=e.isOpen,n=void 0!==t&&t,c=e.query,o=Object(z.a)(!0,!0),i=o.loading,s=o.filters;return n&&!Object(l.cc)()?Object(r.createElement)("div",{className:"bwf-filter-placeholder bwf-w-100p "+(Object(l.cc)()?"":"bwf-position-relative bwf-h-200")},!!s&&Object(r.createElement)(R.a,{siteLocale:"en-US",currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(e){return Object(r.createElement)(U.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:{}}),Object(r.createElement)(q.a,{modalContent:{isFeature:!0,featureTitle:Object(a.__)("Contact Filters","wp-marketing-automations"),proLink:Object(l.gb)("upgrade",{utm_medium:"Contacts+Filters"})},content:Object(a.__)("We're sorry, this feature is not available on your plan. Learn more about Contact Filters.","wp-marketing-automations")})):n&&i?Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-flex-start gap-12"},Object(r.createElement)("div",{className:"bwf-w-60"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-60"})),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-210"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-30 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"})):n&&!!s&&Object(r.createElement)(R.a,{siteLocale:"en-US",currency:Object(l.sc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:s,footerComponent:function(e){return Object(r.createElement)(U.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:c})},W=n(44),H=n(87);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Q(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Q(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Q(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Q(m,"constructor",s),Q(s,"constructor",l),l.displayName="GeneratorFunction",Q(s,a,"GeneratorFunction"),Q(m),Q(m,a,"Generator"),Q(m,r,(function(){return this})),Q(m,"toString",(function(){return"[object Generator]"})),(Y=function(){return{w:c,m:b}})()}function Q(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Q=function(e,t,n,r){function c(t,n){Q(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.refreshTable,n=te(Object(r.useState)(!1),2),c=n[0],o=n[1],i=Object(l.Cb)("table_sort_data"),s=i.hasOwnProperty("contact_sort_data")?i.contact_sort_data:{},m=Object(u.isObject)(s)&&!Object(u.isEmpty)(s)?s:{},f=m.orderby,p=void 0===f?"last_modified":f,d=m.order,O=void 0===d?"desc":d,j=Object(r.useContext)(l.h),w=[{value:"f_name",label:Object(a.__)("Contact Name","wp-marketing-automations")},{value:"creation_date",label:Object(a.__)("Creation Date","wp-marketing-automations")},{value:"last_modified",label:Object(a.__)("Last Updated","wp-marketing-automations")},{value:"country",label:Object(a.__)("Country","wp-marketing-automations")},{value:"state",label:Object(a.__)("State","wp-marketing-automations")}];Object(l.sc)()&&w.push({value:"total_order_count",label:Object(a.__)("Orders","wp-marketing-automations")},{value:"total_order_value",label:Object(a.__)("Total Spend","wp-marketing-automations")},{value:"l_order_date",label:Object(a.__)("Last Order Date","wp-marketing-automations")});var v=te(Object(r.useState)(p),2),h=v[0],_=v[1],k=te(Object(r.useState)(O),2),S=k[0],N=k[1],C=function(){var e,n=(e=Y().m((function e(n){var r,c,s;return Y().w((function(e){for(;;)switch(e.p=e.n){case 0:return o(!0),e.p=1,r={orderby:h,order:S},(c=J({},i)).contact_sort_data=r,e.n=2,y()({path:Object(l.B)("/user-preference/".concat(Object(l.O)(),"/")),method:"POST",data:{data:{table_sort_data:c}}}).then((function(e){if(200!==e.code)throw Error(Object(l.v)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.table_sort_data.contact_sort_data=r,j(e.message),t(),n(),o(!1)})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,s=e.v,o(!1),j(s.message?s.message:Object(a.__)("Error in saving sort data","wp-marketing-automations"));case 4:Object(l.Nb)(j,2e3);case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ee(c,r,a,o,i,"next",e)}function i(e){ee(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-custom-ellipsis bwf-sort-ellipsis-contact-list",style:{width:"30px"}},Object(r.createElement)(b.a,{label:"",buttonIcon:Object(r.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small",key:"import",style:{width:"30px",padding:"7px"},title:Object(a.__)("Sort Order","wp-marketing-automations")},Object(r.createElement)(g.a,{icon:"sort",size:14})),renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-heading-1"},Object(a.__)("Sorting","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-heading-2 bwf-mt-16"},Object(a.__)("Sort Order","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-contact-sort-popover"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-sort-order-buttons"},Object(r.createElement)(E.a,{isSecondary:!S||"desc"===S,isTertiary:S&&"desc"!==S,onClick:function(){return N("desc")}},Object(a.__)("Descending","wp-marketing-automations")),Object(r.createElement)(E.a,{isSecondary:S&&"asc"===S,isTertiary:S&&"asc"!==S,onClick:function(){return N("asc")}},Object(a.__)("Ascending","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-sort-column-list bwf-mt-16"},Object(r.createElement)(H.a,{className:"bwfcrm-inline-option",selected:h,label:"",options:w,onChange:function(e){return _(e)}})),Object(r.createElement)("div",{className:"bwf-contact-sort-action bwf-mt-16"},Object(r.createElement)(E.a,{isPrimary:!0,className:"bwf-update-button",onClick:function(){return C(t)},isBusy:c},Object(a.__)("Update","wp-marketing-automations")))))}}))},ae=n(180),ce=n(125);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e){return function(e){if(Array.isArray(e))return je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function me(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return be(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(be(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,be(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,be(m,"constructor",s),be(s,"constructor",l),l.displayName="GeneratorFunction",be(s,a,"GeneratorFunction"),be(m),be(m,a,"Generator"),be(m,r,(function(){return this})),be(m,"toString",(function(){return"[object Generator]"})),(me=function(){return{w:c,m:b}})()}function be(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(be=function(e,t,n,r){function c(t,n){be(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function fe(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function pe(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){fe(c,r,a,o,i,"next",e)}function i(e){fe(c,r,a,o,i,"throw",e)}o(void 0)}))}}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var we=Object(ce.c)((function(){return Object(r.createElement)(g.a,{icon:"menu-2",size:20})})),ye=Object(ce.b)((function(e){var t=e.item,n=e.onRemove;return Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-contact-preferences__item"},Object(r.createElement)("div",{className:"bwf-contact-preferences__item-title"},Object(r.createElement)(we,null),t.label),Object(r.createElement)("div",{className:"bwf-contact-preferences__item-type"},Object(r.createElement)("span",{className:"bwf-tags bwf-tag-gray bwf-w-fit-content"},t.groupLabel)),Object(r.createElement)("div",{className:"bwf-display-flex bwf-cursor-pointer",onClick:function(){n(Object.keys(t)[0],t.groupKey)}},Object(r.createElement)(g.a,{icon:"delete",size:20}))))})),ve=Object(ce.a)((function(e){var t=e.items,n=e.onRemove;return Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(t)?Object(r.createElement)("div",{className:"bwf-h4 bwf_text_center bwf-m-20"},Object(a.__)("No Additional Columns Selected. Click the Add New Columns button.","wp-marketing-automations")):t.map((function(e,t){return Object(r.createElement)(ye,{item:e,key:"bwf-contact-preferences__item-".concat(t),index:t,onRemove:n})})))})),ge=["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"],he=function(e){var t=e.onRequestClose,n=e.refreshTable,c=e.setModelData,o=Object(r.useContext)(l.h),i=de(Object(r.useState)(!1),2),s=i[0],m=i[1],b=de(Object(r.useState)(!1),2),f=b[0],d=b[1],O=de(Object(r.useState)(!1),2),j=O[0],w=O[1],v=de(Object(r.useState)(0),2),h=v[0],_=v[1],k=Object(r.useRef)(null),S=de(Object(r.useState)([]),2),N=S[0],C=S[1],P=de(Object(r.useState)([]),2),x=P[0],I=P[1],T=de(Object(r.useState)({}),2),A=T[0],F=T[1],D=de(Object(r.useState)(!1),2),$=D[0],G=D[1],B=Object(r.useRef)(new AbortController),M=Object(z.a)(!0,!1),L=M.loading,U=void 0===L||L,R=M.filters,q=void 0===R?{}:R,V=function(){var e=pe(me().m((function e(){return me().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({path:Object(l.B)("/contact/export/custom-selections"),signal:B.current.signal}).then((function(e){if(200===e.code){var t=Object.create({});Object.keys(e.result).forEach((function(n){"wishlist-member"!==n&&(t[n]={label:e.result[n].name},t[n].fields=Object.keys(e.result[n].selections).map((function(t){return{key:e.result[n].selections[t].slug,label:e.result[n].selections[t].name}})))})),F(t),d(!0)}})).catch((function(e){console.log(e)}));case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}(),H=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(q).forEach((function(n){var r=de(n,2),a=r[0],c=r[1];if(t.includes(a)||["email","creation_date"].includes(a))return!1;var o;o={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(o):e[c.group]={label:c.groupLabel,fields:[o]}})),se(se({},e),A)}),[q,A]);Object(r.useEffect)((function(){return Object(l.cc)()?V():d(!0),function(){B.current.abort()}}),[]),Object(r.useEffect)((function(){if(Object(u.isEmpty)(N)&&f&&!$){if(H.hasOwnProperty("contact_details")){var e=[],t=[];if(!Object(u.isEmpty)(bwfcrm_contacts_data.table_column_data.contactv2))bwfcrm_contacts_data.table_column_data.contactv2.map((function(t){Object(u.isObject)(t)&&e.push(t)})),Object.keys(H).forEach((function(n){H[n].fields.map((function(e){return e.key})).every((function(t){return e.some((function(e){return e.hasOwnProperty(t)}))}))&&t.push(ue({},n,H[n].label))}));C(e),I(t)}G(!0)}}),[H]);var K=function(e,t){var n=H[e].fields.map((function(e){return e.key}));if(x.some((function(t){return t.hasOwnProperty(e)})))C((function(e){return e.filter((function(e){return!n.some((function(t){return e.hasOwnProperty(t)}))}))})),I((function(t){return t.filter((function(t){return!t.hasOwnProperty(e)}))}));else{var r=H[e].fields.map((function(n){return ue(ue(ue(ue({},n.key,n.label),"label",n.label),"groupKey",e),"groupLabel",t)}));C((function(e){return Object(u.uniqBy)([].concat(ie(e),ie(r)),(function(e){return Object.keys(e)[0]}))})),I((function(n){return[].concat(ie(n),[ue({},e,t)])}))}},Y=function(){var e=pe(me().m((function e(){var r;return me().w((function(e){for(;;)switch(e.p=e.n){case 0:return m(!0),e.p=1,e.n=2,y()({path:Object(l.B)("/user-preference/".concat(Object(l.O)(),"/")),method:"POST",data:{data:{contact_columnv2:N}}}).then((function(e){if(200!==e.code)throw Error(Object(l.v)(null==e?void 0:e.message));bwfcrm_contacts_data.table_column_data.contactv2=N,o(e.message),Object(l.Nb)(o,2e3),n(),t(),m(!1)})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,m(!1),c({status:!0,modalTitle:Object(a.__)("Save Columns","wp-marketing-automations"),error:r.message?r.message:Object(a.__)("Error in saving preferences","wp-marketing-automations")});case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(p.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(a.__)("Table Columns","wp-marketing-automations"),Object(r.createElement)("span",null,Object(a.__)("Add new columns or arrange existing columns in contact table","wp-marketing-automations"))),ref:k,onRequestClose:function(){return t()},className:"bwf-admin-modal bwf-contact-preferences-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-contact-preferences-modal__content"},j?Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__back-btn",onClick:function(){return w(!1)}},Object(r.createElement)(g.a,{icon:"arrow-left-long",width:20,height:14}),Object(r.createElement)("span",null,Object(a.__)("Back","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf-contact-preferences__items-wrap"},Object(u.isEmpty)(Object.keys(H))||U?Object(r.createElement)(_e,null):[].concat(ge,ie(Object.keys(A))).map((function(e,t){return H.hasOwnProperty(e)&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group",key:"bwf-contact-preferences__add-col-group-".concat(t)},Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){return _((function(e){return e!==t&&t}))}},Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-header"},Object(r.createElement)(W.a,{checked:x.some((function(t){return t.hasOwnProperty(e)})),onChange:function(){return K(e,H[e].label)},onClick:function(t){t.stopPropagation(),K(e,H[e].label)}}),Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-title"},H[e].label,function(e){var t=H[e].fields.map((function(e){return e.key})),n=0;return t.forEach((function(e){N.forEach((function(t){t.hasOwnProperty(e)&&n++}))})),n>0?Object(r.createElement)("span",null," (",n," Selected )"):""}(e))),Object(r.createElement)(E.a,{className:"bwf-contact-preferences__accordian-icon",onClick:function(e){e.stopPropagation(),_((function(e){return e!==t&&t}))}},Object(r.createElement)(g.a,{icon:h===t?"angle-up":"angle-down",width:"16",height:"18"}))),h===t&&Object(r.createElement)("div",{className:"bwf-contact-preferences__add-col-group-content"},H[e].fields.map((function(t,n){return Object(r.createElement)("label",{className:"bwf-contact-preferences__add-col-group-item",key:"bwf-contact-preferences__add-col-group-item-".concat(n)},Object(r.createElement)(W.a,{checked:N.some((function(e){return e.hasOwnProperty(t.key)})),onChange:function(){return function(e,t,n,r){var a=H[n].fields.map((function(e){return e.key}));N.some((function(t){return t.hasOwnProperty(e)}))?C((function(t){var r=t.filter((function(t){return!t.hasOwnProperty(e)}));return a.every((function(e){return r.hasOwnProperty(e)}))||I((function(e){return e.filter((function(e){return!e.hasOwnProperty(n)}))})),r})):C((function(c){var o=[].concat(ie(c),[ue(ue(ue(ue({},e,t),"label",t),"groupKey",n),"groupLabel",r)]);return a.every((function(e){return o.some((function(t){return t.hasOwnProperty(e)}))}))&&I((function(e){return[].concat(ie(e),[ue({},n,r)])})),o}))}(t.key,t.label,e,H[e].label)}}),Object(r.createElement)("div",null,t.label))}))))})))):Object(r.createElement)("div",{className:"bwf-contact-preferences"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header"},Object(r.createElement)("div",{className:"bwf-contact-preferences__header-heading"},Object(a.__)("Columns","wp-marketing-automations")),Object(r.createElement)(E.a,{isSecondary:!0,className:"bwf-btn-small is-border",onClick:function(){return w(!0)}},Object(a.__)("Add New Columns","wp-marketing-automations"))),f&&$?Object(r.createElement)(ve,{helperContainer:k.current,helperClass:"bwf-contacts-preferences-item__helper",useDragHandle:!0,axis:"y",items:N,onRemove:function(e,t){var n=H[t].fields.map((function(e){return e.key}));C((function(r){var a=r.filter((function(t){return!t.hasOwnProperty(e)}));return n.every((function(e){return a.hasOwnProperty(e)}))||I((function(e){return e.filter((function(e){return!e.hasOwnProperty(t)}))})),a}))},onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;t!==n&&C((function(e){return Object(ce.d)(e,t,n)}))}}):Object(r.createElement)(_e,{type:"fields"}))),Object(r.createElement)("div",{className:"bwf-contact-preferences__actions"},Object(r.createElement)(E.a,{onClick:function(){return t()},disabled:s},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(E.a,{isPrimary:!0,onClick:Y,disabled:s,isBusy:s},Object(a.__)("Save","wp-marketing-automations"))))},_e=function(e){var t=e.type,n=void 0===t?"add-col":t;return ie(Array(5)).map((function(e,t){return Object(r.createElement)("div",{key:"bwf-preferences-placeholder-".concat(t),className:"bwf-contact-preferences__add-col-group"},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 bwf-ml-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-ml-10 ".concat("fields"===n?"bwf-w-90":"bwf-w-120")})),"fields"===n&&Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-20 bwf-mr-15"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-mr-15 ".concat("fields"===n?"bwf-w-80 bwf-h-30 bwf-rounded-4":"bwf-w-20 bwf-h-20")})))}))},Ee=function(e){var t=e.refreshTable,n=e.setModelData,c=de(Object(r.useState)(!1),2),o=c[0],i=c[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-sort-button components-button is-light bwf-btn-small "+(o?"is-active":""),onClick:function(){return i(!0)},style:{width:"30px",padding:"7px"},title:Object(a.__)("Column Preference","wp-marketing-automations")},Object(r.createElement)(g.a,{icon:"filters",size:16})),o&&Object(r.createElement)(he,{onRequestClose:function(){return i(!1)},refreshTable:t,setModelData:n}))},ke=n(54),Se=n(358),Ne=n(96),Ce=n(66),Pe=n(202),xe=n(40),Ie=n(343),Te=n(342),Ae=n(362);function Fe(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return De(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(De(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,De(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,De(m,"constructor",s),De(s,"constructor",l),l.displayName="GeneratorFunction",De(s,a,"GeneratorFunction"),De(m),De(m,a,"Generator"),De(m,r,(function(){return this})),De(m,"toString",(function(){return"[object Generator]"})),(Fe=function(){return{w:c,m:b}})()}function De(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(De=function(e,t,n,r){function c(t,n){De(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function $e(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ge(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){$e(c,r,a,o,i,"next",e)}function i(e){$e(c,r,a,o,i,"throw",e)}o(void 0)}))}}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Le=function(e){var t=e.onClose,n=void 0===t?function(){}:t,c=e.selectedContacts,o=void 0===c?[]:c,i=e.refreshContactData,s=void 0===i?function(){}:i,m=Be(Object(r.useState)({}),2),b=m[0],f=m[1],d=Be(Object(r.useState)([]),2),O=d[0],j=d[1],w=Be(Object(r.useState)(!0),2),v=w[0],h=w[1],k=Be(Object(r.useState)(!1),2),S=k[0],N=k[1],C=Be(Object(r.useState)([]),2),P=C[0],x=C[1],I=Be(Object(r.useState)([]),2),T=I[0],A=I[1],F=Be(Object(r.useState)(0),2),D=F[0],$=F[1],G=Be(Object(r.useState)(!1),2),M=G[0],L=G[1],z=function(){var e=Ge(Fe().m((function e(){return Fe().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({path:Object(l.B)("/link-triggers/actions"),method:"GET"}).then((function(e){200===e.code&&(e.result.hasOwnProperty("actions")&&x(e.result.actions),e.result.hasOwnProperty("actions_schema")&&A(e.result.actions_schema)),h(!1)}));case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useLayoutEffect)((function(){z(),j([]),f({}),L(!1)}),[]);var U,R=function(e){var t={};return Object.keys(e).map((function(n){if("new"!==n)if(Object(u.isEmpty)(e[n]))Object(u.isEmpty)(T[n])&&(t[n]=e[n]);else if(Object(u.isObject)(e[n])&&!Object(u.isArray)(e[n])){var r={};Object.keys(e[n]).map((function(t){Object(u.isEmpty)(e[n][t])||(r[t]=e[n][t])})),t[n]=r}else Object(u.isArray)(e[n])&&(t[n]=e[n])})),t},q=function(){var e=Ge(Fe().m((function e(){var t,n;return Fe().w((function(e){for(;;)switch(e.p=e.n){case 0:if(t=R(b),!Object(u.isEmpty)(t)||!(Object(u.isEmpty)(b)||1===Object.keys(b).length&&b.hasOwnProperty("new"))){e.n=1;break}return j([Object(a.__)("No actions selected","wp-marketing-automations")]),e.a(2);case 1:if(Object.entries(b).length===Object.entries(t).length){e.n=2;break}return j([Object(a.__)("Please fill all the required fields","wp-marketing-automations")]),e.a(2);case 2:return j([]),e.p=3,N(!0),e.n=4,y()({path:Object(l.B)("/bulk-action/"),method:"POST",data:{include_ids:o.map((function(e){return e.id})),actions:t,only_action:!0,enable_automation:M}}).then((function(e){200==e.code&&e.hasOwnProperty("result")&&e.result.hasOwnProperty("id")&&(Object(l.ab)()||(bwfcrm_contacts_data.first_bulk_action_id=1),$(e.result.id))})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 4:e.n=6;break;case 5:e.p=5,n=e.v,j(n.message),N(!1);case 6:return e.a(2)}}),e,null,[[3,5]])})));return function(){return e.apply(this,arguments)}}();return S&&parseInt(D)>0?Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,onRequestClose:n,className:"bwf-admin-modal bwf-admin-modal-640 bwf-admin-modal-no-header bwf-show-close no-btn-css"},Object(r.createElement)("div",{className:"bwf-perform-bulk-action-modal-body bwf-mtb-12"},Object(r.createElement)("div",{className:"bwf-heading4-new bwf-display-flex"},Object(a.__)("Bulk Action has started","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-heading5-new bwf-display-flex bwf-mt-8 is-black"},Object(a.__)("The actions are being processing in the background.","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-display-flex gap-16 bwf-mt-24"},Object(r.createElement)(E.a,{onClick:function(){s(),n()},isPrimary:!0},Object(a.__)("View Contacts","wp-marketing-automations")),Object(r.createElement)(E.a,{onClick:function(){return Object(B.l)({page:"autonami",path:"/bulk-action/"+D},"/",{})},isSecondary:!0},Object(a.__)("Take to Bulk Action Screen","wp-marketing-automations"))))):Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Bulk Action","wp-marketing-automations")),Object(r.createElement)("span",{onClick:n,className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),O.length>0&&(U=Object(u.isArray)(O)?Object(r.createElement)("ul",null,O.map((function(e){return Object(r.createElement)("li",{key:Math.random()},e)}))):O,Object(r.createElement)(_.a,{status:"error"},U)),Object(r.createElement)("div",{className:"bwf-perform-bulk-action-modal-body "+(S?"is-creating-baction":"")},v?Object(r.createElement)("div",null,[1,2,3].map((function(e){return Object(r.createElement)("div",{key:e},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between gap-24"},Object(r.createElement)("div",{className:"bwf-display-flex gap-20"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-20"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-150"})))}))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ae.b,{actions:P,actionSchema:T,value:Object(u.isEmpty)(b)?{new:{}}:b,setActionValue:function(e){f(e)},onEmptyError:function(e){j(e?Object(a.__)("Please fill the empty actions to add new one.","wp-marketing-automations"):"")}}),1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.2.1")&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag, list and status change related events)","wp-marketing-automations"),checked:M,className:"bwf-tooglecontrol-advance",onChange:function(e){L(e)}})))),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},v?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30 bwf-mr-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-30"})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(E.a,{className:"bwf-cancel-btn",onClick:n},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(E.a,{onClick:q,className:Object(u.size)(O)||function(){if(Object(u.isEmpty)(b)||1===Object.keys(b).length&&b.hasOwnProperty("new"))return!1;var e=[];return Object.keys(b).map((function(t){(""===t||Object(u.isEmpty)(b[t])&&!Object(u.isEmpty)(T[t]))&&e.push(t)})),!!Object(u.isEmpty)(e)}()?"bwf-no-ripple":"",isPrimary:!0,isBusy:S},Object(a.__)("Apply","wp-marketing-automations")))))};function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Ue=["path","page","filter"],Re=["s"],qe=["s"];function Ve(){return(Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){Ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Qe(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Qe(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Qe(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Qe(m,"constructor",s),Qe(s,"constructor",l),l.displayName="GeneratorFunction",Qe(s,a,"GeneratorFunction"),Qe(m),Qe(m,a,"Generator"),Qe(m,r,(function(){return this})),Qe(m,"toString",(function(){return"[object Generator]"})),(Ye=function(){return{w:c,m:b}})()}function Qe(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Qe=function(e,t,n,r){function c(t,n){Qe(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Ze(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Ze(c,r,a,o,i,"next",e)}function i(e){Ze(c,r,a,o,i,"throw",e)}o(void 0)}))}}function Xe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){if(e){if("string"==typeof e)return nt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nt(e,t):void 0}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rt=function(e){var t=Object(r.useContext)(l.h),n=et(Object(r.useState)(!1),2),c=n[0],o=n[1],w=et(Object(r.useState)(!1),2),h=w[0],_=w[1],k=et(Object(r.useState)(!1),2),S=k[0],N=k[1],C=et(Object(r.useState)({}),2),P=C[0],x=C[1],I=et(Object(r.useState)(!1),2),T=I[0],A=I[1],F=et(Object(r.useState)(!1),2),z=F[0],R=F[1],q=et(Object(r.useState)(!0),2),H=q[0],K=q[1],Y=Object(O.a)(),Q=Object(j.a)(),Z=e.query,J=e.isExport,X=e.setExport,ee=e.isImport,te=e.setImport,ne=e.menuButtons,ce=e.pitchData,oe=Z.path,ie=Z.page,le=Z.filter,se=Xe(Z,Ue),ue=Object(r.useRef)(se),me=et(Object(r.useState)({status:!1}),2),be=me[0],fe=me[1],pe=et(Object(r.useState)({status:!1,contactInfo:{}}),2),de=pe[0],Oe=pe[1],je=et(Object(r.useState)({loading:!1,status:!1}),2),we=je[0],ye=je[1],ve=et(Object(r.useState)({status:!1,contactInfo:{}}),2),ge=ve[0],he=ve[1],_e=Q.fetchListing,Ae=Object(ae.a)().setSingleContactListData,Fe=et(Object(r.useState)([]),2),De=Fe[0],$e=Fe[1],Ge=et(Object(r.useState)(!1),2),Be=Ge[0],Me=Ge[1],ze=function(){Et&&Et(),$e([]),setTimeout((function(){We.reset()}),2500)},We=Object(Ne.useMutation)(function(){var e=Je(Ye().m((function e(t){return Ye().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({path:Object(l.B)("/v3/contacts/"),method:"DELETE",data:t});case 1:return e.a(2,e.v)}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){ze(),_e(Z,0,st,!0)},onError:function(){}}),Ke=Object(r.useCallback)((function(e,t){switch(e){case"delete":$e(t),Me(!0);break;case"perform-bulk-action":$e(t),_(!0)}}),[]),Qe=Y.getPageNumber,Ze=Y.getPerPageCount,nt=Y.getTotalCount,rt=Y.getLoading,at=Y.getContacts,ct=Y.getError,ot=Y.getCountData,it=at(),lt=Qe(),st=Ze(),ut=nt(),mt=rt(),bt=ct(),ft=ot();Object(r.useEffect)((function(){_e(Z,0,25,!0),A(!0)}),[]),Object(r.useEffect)((function(){Object(l.zc)(se,ue.current)||J||_e(Z,0,25,!0),ue.current=se}),[Z]),Object(r.useEffect)((function(){mt||R(!1)}),[mt]),Object(r.useEffect)((function(){!J&&T&&_e(Z,0,25,!0)}),[J]),Object(r.useEffect)((function(){!ee&&T&&_e(Z,0,25,!0)}),[ee]);var pt,dt,Ot=function(e){var t=e.f_name,n=void 0===t?"":t,a=e.l_name,c=void 0===a?"":a,o=e.id,i=void 0===o?"":o;return Object(r.createElement)(m.a,{to:"wp-admin/admin.php?page=autonami&path=/contact/"+i,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),Ae(Object(l.tc)([n,c]," "));var t=se.s,r=void 0===t?"":t,a=Xe(se,Re),o=Object(u.isEmpty)(a)?""!==r?{s:r}:{}:He(He({},se),{},{filter:"advanced"});Object(B.l)({page:"autonami",path:"/contact/"+parseInt(i),return_to:"/contacts"},"/",o)}},Object(r.createElement)(Ie.a,{contact:e,hideJoiningDate:!0}))},jt=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email?Object(r.createElement)(d.a,{justify:"justify",align:"top"},Object(r.createElement)(d.c,null,e.email)):"-")},wt=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){}},Object(r.createElement)(m.a,{to:"admin.php?page=autonami&path=/contact/"+e.id,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(t){t.preventDefault(),Ae(Object(l.tc)([e.f_name,e.l_name]," "));var n=se.s,r=void 0===n?"":n,a=Xe(se,qe),c=Object(u.isEmpty)(a)?""!==r?{s:r}:{}:He(He({},se),{},{filter:"advanced"});Object(B.l)({path:"/contact/"+parseInt(e.id),return_to:"/contacts"},"/",c)}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations"))))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){Oe({status:!0,contactInfo:e}),n()}},Object(r.createElement)(d.a,{justify:"space-between"},Object(r.createElement)(d.c,null,Object(a.__)("Send Message","wp-marketing-automations")))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){he({status:!0,contactInfo:e}),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Add Note","wp-marketing-automations")))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){fe({status:!0,contactID:e.id,data:e}),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},yt=Object(r.useMemo)((function(){var e={};if(Array.isArray(it)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw c}}}}(it);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[it]),vt=Object(L.b)(yt),gt=vt.singleSelectProps,ht=vt.selectAllProps,_t=vt.floatingBarProps,Et=vt.resetSelection,kt=vt.selected,St=void 0===kt?[]:kt,Nt=Object.keys(St).filter((function(e){return St[e]})).length,Ct=bwfcrm_contacts_data.table_column_data.contactv2,Pt=function(e){e!==st&&_e(Z,0,e)},xt=function(){_e(Z,0,st,!0)},It=i()("bwfcrm-contacts-list",{"has-search":!0}),Tt=function(){var e=Je(Ye().m((function e(n){var r;return Ye().w((function(e){for(;;)switch(e.p=e.n){case 0:return o(!0),e.p=1,e.n=2,y()({path:Object(l.B)("/v3/contacts/".concat(n,"/")),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.v)(null==e?void 0:e.message));t(e.message),o(!1),fe({}),_e(Z,0,st,!0)})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,fe(He(He({},be),{},{content:r.message})),o(!1);case 4:Object(l.Nb)(t,3e3);case 5:return e.a(2)}}),e,null,[[1,3]])})));return function(t){return e.apply(this,arguments)}}(),At=Object(l.N)("withtag"),Ft=function(e,t){if(""===t||Object(u.isUndefined)(t)||Object(u.isNull)(t)||!e.hasOwnProperty(t)||Object(u.isNull)(e[t])||Object(u.isUndefined)(e[t])||""===e[t])return"-";if("status"===t){var n=At.hasOwnProperty(parseInt(e[t]))?At[parseInt(e[t])]:At[0];return Object(r.createElement)("span",{className:n.statusclass},n.label)}if("country"===t){var c=e.country?M[e.country]:"";return Object(r.createElement)(d.a,{justify:"start"},Object(r.createElement)(Se.a,{code:e[t],size:15}),c&&Object(r.createElement)("span",{style:{textAlign:"left"}},c))}return"total_order_value"===t?Object(r.createElement)("span",{className:"bwf-tags bwf-tag-revenue",dangerouslySetInnerHTML:{__html:e[t]}}):Object(u.isArray)(e[t])?(o=e[t],i=[],l=[],Object(u.isEmpty)(o)?"-":(o.map((function(e){Object(u.isEmpty)(e)||(i.length<5&&(e.hasOwnProperty("link")&&""!==e.link?i.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(e.link),target:"_blank",key:e.id,rel:"noreferrer"},e.name)):i.push(e.name)),e.hasOwnProperty("link")&&""!==e.link?l.push(Object(r.createElement)("a",{className:"bwf-a-no-underline",href:Object(u.unescape)(e.link),target:"_blank ",key:e.id},e.name)):l.push(Object(r.createElement)("span",{key:e.id},e.name)))})),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-table-v-center"},!Object(u.isEmpty)(i)&&i.map((function(e,t){return Object(r.createElement)("span",{key:t},e,t!==i.length-1&&", ")})),!Object(u.isEmpty)(l)&&l.length>5&&Object(r.createElement)(G.a,{items:l,count:5}))))):Object(u.isBoolean)(e[t])?e[t]?Object(a.__)("Yes","wp-marketing-automations"):Object(a.__)("No","wp-marketing-automations"):Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e[t]}});var o,i,l},Dt=0===parseInt(Nt)?Object(r.createElement)("div",{className:"bwf-display-flex gap-8"},Object(r.createElement)(E.a,{className:"bwf-btn-small is-light",key:"export",onClick:function(){Object(l.cc)()?X(!0):(x({isFeature:!0,featureTitle:Object(a.__)("Contacts Export","wp-marketing-automations"),proLink:Object(l.gb)("upgrade",{utm_medium:"Contacts+Export+Upgrade+Modal"})}),N(!0))}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.cc)()?Object(r.createElement)(g.a,{icon:"export",size:14}):Object(r.createElement)(g.a,{icon:"king",size:16}),Object(a.__)("Export","wp-marketing-automations"))),Object(r.createElement)(E.a,{className:"bwf-btn-small is-light",key:"import",onClick:function(){Object(l.cc)()?te(!0):(x({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations"),proLink:Object(l.gb)("upgrade",{utm_medium:"Contacts+Import+Upgrade+Modal"})}),N(!0))}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(l.cc)()?Object(r.createElement)(g.a,{icon:"import",size:14}):Object(r.createElement)(g.a,{icon:"king",size:16}),Object(a.__)("Import","wp-marketing-automations"))),Object(r.createElement)(re,{refreshTable:xt}),Object(r.createElement)(Ee,{refreshTable:xt,setModelData:ye})):Object(r.createElement)(r.Fragment,null),$t=mt||bt||ut>0||"advanced"===le||!Object(u.isEmpty)(se)&&se.hasOwnProperty("s")&&""!==se.s||z;return Object(r.createElement)(r.Fragment,null,be&&be.status&&Object(r.createElement)(p.Modal,{onRequestClose:function(){return fe({})},className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},be.confirm?Object(r.createElement)($.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Delete Contact?","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return fe({})},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{wordBreak:"break-word"}},be.content?be.content:Object(r.createElement)(r.Fragment,null,Object(a.__)("You are about to delete this contact ","wp-marketing-automations"),Object(r.createElement)("strong",null,"".concat(be.data&&be.data.f_name," ").concat(be.data&&be.data.l_name,". ")),Object(a.__)("This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-mt-20"},be.content?Object(r.createElement)(E.a,{isPrimary:!0,onClick:function(){fe({status:!1})}},Object(a.__)("OK","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(E.a,{className:"bwf-cancel-btn",onClick:function(){fe({status:!1})},disabled:c},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(E.a,{className:"bwf-delete-btn",isBusy:c,onClick:function(){Tt(be.contactID)}},Object(a.__)("Delete","wp-marketing-automations"))))))),Object(r.createElement)("div",{className:"bwf-content-header-new bwf-pb-0"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(a.__)("All Contacts","wp-marketing-automations")),parseInt(ut)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(a.sprintf)(Object(a._n)("(%s Result)","(%s Results)",ut,"wp-marketing-automations"),ut))),Object(r.createElement)("div",{className:"bwf-content-header-right"},$t&&!mt&&ne)),!mt&&!Object(u.isEmpty)(ft)&&ft.hasOwnProperty("contacts_active_bulk_actions")&&parseInt(ft.contacts_active_bulk_actions)>0&&H&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-single-automation-notice no-icon bwf-m-0 bwf-san-no-border bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-display-flex gap-24 bwf-flex-start bwf-align-center"},Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-flex-start bwf-w-100p"},Object(r.createElement)(g.a,{icon:"info",color:"#353030",size:20}),Object(r.createElement)("div",{className:"bwf-display-flex gap-8 bwf-space-between bwf-w-100p"},Object(r.createElement)("span",{className:"bwf-normal-text bwf-l-h-16"},Object(r.createElement)("span",{className:"bwf-normal-text bwf-n-b bwf-l-h-16"},Object(a.__)("Information","wp-marketing-automations"),": "),Object(a.__)("Bulk action on contacts is in progress.","wp-marketing-automations")),Object(r.createElement)(E.a,{onClick:function(){return Object(B.l)({page:"autonami",path:"/bulk-actions/ongoing"},"/",{})},className:"bwf-btn-small is-black"},Object(a.__)("Go to Bulk Actions","wp-marketing-automations")))),Object(r.createElement)("span",{className:"bwf-cursor-pointer bwf-w-16 bwf-h-16",onClick:function(){return K(!1)}},Object(r.createElement)(g.a,{icon:"cross",color:"#353030",size:16}))))),$t?Object(r.createElement)(s.a,{className:It,rows:Object(u.isEmpty)(it)?[]:it.map((function(e){var t=[{display:gt[e.id]&&Object(r.createElement)(W.a,Ve({type:"checkbox",checked:!1,onChange:function(){}},gt[e.id])),value:null},{display:wt(e),value:null},{display:Ot(e),value:Object(l.tc)([e.f_name,e.l_name]," ")},{display:jt(e),value:""},{display:Object(u.isEmpty)(Object(u.trim)(e.creation_date))?"-":e.creation_date,value:e.creation_date}];return Ct.map((function(n){var r=He({},n);delete r.label,delete r.groupKey,delete r.groupLabel;var a=Object.keys(r)[0];t.push({display:Ft(e,a),value:"-"})})),t})),headers:(dt=[{key:"select_contact",label:Object(r.createElement)(W.a,Ve({type:"checkbox",checked:!1,onChange:function(){}},ht)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"actions",label:"",isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30 bwf-table-col-sticky bwf-sticky-left"},{key:"f_name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,required:!0,cellClassName:"bwf-w-210 bwf-table-col-sticky bwf-sticky-left"},{key:"contact_details",label:Object(a.__)("Email","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210 bwf-word-break"},{key:"created_on",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"}],Ct.map((function(e){Object(u.isObject)(e)&&dt.push({key:Object.keys(e).find((function(t){return e[t]==(null==e?void 0:e.label)})),label:null==e?void 0:e.label,isLeftAligned:!0,cellClassName:e.hasOwnProperty("label")&&(e.label.toLocaleLowerCase().includes("tag")||e.label.toLocaleLowerCase().includes("list")||e.label.toLocaleLowerCase().includes("product")||e.label.toLocaleLowerCase().includes("category")||e.label.toLocaleLowerCase().includes("trigger"))?"bwf-max-w-360":"bwf-w-150"})})),dt),query:{paged:lt,order:Z.order,orderby:Z.orderby},rowsPerPage:st,totalRows:ut,isLoading:mt,onPageChange:function(e,t){_e(Z,(e-1)*st,st)},onQueryChange:function(e){return"per_page"!==e?function(){}:Pt},actions:Nt>0?[Object(r.createElement)(L.a,Ve({key:"contact-bulk-action",actions:(pt=[],1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.0.3")&&pt.push({id:"perform-bulk-action",icon:"bulk-action",hint:Object(a.__)("Bulk Action","wp-marketing-automations"),isPro:!0,proLink:Object(l.gb)("upgrade",{utm_medium:"Contact+List+Bulk+Action+Upgrade+Modal"}),featureTitle:Object(a.__)("Perform Bulk Action","wp-marketing-automations")}),pt.push({id:"delete",icon:"trash",hint:Object(a.__)("Delete","wp-marketing-automations")}),pt),onAction:Ke,inLine:!0,reset:ze},_t))]:[Object(r.createElement)(Pe.a,{key:"search",isLoading:mt,searchTerm:null==se?void 0:se.s,showResultCount:!1,setSearchData:function(e){if(Object(u.size)(e))Object(B.l)({s:e},"/",Z);else{var t=Object(u.cloneDeep)(Z);t.hasOwnProperty("s")&&(null==t||delete t.s),R(!0),Object(B.l)(t,"/",{})}}}),Object(r.createElement)(Ce.b,{onChange:function(e){R(!0),"all"===e&&Object(B.l)({page:ie},oe,{}),"filters"===e&&Object(B.l)({filter:"advanced"},oe,Z)},options:[{key:"all",label:Object(a.__)("All Contacts","wp-marketing-automations")},{key:"filters",label:Object(a.__)("Advanced Filters","wp-marketing-automations")}],selected:Z.hasOwnProperty("filter")&&"advanced"===Z.filter?"filters":"all",key:"select-contact",className:"bwf-w-150"}),Object(r.createElement)(U.c,{key:"list-audience"})],rowHeader:!0,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations"),extraSectionBeforefilterCol:Dt,showMenu:!1,beforeTable:Object(r.createElement)(V,{query:Z,isOpen:Z.hasOwnProperty("filter")&&"advanced"===Z.filter})}):Object(r.createElement)(Te.a,{data:ce}),de.status&&Object(r.createElement)(v.a,{contact:de.contactInfo,setSendMessageModel:Oe}),ge.status&&Object(r.createElement)(D,{contact:ge.contactInfo,setModelStatus:he}),Object(r.createElement)(ke.a,{modalTitle:Object(a._n)("Delete Contact","Delete Contacts",De.length,"wp-marketing-automations"),deleteEntityName:1===De.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations")," "),De[0].f_name," ",De[0].l_name):Object(r.createElement)(r.Fragment,null,De.length,"Â ",Object(r.createElement)("span",{style:{fontWeight:"normal"}},Object(a.__)("contact","wp-marketing-automations"))),confirmButtonText:Object(a.__)("Delete","wp-marketing-automations"),cancelButtonText:Object(a.__)("Cancel","wp-marketing-automations"),onConfirm:function(){var e={contacts:De.map((function(e){return e.id}))};We.mutate(e)},isLoading:We.isLoading,successMessage:We.isSuccess&&Object(a.__)("Contacts Deleted!","wp-marketing-automations"),errorMessage:We.isError&&(We.error&&We.error.message?We.error.message:Object(a.__)("Unable to delete contacts","wp-marketing-automations")),onRequestClose:function(){ze(),Me(!1)},isOpen:Be,confirmDescription:Object(a.__)("This action is irreversible","wp-marketing-automations"),isDelete:!0}),Object(r.createElement)(ke.a,{modalTitle:we.modalTitle,deleteEntityName:we.deleteEntityName,confirmText:we.confirmText,confirmButtonText:we.buttonConfirm,cancelButtonText:we.buttonCancel,onConfirm:we.onConfirm,isLoading:we.loading,successMessage:we.success,errorMessage:we.error,content:we.content,onRequestClose:function(){return ye({status:!1})},isOpen:we.status,isDelete:!we.hasOwnProperty("isDelete")||we.isDelete}),!Object(l.cc)()&&Object(r.createElement)(xe.b,{isOpen:S,onRequestClose:function(){return N(!1)},modalContent:P}),h&&Object(r.createElement)(Le,{onClose:function(){ze(),_(!1)},selectedContacts:De,refreshContactData:xt}))},at=n(88),ct=n(1167),ot=n(353),it=n(355),lt=n(1120),st=n(1130);function ut(){return(ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function mt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return bt(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(bt(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,bt(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,bt(m,"constructor",s),bt(s,"constructor",l),l.displayName="GeneratorFunction",bt(s,a,"GeneratorFunction"),bt(m),bt(m,a,"Generator"),bt(m,r,(function(){return this})),bt(m,"toString",(function(){return"[object Generator]"})),(mt=function(){return{w:c,m:b}})()}function bt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(bt=function(e,t,n,r){function c(t,n){bt(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function ft(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function pt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){ft(c,r,a,o,i,"next",e)}function i(e){ft(c,r,a,o,i,"throw",e)}o(void 0)}))}}function dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var jt={email:"",f_name:"",l_name:"",marketing_status:!0,contact_no:""},wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onCloseModal:function(){}},t=Object(r.useContext)(l.h),n=Object(r.useState)([]),c=dt(n,2),o=c[0],i=c[1],s=Object(r.useState)([]),m=dt(s,2),b=m[0],f=m[1],d=Object(r.useState)(null),O=dt(d,2),w=O[0],v=O[1],h=Object(r.useState)(null),k=dt(h,2),S=k[0],N=k[1],C=Object(r.useState)(jt),P=dt(C,2),x=P[0],I=P[1],T=Object(r.useState)(!1),A=dt(T,2),F=A[0],D=A[1],G=Object(r.useState)({}),M=dt(G,2),L=M[0],z=M[1],U=Object(ae.a)(),R=U.setSingleContactListData,q=function(){var n=pt(mt().m((function n(r){var a;return mt().w((function(n){for(;;)switch(n.p=n.n){case 0:return D(!0),n.p=1,n.n=2,y()({path:Object(l.B)("/v3/contacts"),method:"POST",data:r}).then((function(n){if(200!=n.code)throw Error(Object(l.v)(null==n?void 0:n.message));t(n.message),z({}),D(!1),Object(l.bb)()||(bwfcrm_contacts_data.first_contact_id=1),R(Object(l.tc)([r.f_name,r.l_name]," ")),Object(B.l)({page:"autonami",path:"/contact/"+parseInt(n.result.id)},"/",{}),e.onCloseModal()})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:n.n=4;break;case 3:n.p=3,a=n.v,D(!1),v(a);case 4:Object(l.Nb)(t,3e3);case 5:return n.a(2)}}),n,null,[[1,3]])})));return function(e){return n.apply(this,arguments)}}(),V=function(e){var t={};return!Object(u.isEmpty)(e.email)&&Object(l.ic)(e.email?e.email:"")||(t.email=Object(u.isEmpty)(e.email)?Object(a.__)("Email is required","wp-marketing-automations"):Object(a.__)("Email is not valid","wp-marketing-automations")),Object(u.isEmpty)(e.phone)||Object(ct.a)(e.phone?e.phone:"")||(t.phone=Object(a.__)("Phone is not valid","wp-marketing-automations")),t},H=function(e){var t=e.email,n=e.f_name,r=e.l_name,a=e.marketing_status,c=e.phone,i=[];Object(u.isEmpty)(o)||o.map((function(e){i.push({id:e.key,value:e.label})}));var l=[];Object(u.isEmpty)(b)||b.map((function(e){l.push({id:e.key,value:e.label})})),I({email:t,f_name:n,l_name:r,contact_no:c,status:a,tags:i,lists:l}),q({email:t,f_name:n,l_name:r,contact_no:c,status:a,tags:i,lists:l})},K=Object(j.a)(),Y=K.fetch,Q=e.query,Z=function(){S&&(N(null),Y(Q,0,25)),e.onCloseModal()},J=function(){return L&&L.success&&L.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(ot.a,null),Object(r.createElement)("div",{className:"bwf-h1"},L.message)):L&&L.error&&L.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(it.a,null),Object(r.createElement)("div",{className:"bwf-h1"},L.message)):Object(r.createElement)($.a,null)};return Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-add-new-contact-modal "},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Create Contact","wp-marketing-automations")),Object(r.createElement)("span",{onClick:Z,className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),w&&Object(r.createElement)(_.a,{status:"error",onRemove:function(){return v(null)}},w.hasOwnProperty("message")?w.message:Object(a.__)("Unknown Error while creating contact","wp-marketing-automations")),L.error||L.success?J():Object(r.createElement)(at.a,{validate:V,onSubmitCallback:H,initialValues:x},(function(e){var t=e.getInputProps,n=e.values,c=e.errors,l=e.handleSubmit,s=e.touched;return Object(r.createElement)("div",{className:"bwf-form-fields"},Object(r.createElement)("div",null,Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-input-label",id:"required"},Object(a.__)("Email","wp-marketing-automations")),Object(r.createElement)(p.TextControl,ut({disabled:F,type:"email",help:Object(a.__)("Required","wp-marketing-automations")},t("email"))),(null==s?void 0:s.email)&&(null==c?void 0:c.email)&&Object(r.createElement)("div",{className:"bwf-error-text"},null==c?void 0:c.email)),Object(r.createElement)(p.TextControl,ut({disabled:F,label:Object(a.__)("Phone","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("phone"))),(null==s?void 0:s.phone)&&c.hasOwnProperty("phone")&&Object(r.createElement)("div",{className:"bwf-error-text"},null==c?void 0:c.phone),Object(r.createElement)(p.TextControl,ut({disabled:F,label:Object(a.__)("First Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("f_name"))),Object(r.createElement)(p.TextControl,ut({disabled:F,label:Object(a.__)("Last Name","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("l_name"))),Object(r.createElement)(lt.a,{onTagsChange:i,selected:o}),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(st.a,{onListsChange:f,selected:b}),Object(r.createElement)("div",{className:"bwf_clear_24"})),Object(r.createElement)("div",null,Object(r.createElement)(W.a,ut({type:"checkbox",disabled:F,label:Object(a.__)("Mark Contact as Subscribed","wp-marketing-automations"),help:Object(a.__)("Optional","wp-marketing-automations")},t("marketing_status")))),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons bwf-mt-24"},Object(r.createElement)(E.a,{className:"bwf-cancel-btn",onClick:Z},Object(a.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(E.a,{onClick:function(){V(n)&&l()},className:Object(u.size)(c)||V(n)?"bwf-no-ripple":"",isPrimary:!0,isBusy:F},Object(a.__)("Add","wp-marketing-automations"))))})))},yt=n(378),vt=n(354),gt=n(68),ht=n(77),_t=n(109),Et=(n(1265),n(51));function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var St=["getStateProp"];function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(n),!0).forEach((function(t){Pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=kt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xt=function(){var e=Object(Et.a)("exporter"),t=e.getStateProp;return Ct(Ct({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,St)),{},{getExporter:function(){return t("export")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getExistingExport:function(){return t("existingExport")}})},It=n(50);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var At=["fetch","setStateProp"];function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gt=function(){var e=Object(It.a)("exporter"),t=e.fetch,n=e.setStateProp;return Dt(Dt({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,At)),{},{fetch:function(e,n,r){t("GET",Object(l.B)("/contact/export?limit=".concat(e,"&offset=").concat(n,"&search=").concat(r)))},setStateExportValues:function(e,t){n(e,t)}})},Bt=n(1139),Mt=n(349),Lt=n(347),zt=n(1099);function Ut(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Rt(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Rt(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Rt(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Rt(m,"constructor",s),Rt(s,"constructor",l),l.displayName="GeneratorFunction",Rt(s,a,"GeneratorFunction"),Rt(m),Rt(m,a,"Generator"),Rt(m,r,(function(){return this})),Rt(m,"toString",(function(){return"[object Generator]"})),(Ut=function(){return{w:c,m:b}})()}function Rt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Rt=function(e,t,n,r){function c(t,n){Rt(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function qt(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ht=function(e){var t=e.exportId,n=void 0===t?"":t,c=e.setLoading,o=e.setComplete,i=e.preExportData,s=void 0===i?{}:i,m=Vt(Object(r.useState)(!1),2),b=m[0],f=m[1],p=Vt(Object(r.useState)(s),2),d=p[0],O=p[1],j=Vt(Object(r.useState)(0),2),w=j[0],v=j[1],g=Vt(Object(r.useState)(!1),2),h=g[0],_=g[1],E=Vt(Object(r.useState)(!1),2),k=E[0],S=E[1];Object(r.useEffect)((function(){100===parseInt(w)&&setTimeout((function(){_(!0)}),2e3)}),[w]);var N=function(){var e,t=(e=Ut().m((function e(){return Ut().w((function(e){for(;;)switch(e.p=e.n){case 0:return S(!0),e.p=1,e.n=2,y()({method:"GET",path:Object(l.B)("/contact/export/".concat(n))}).then((function(e){200==e.code&&O(e.result),S(!1)}));case 2:e.n=4;break;case 3:e.p=3,e.v,S(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){qt(c,r,a,o,i,"next",e)}function i(e){qt(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(!Object(u.isEmpty)(d))if(3==d.status)c(!1),f(!0),v(100),o(!0);else{var e=parseInt(d.offset)/parseInt(d.count)*100;v(e<100?parseInt(e):100)}}),[d]),Object(zt.a)((function(){b||k||N()}),5e3),Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},n&&b&&h?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("h2",null,Object(a.__)("Export Completed","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Your file is ready for download. Now you can download the exported contact list.","wp-marketing-automations"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Export Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("The file is being created in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:parseInt(w),text:"".concat(parseInt(w),"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))})))};function Kt(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Yt(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Yt(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Yt(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Yt(m,"constructor",s),Yt(s,"constructor",l),l.displayName="GeneratorFunction",Yt(s,a,"GeneratorFunction"),Yt(m),Yt(m,a,"Generator"),Yt(m,r,(function(){return this})),Yt(m,"toString",(function(){return"[object Generator]"})),(Kt=function(){return{w:c,m:b}})()}function Yt(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Yt=function(e,t,n,r){function c(t,n){Yt(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Qt(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Qt(c,r,a,o,i,"next",e)}function i(e){Qt(c,r,a,o,i,"throw",e)}o(void 0)}))}}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var en=function(e){var t,n=e.title,c=e.fields,o=e.expfilter,i=e.setPending,s=e.setAdd,u=e.contactCount,m=e.exportID,b=void 0===m?0:m,f=e.preExportData,d=void 0===f?{}:f,O=Jt(Object(r.useState)(!1),2),j=O[0],w=O[1],v=Jt(Object(r.useState)(""),2),g=v[0],h=v[1],k=Jt(Object(r.useState)(!1),2),S=k[0],N=k[1],C=Jt(Object(r.useState)(!1),2),P=C[0],x=C[1],I=Jt(Object(r.useState)(!1),2),T=I[0],A=I[1],F=Jt(Object(r.useState)({loading:!1,status:!1}),2),D=F[0],$=F[1],G=Jt(Object(r.useState)(Object(a.__)("Unable to create export.","wp-marketing-automations")),2),B=G[0],M=G[1];Object(r.useEffect)((function(){i(!0),0===parseInt(b)?L():(w(!0),h(b))}),[]);var L=function(){var e=Zt(Kt().m((function e(){var t,r;return Kt().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t={title:n,fields:c,filters:o,count:u},e.n=1,y()({method:"POST",data:t,path:Object(l.B)("/contact/export/add")}).then((function(e){200==e.code&&(Object(l.cb)()||(bwfcrm_contacts_data.first_export_id=2),w(!0),e.result.hasOwnProperty("id")&&h(e.result.id))}));case 1:e.n=3;break;case 2:e.p=2,r=e.v,w(!0),N(!0),r.hasOwnProperty("message")&&M(r.message);case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(){return e.apply(this,arguments)}}();T&&setTimeout((function(){var e=document.querySelectorAll(".bwf-export-add-modal .bwf-crm-export-init .bwf-stepper .bwf-stepper__steps");e.length>0&&e[0].remove()}),2e3);var z=function(){var e=Zt(Kt().m((function e(){var t;return Kt().w((function(e){for(;;)switch(e.p=e.n){case 0:return x(!0),e.p=1,e.n=2,y()({path:Object(l.B)("/contact/export/cancel/".concat(g)),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.v)(null==e?void 0:e.message));s(!1)})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,t=e.v,x(!1),N(!0),M(t.message?t.message:Object(a.__)("Error in canceling export","wp-marketing-automations"));case 4:return e.a(2)}}),e,null,[[1,3]])})));return function(){return e.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwfcrm-overview-wrap bwf-contact-export-step-three"},Object(r.createElement)("div",{style:{alignItems:"center"}},j?Object(r.createElement)(r.Fragment,null,g?Object(r.createElement)(Ht,{exportId:g,setLoading:i,setComplete:A,preExportData:d}):Object(r.createElement)("div",{className:"bwf-h4"},S&&Object(r.createElement)(_.a,{status:"error",isDismissible:!1},B))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-display-flex-column",style:{alignItems:"center"}},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-30 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-100p"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-display-flex"},j?Object(r.createElement)(r.Fragment,null,T?Object(r.createElement)(E.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){-1!==Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?window.open(Object(l.xb)()+"/wp-json"+Object(l.B)("/contact/export/download/".concat(g,"?bwf-nonce=").concat(Object(l.G)())),"_blank"):$({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),$({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})}},Object(a.__)("Download File","wp-marketing-automations")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(E.a,{isPrimary:!0,className:"bwf-mt-24",onClick:function(){s(!1)}},Object(r.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Go to Export List","wp-marketing-automations"))),-1!==Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.2.2")&&Object(r.createElement)(E.a,{isSecondary:!0,className:"bwf-mt-24",onClick:z,isBusy:P},Object(r.createElement)("span",{className:"bwf-p-5"},Object(a.__)("Cancel Export","wp-marketing-automations"))))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-90"}))),Object(r.createElement)(ke.a,{modalTitle:null!==(t=D.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:D.confirmText,deleteEntityName:D.deleteEntityName,confirmButtonText:D.buttonConfirm,cancelButtonText:D.buttonCancel,onConfirm:D.onConfirm,isLoading:D.loading,successMessage:D.success,confirmDescription:D.confirmDescription,errorMessage:D.error,onRequestClose:function(){return $({status:!1})},isOpen:D.status,isDelete:!D.hasOwnProperty("isDelete")||D.isDelete}),Object(r.createElement)("div",{className:"bwf_clear_30"}))};function tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return nn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var rn=function(e){var t=e.exportData,n=void 0===t?{}:t,c=e.onClose,o=void 0===c?function(){}:c,i=tn(Object(r.useState)(!0),2),l=i[0],s=i[1],u=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:Object(r.createElement)(r.Fragment,null)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:Object(r.createElement)(r.Fragment,null)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:function(e){switch(e){case 3:return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(en,{setPending:s,exportID:n.id,preExportData:n,setAdd:function(){return o(!0)}}));default:return Object(r.createElement)(r.Fragment,null)}}(3)}];return Object(r.createElement)(p.Modal,{onRequestClose:function(){return o(!0)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Export Inprogress","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-crm-export-init"},Object(r.createElement)(Mt.a,{steps:u,currentStep:3,isPending:l})))};function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return on(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(on(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,on(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,on(m,"constructor",s),on(s,"constructor",l),l.displayName="GeneratorFunction",on(s,a,"GeneratorFunction"),on(m),on(m,a,"Generator"),on(m,r,(function(){return this})),on(m,"toString",(function(){return"[object Generator]"})),(cn=function(){return{w:c,m:b}})()}function on(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(on=function(e,t,n,r){function c(t,n){on(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){un(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function un(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==an(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mn(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function bn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pn=function(e){var t,n=e.isAdd,c=Object(B.i)(),o=Object(z.a)(),i=bn(Object(r.useState)({loading:!1,status:!1}),2),m=i[0],O=i[1],j=bn(Object(r.useState)(!1),2),w=j[0],v=j[1],h=bn(Object(r.useState)(!1),2),_=h[0],E=h[1],k=bn(Object(r.useState)({}),2),S=k[0],N=k[1],C=c.s,P=void 0===C?"":C,x=Gt(),I=x.fetch,T=x.setStateExportValues,A=xt(),F=A.getExporter,D=A.getOffset,$=A.getLoading,G=A.getTotalCount,M=A.getPageNumber,L=A.getPerPageCount,U=[{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30 "},{key:"name",label:Object(a.__)("Name","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-300"},{key:"createdon",label:Object(a.__)("Created On","wp-marketing-automations"),isLeftAligned:!0},{key:"contactcount",label:Object(a.__)("Contacts","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-120"},{key:"status",label:Object(a.__)("Status","wp-marketing-automations"),isLeftAligned:!1,cellClassName:"bwf-w-150"},{key:"file",label:"",isLeftAligned:!1,cellClassName:"bwf-w-150"}],R=F(),q=M(),V=L(),W=G(),H=D(),K=$(),Y=Object(ht.a)().setPageCountData;Object(r.useEffect)((function(){Y({contacts_export:W})}),[W]),Object(r.useEffect)((function(){n||I(V,H,P)}),[V,H,P,n]);var Q,Z=function(e){e!==V&&T("limit",e)},J=function(){var e,t=(e=cn().m((function e(t){var n,r,c=arguments;return cn().w((function(e){for(;;)switch(e.p=e.n){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},O(sn(sn({},n),{},{status:!0})),e.p=1,e.n=2,y()({path:Object(l.B)("/contact/export/delete/".concat(t)),method:"DELETE"}).then((function(e){if(200!==e.code)throw Error(Object(l.v)(null==e?void 0:e.message));O({}),I(V,H,P)})).catch((function(e){throw Error(Object(l.v)(null==e?void 0:e.message))}));case 2:e.n=4;break;case 3:e.p=3,r=e.v,O({status:!0,error:r.message?r.message:Object(a.__)("Error in deleting export","wp-marketing-automations")});case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){mn(c,r,a,o,i,"next",e)}function i(e){mn(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),X=function(e){return Object(r.createElement)(b.a,{label:Object(a.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){e.hasOwnProperty("status")&&1===parseInt(e.status)?(N(e),E(!0)):(N(e),v(!0)),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("View","wp-marketing-automations")))),Object(r.createElement)(f.a,{isClickable:!0,onInvoke:function(){var t={status:!0,deleteEntityName:Object(r.createElement)(r.Fragment,null,Object(a.__)("item ")," ",e.title),buttonConfirm:Object(a.__)("Delete","wp-marketing-automations"),buttonCancel:Object(a.__)("Cancel","wp-marketing-automations")};O(sn(sn({},t),{},{onConfirm:function(){return J(e.id,t)}})),n()}},Object(r.createElement)(d.a,{justify:"flex-start"},Object(r.createElement)(d.c,null,Object(a.__)("Delete","wp-marketing-automations")))))}})},ee={1:Object(a.__)("In Progress","wp-marketing-automations"),2:Object(a.__)("Failed","wp-marketing-automations"),3:Object(a.__)("Completed","wp-marketing-automations"),4:Object(a.__)("Cancelled","wp-marketing-automations")},te=function(e){switch(parseInt(e.status)){case 3:if(e.file)return-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(r.createElement)("div",{onClick:function(){O({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),O({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer"},title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(r.createElement)("div",{className:"bwf-download-btn"},Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"download"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations")))):Object(r.createElement)("a",{target:"_blank",href:Object(l.xb)()+"/wp-json"+Object(l.B)("/contact/export/download/".concat(e.id,"?bwf-nonce=").concat(Object(l.G)())),title:Object(a.__)("Download","wp-marketing-automations"),className:"bwf-a-no-underline",rel:"noreferrer"},Object(r.createElement)("div",{className:"bwf-download-btn"},Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"download"})),Object(r.createElement)("span",null,Object(a.__)("Download","wp-marketing-automations"))));default:return"-"}},ne=function(e){return 1===parseInt(e.status)?Object(r.createElement)(r.Fragment,null,Object(a.sprintf)(Object(a.__)("%d of %d Completed","wp-marketing-automations"),parseInt(e.offset),parseInt(e.count))):e.count},re=Object(u.isEmpty)(R)?[]:R.map((function(e){return[{display:X(e),value:"action"},{display:e.title?e.title:"-",value:e.title},{display:(n=e.created_date,Object(r.createElement)("div",{className:"bwf-display-flex-column"},Object(r.createElement)("span",null,Object(l.jb)(n)))),value:""},{display:ne(e),value:e.count},{display:(t=e,Object(r.createElement)("span",{className:"bwf-export-status-tag bwf-status-"+parseInt(t.status)},ee[parseInt(t.status)])),value:e.status},{display:te(e),value:""}];var t,n}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)(s.a,{title:"",className:"bwf-export-contact-table",rows:re,headers:U,query:{paged:q},rowsPerPage:V,totalRows:W,isLoading:K,onPageChange:function(e,t){T("offset",(e-1)*V)},onQueryChange:function(e){return"per_page"!==e?function(){}:Z},showMenu:!1,rowHeader:!0,actions:[],emptyMessage:Object(a.__)("No export available","wp-marketing-automations"),minHeight:!0}),Object(r.createElement)(ke.a,{modalTitle:null!==(t=m.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:m.confirmText,deleteEntityName:m.deleteEntityName,confirmButtonText:m.buttonConfirm,cancelButtonText:m.buttonCancel,onConfirm:m.onConfirm,isLoading:m.loading,successMessage:m.success,confirmDescription:m.confirmDescription,errorMessage:m.error,onRequestClose:function(){return O({status:!1})},isOpen:m.status,isDelete:!m.hasOwnProperty("isDelete")||m.isDelete}),w&&!Object(u.isEmpty)(S)&&Object(r.createElement)(p.Modal,{shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1,className:"bwf-admin-modal bwf-admin-modal-large bwf-export-list-modal bwf-show-close"},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(a.__)("Export Details","wp-marketing-automations")),Object(r.createElement)("span",{onClick:function(){return v(!1)},className:"bwf-modal-close"},Object(r.createElement)(g.a,{icon:"close",color:"#353030"}))),(Q=[],Object(u.isEmpty)(S.fields)||S.fields.map((function(e){var t=bn(Object.entries(e)[0],2),n=t[0];t[1],o.hasOwnProperty(n)&&Q.push(o[n].labels.add)})),Object(r.createElement)(r.Fragment,null,S.hasOwnProperty("filters")&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Filters","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(u.isEmpty)(e)?"-":Object(r.createElement)(r.Fragment,null,Object(Bt.b)(e))}(S.filters))),!Object(u.isEmpty)(Q)&&Object(r.createElement)("div",{className:"bwf-export-modal-row"},Object(r.createElement)("div",{className:"bwf-export-modal-row-label"},Object(a.__)("Fields","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-modal-row-value"},Q.join(" | ")))))),_&&!Object(u.isEmpty)(S)&&Object(r.createElement)(rn,{exportData:S,onClose:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&I(V,H,P),E(!1)}}))},dn=function(e){var t=e.setAdd,n=e.isAdd;return Object(r.useEffect)((function(){Object(l.m)(Object(a.__)("Export List","wp-marketing-automations"))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(pn,{setAdd:t,isAdd:n}))};n(198);function On(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return jn(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(jn(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,jn(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,jn(m,"constructor",s),jn(s,"constructor",l),l.displayName="GeneratorFunction",jn(s,a,"GeneratorFunction"),jn(m),jn(m,a,"Generator"),jn(m,r,(function(){return this})),jn(m,"toString",(function(){return"[object Generator]"})),(On=function(){return{w:c,m:b}})()}function jn(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(jn=function(e,t,n,r){function c(t,n){jn(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function wn(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}var yn=function(){var e,t=(e=On().m((function e(){var t;return On().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({path:Object(l.B)("/contact/export/custom-selections")});case 1:if((t=e.v)&&t.result){e.n=2;break}throw new Error(Object(a.__)("Unable to get Custom Export Selections","wp-marketing-automations"));case 2:return e.a(2,t.result)}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){wn(c,r,a,o,i,"next",e)}function i(e){wn(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}(),vn=function(){return Object(Ne.useQuery)(["bwfcrm-get-export-selections"],yn)};function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=gn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e){return function(e){if(Array.isArray(e))return En(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return En(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kn=function(e){var t=e.checked,n=void 0!==t&&t,a=e.onChange,c=void 0===a?function(){}:a,o=e.title,i=void 0===o?"":o,l=e.count,s=void 0===l?0:l,u=e.groupKey,m=void 0===u?"":u,b=e.selectedGroup,f=void 0===b?"":b,p=e.setSelectedGroup,d=void 0===p?function(){}:p;return Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(e){e.target.classList.contains("components-checkbox-control__label")||e.target.classList.contains("components-checkbox-control__input")||d(f==m?"":m)}},Object(r.createElement)("div",null,Object(r.createElement)(W.a,{className:"bwf-export-toggler",checked:n,onChange:c,label:Object(r.createElement)(r.Fragment,null,i,s>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",s," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"tailless-arrow-down-new",size:15})))},Sn=function(e){var t=e.selected,n=e.onChange,a=e.selectedGroup,c=e.setSelectedGroup,o=vn(),i=o.isLoading,l=o.data,s=Array.isArray(t)?t.map((function(e){return Object.keys(e)[0]})):[],u=function(e,r){if(e)n([].concat(_n(t),[r]));else{var a=t.filter((function(e){return Object.keys(e)[0]!==Object.keys(r)[0]}));n(a)}},m=function(e,r){var a=l[r].selections,c=Object.keys(a);if(e){var o=c.map((function(e){return!s.includes(e)&&hn({},e,a[e].name)})).filter(Boolean);n([].concat(_n(t),_n(o)))}else{var i=t.filter((function(e){return!c.includes(Object.keys(e)[0])}));n(i)}};return i?Object(r.createElement)(r.Fragment,null):Object.keys(l).map((function(e,n){var o,i=l[e],b=i.name,f=i.selections,p=Object.keys(l[e].selections).filter((function(e){return s.includes(e)}));return Object(r.createElement)("div",{className:"bwf-export-field-section",key:n},Object(r.createElement)(kn,{title:b,checked:(o=e,Object.keys(l[o].selections).filter((function(e){return s.includes(e)})).length===Object.keys(l[o].selections).length),groupKey:e,onChange:function(t){return m(t,e)},count:Array.isArray(p)?p.length:0,selectedGroup:a,setSelectedGroup:c}),a==e&&Object(r.createElement)("div",{className:"bwf-p-20 bwf-export-field-list"},Object.keys(f).map((function(e,n){var a=Array.isArray(t)&&t.find((function(t){return!!t[e]}));return Object(r.createElement)("div",{key:n},Object(r.createElement)(W.a,{label:f[e].name,className:"bwf-export-field",checked:a,onChange:function(t){return u(t,hn({},e,f[e].name))}}))}))))}))};function Nn(e){return function(e){if(Array.isArray(e))return xn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||Pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){if(e){if("string"==typeof e)return xn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var In=function(e){var t=e.title,n=e.setTitle,c=e.selected,o=e.setSelected,i=e.setStep,l=e.expfilter,s=Cn(Object(r.useState)("contact_details"),2),m=s[0],b=s[1],f=Cn(Object(r.useState)(""),2),d=f[0],O=f[1],j=Object(B.i)(),w=Object(z.a)(),y=Object(r.useMemo)((function(){var e=[],t=["engaged","unengaged","broadcast_sent","broadcast_open","broadcast_click"];return Object.entries(w).map((function(n){var r=Cn(n,2),a=r[0],c=r[1];if(t.includes(a))return!1;var o;o={key:a,label:c.labels.add},e.hasOwnProperty(c.group)?e[c.group].fields.push(o):e[c.group]={label:c.groupLabel,fields:[o]}})),e}),[w]);Object(r.useEffect)((function(){if(Object(u.isEmpty)(c)&&y.hasOwnProperty("contact_details")){var e=[];y.contact_details.fields.map((function(t){var n={};n[t.key]=t.label,e.push(n)})),o(e)}}),[]);var v=function(e){var t=!1;return c.find((function(n){var r=Cn(Object.entries(n)[0],2),a=r[0];r[1];e==a&&(t=!0)})),t},h=function(e,t){var n=0,a=!1;return y[e].fields.map((function(e){v(e.key)&&n++})),parseInt(y[e].fields.length)===parseInt(n)&&(a=!0),Object(r.createElement)("div",{className:"bwf-export-field-header-wrap",onClick:function(t){t.target.classList.contains("components-checkbox-control__label")||t.target.classList.contains("components-checkbox-control__input")||b(m==e?"":e)}},Object(r.createElement)("div",null,Object(r.createElement)(W.a,{checked:a,className:"bwf-export-toggler",onChange:function(t){!function(e,t){var n=Nn(c);e?y[t].fields.map((function(e){if(!v(e.key)){var t={};t[e.key]=e.label,n.push(t)}})):y[t].fields.map((function(e){v(e.key)&&(n=n.filter((function(t){var n=Cn(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))})),o(n)}(t,e)},label:Object(r.createElement)(r.Fragment,null,t,n>0&&Object(r.createElement)("span",{className:"bwf-light"}," ","( ",n," selected )"))})),Object(r.createElement)("span",null,Object(r.createElement)(g.a,{icon:"tailless-arrow-down-new",size:15})))},E=Object(r.createElement)(r.Fragment,null,["contact_details","geography","contact_custom_fields","woocommerce","segments","engagement"].map((function(e,t){return y.hasOwnProperty(e)?Object(r.createElement)("div",{className:"bwf-export-field-section",key:"bwf-export-field-section-".concat(t)},h(e,y[e].label),m==e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(r.createElement)("div",{className:"bwf-export-field-list"},e.map((function(e,t){return Object(r.createElement)(W.a,{label:e.label,checked:v(e.key),onChange:function(t){if(t){var n=Nn(c),r={};r[e.key]=e.label,n.push(r),o(n)}else o(c.filter((function(t){var n=Cn(Object.entries(t)[0],2),r=n[0];n[1];return r!==e.key})))},key:"bwf-export-field-".concat(t)})})))}(y[e].fields)):["woocommerce","contact_custom_fields"].includes(e)?"":function(e){return Object(r.createElement)("div",{className:"bwf-export-field-section",key:"'bwf-export-field-section'-".concat(e)},Object(r.createElement)("div",{className:"bwf-export-field-header-wrap"},Object(r.createElement)("div",{className:"bwf-w-120 bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-w-30 bwf-placeholder-temp"})),0===parseInt(e)&&Object(r.createElement)("div",{className:"bwf-export-field-list"},Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:1}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:2}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:3}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:4}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:5}),Object(r.createElement)("div",{className:"bwf-placeholder-temp",key:6})))}(t)})),Object(r.createElement)(Sn,{selected:c,onChange:function(e){o(e)},selectedGroup:m,setSelectedGroup:b}));return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfcrm-overview-wrap bwf-contact-export-step-one"},d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)(_.a,{status:"error",onRemove:function(){return O("")}},d),Object(r.createElement)("div",{className:"bwf_clear_20"})),Object(r.createElement)(p.TextControl,{type:"text",value:t,placeholder:Object(a.__)("Enter Name","wp-marketing-automations"),label:Object(r.createElement)("span",{className:"bwf-h4"},Object(a.__)("Name","wp-marketing-automations")),onChange:function(e){n(e)}}),Object(r.createElement)("div",{className:"bwf-field-wrapper"},E)),Object(r.createElement)("div",{className:"bwfcrm-export-buttons bwf-display-flex"},Object(r.createElement)("div",null),Object(r.createElement)(p.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,onClick:function(){Object(u.isEmpty)(t)?O(Object(a.__)("Name is required.","wp-marketing-automations")):Object(u.isEmpty)(c)?O(Object(a.__)("Please select field to export.","wp-marketing-automations")):(Object(u.isEmpty)(l)||Object(B.l)(l,"/",j),i(2))}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))},Tn=n(47),An=n(33);function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Dn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $n=Object(Tn.a)(Object(l.Ab)()).formatAmount,Gn=function(e){var t=e.setContactCount,n=e.queryFilters,c=void 0===n?{}:n,o=function(e){var t=Object(u.isEmpty)(e.country)?"":M[e.country],n=Object(l.tc)([e.city,e.state,t],", ");return Object(u.isEmpty)(Object(u.trim)(n))?"":n},m=function(e){var t=o(e);return e.country||t?Object(r.createElement)(d.a,{justify:"start"},!Object(u.isEmpty)(e.country)&&Object(r.createElement)(d.c,null,Object(r.createElement)(Se.a,{code:e.country,size:18})),Object(r.createElement)(d.c,null,t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",null,o(e)),Object(r.createElement)("br",null)))):"-"},b=function(e){return Object(r.createElement)(An.a,{href:"admin.php?page=autonami&path=/contact/"+e.id,className:"bwf-a-no-underline"},Object(r.createElement)(Ie.a,{contact:e,hideJoiningDate:!0}))},f=function(e){return Object(r.createElement)("div",{className:"bwf-c-contact-details-cell"},e.email&&Object(r.createElement)(d.a,{justify:"start",align:"top"},Object(r.createElement)(d.c,null,Object(r.createElement)(g.a,{icon:"mail"})),Object(r.createElement)(d.c,null,Object(r.createElement)(An.a,{href:"mailto:"+e.email,className:"bwf-a-no-underline",type:"external"},e.email))),e.phone&&Object(r.createElement)(d.a,{justify:"start",align:"top"},Object(r.createElement)(d.c,null,Object(r.createElement)(g.a,{icon:"phone"})),Object(r.createElement)(d.c,null,Object(r.createElement)(An.a,{href:"tel:"+e.phone,className:"bwf-a-no-underline",type:"external"},e.phone))))},p=Object(O.a)(),w=p.getPageNumber,y=p.getPerPageCount,v=p.getTotalCount,h=p.getLoading,_=p.getContacts,E=Object(j.a)(),k=E.fetch,S=E.setStateProp;e.query;Object(r.useEffect)((function(){return S("limit",10),function(){return S("limit",25)}}),[]);var N=_(),C=w(),P=y(),x=v(),I=h(),T=Fn(Object(r.useState)(!0),2),A=T[0],F=T[1];Object(r.useEffect)((function(){A&&x>0&&F(!1),t(x)}),[x]);var D=[{key:"contact",label:Object(a.__)("Contact","wp-marketing-automations"),isLeftAligned:!0,required:!0},{key:"contact_details",label:Object(a.__)("Details","wp-marketing-automations"),isLeftAligned:!0}];Object(l.sc)()?(D.push({key:"total_spent",label:Object(a.__)("Total Spent","wp-marketing-automations"),isLeftAligned:!0}),D.push({key:"last_order",label:Object(a.__)("Last Order","wp-marketing-automations"),isLeftAligned:!0})):D.push({key:"column_location",label:Object(a.__)("Location","wp-marketing-automations"),isLeftAligned:!0});var $=function(e){var t=e.wc,n=t.total_order_count,c=t.total_order_value;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-c-listing-total-spent"},c&&n?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},$n(c)," |"," ",n," ",parseInt(n)>1?Object(a.__)("orders","wp-marketing-automations"):Object(a.__)("order","wp-marketing-automations")):"-"))},G=function(e){var t=e.wc.l_order_date;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,t&&"0000-00-00"!=t?Object(r.createElement)("div",{className:"bwf-c-total-spent-amount"},Object(l.ib)(t)):"-"))},B=N.map((function(e){var t=function(e){return Object(u.merge)({id:0,email:"-",first_name:"",last_name:"",creation_date:"",fields:{marketing_status:"0",first_order_date:"",country:"",city:"",state:"",phone:""},wc:{id:1,l_order_date:"",total_order_count:0,total_order_value:0,total_purchased_items:0}},e)}(e),n=[{display:b(t),value:Object(l.tc)([t.first_name,t.last_name]," ")},{display:f(t),value:"'".concat(Object(a.__)("Email","wp-marketing-automations"),": ").concat(t.email,", ").concat(Object(a.__)("Phone","wp-marketing-automations"),": ").concat(t.phone)}];return Object(l.sc)()?(n.push({display:$(t),value:""}),n.push({display:G(t),value:""})):n.push({display:m(t),value:o(t)}),n})),L=function(e){e!==P&&k(c,0,e,!0,!1,"",!1)},z=i()("bwfcrm-contacts-list",{"has-search":!0}),U=parseInt(x)>0?" ("+parseInt(x)+")":"";return Object(r.createElement)(s.a,{className:z,title:Object(a.__)("Contacts ","wp-marketing-automations")+U,rows:B,headers:D,query:{paged:C},rowsPerPage:P,totalRows:x,isLoading:I,onPageChange:function(e,t){k(c,(e-1)*P,P,!0,!1,"",!1)},onQueryChange:function(e){return"per_page"!==e?function(){}:L},showMenu:!1,emptyMessage:Object(a.__)("No contacts found","wp-marketing-automations")})},Bn=n(210),Mn=["page","path","s","filter"];var Ln=function(e){var t=e.setStep,n=e.setExportFilter,c=e.contactCount,o=e.setContactCount,i=Object(z.a)(!0,!0),s=i.loading,m=void 0===s||s,b=i.filters,f=void 0===b?{}:b,d=Object(B.i)(),O=d.page,w=d.path,y=(d.s,d.filter,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(d,Mn)),v=Object(j.a)(),g=Object(r.useRef)(y),h=v.fetch;Object(r.useEffect)((function(){h(y,0,10,!0,!1,"",!1)}),[]),Object(r.useEffect)((function(){Object(l.zc)(y,g.current)||h(y,0,10,!0,!1,"",!1),g.current=y}),[y]);var _=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading bwf-p-20"},Object(r.createElement)("div",{className:"bwf-bulk-action-step-loading"},Object(r.createElement)("div",{className:"bwf-filter-placeholder"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-36"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-300"}),Object(r.createElement)("br",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-400"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-display-flex bwf-space-between"},Object(r.createElement)("div",null),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-btn bwf-h-36 bwf-w-90"}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-w-150"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-15"})),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(Bn.a,{numberOfRows:5,headers:[{key:"2",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"3",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))},{key:"4",label:Object(r.createElement)("div",{className:"bwf-w-210"},Object(r.createElement)("div",{className:"bwf-placeholder-temp no-margin"}))}]})))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-36"})));return m?Object(r.createElement)(r.Fragment,null,_):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-contact-export-step-two"},Object(r.createElement)("div",{className:"bwf-export-filter-wrapper"},Object(r.createElement)("div",{className:"bwf-display-flex bwf-mb-16",style:{justifyContent:"space-between"}},Object(r.createElement)("div",{className:"bwf-h3 bwf-w-300"},Object(a.__)("Segment Contacts","wp-marketing-automations")),Object(r.createElement)(U.c,{addAdvance:!1})),Object(r.createElement)("div",{className:"bwf-p-0"},Object(r.createElement)(R.a,{siteLocale:"en-US",currency:Object(l.sc)()?bwfcrm_contacts_data.currency:{},config:{title:Object(a.__)("Select Rules","wp-marketing-automations"),filters:f,footerComponent:function(e){return Object(r.createElement)(U.a,{filter:e.data,config:e.config})},enableGrouping:!0},path:"/contacts",query:d}))),Object(r.createElement)("div",{className:"bwf-export-table-wrapper"},Object(r.createElement)(Gn,{setContactCount:o,queryFilters:y}))),Object(r.createElement)("div",{className:"bwf-display-flex bwfcrm-export-buttons"},Object(r.createElement)(p.Button,{className:"bwfcrm-export-prev bwf-display-flex",isSecondary:!0,onClick:function(){Object(u.isEmpty)(y)||Object(B.l)({page:O,path:w},"/",{}),n(y),t(1)}},Object(r.createElement)("span",null,Object(a.__)("Previous","wp-marketing-automations"))),Object(r.createElement)(p.Button,{className:"bwfcrm-export-next bwf-display-flex",isPrimary:!0,disabled:!(c>0),onClick:function(){Object(u.isEmpty)(y)||Object(B.l)({page:O,path:w},"/",{}),n(y),c>0&&t(3)}},Object(r.createElement)("span",null,Object(a.__)("Next","wp-marketing-automations")))))};function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Un(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Un(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Rn=function(e){var t=e.setAdd,n=zn(Object(r.useState)(!1),2),c=n[0],o=(n[1],zn(Object(r.useState)(1),2)),i=o[0],l=o[1],s=zn(Object(r.useState)(!1),2),u=s[0],m=s[1],b=zn(Object(r.useState)(""),2),f=b[0],d=b[1],O=zn(Object(r.useState)([]),2),j=O[0],w=O[1],y=zn(Object(r.useState)([]),2),v=y[0],g=y[1],h=zn(Object(r.useState)(0),2),_=h[0],E=h[1],k=function(e){switch(e){case 1:return Object(r.createElement)(In,{title:f,setTitle:d,selected:j,expfilter:v,setSelected:w,setStep:l});case 2:return Object(r.createElement)(Ln,{setStep:l,setExportFilter:g,contactCount:_,setContactCount:E});case 3:return Object(r.createElement)(en,{title:f,fields:j,expfilter:v,contactCount:_,setPending:m,setAdd:t})}},S=[{key:1,label:Object(a.__)("Fields","wp-marketing-automations"),content:k(1)},{key:2,label:Object(a.__)("Contacts","wp-marketing-automations"),content:k(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:k(3)}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Modal,{onRequestClose:function(){return t(!1)},className:"bwf-admin-modal bwf-admin-modal-xxl bwf-export-add-modal",title:Object(a.__)("Create Export","wp-marketing-automations"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-crm-export-init"},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)($.a,null)):Object(r.createElement)(Mt.a,{steps:S,currentStep:i,isPending:u}))))};function qn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Wn=function(e){var t=e.setExport,n=qn(Object(r.useState)(!1),2),c=n[0],o=n[1];Object(r.useEffect)((function(){Object(l.m)(Object(a.__)("Export Contacts","wp-marketing-automations"))}),[]);var i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(g.a,{icon:"export",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(a.__)("Export your contacts to CSV file.","wp-marketing-automations")}},{type:"buttons",data:{buttons:[{text:Object(a.__)("Start Exporting","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(l.cc)()&&o(!0)}}]}}];return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-export-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-export-modal-header"},Object(r.createElement)("div",{className:"bwf-export-modal-title"},Object(a.__)("Export Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-display-flex gap-24"},!c&&Object(l.cb)()&&Object(r.createElement)(p.Button,{variant:"primary",className:"bwf-add-contact-export-btn",onClick:function(){return o(!0)},isBusy:!1,disabled:!1},Object(a.__)("Create Export","wp-marketing-automations")),Object(r.createElement)("div",{onClick:function(){Object(l.m)(Object(a.__)("Contacts","wp-marketing-automations")),Object(B.l)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer",marginRight:"-10px"}},Object(r.createElement)(g.a,{icon:"close"})))),c&&Object(r.createElement)(Rn,{setAdd:o}),Object(l.cb)()?Object(r.createElement)(dn,{setAdd:o,isAdd:c}):Object(r.createElement)(Te.a,{data:i}))};n(1168);function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Kn=["getStateProp"];function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Hn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jn=function(){var e=Object(Et.a)("importerReducer"),t=e.getStateProp;return Qn(Qn({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Kn)),{},{showBackButton:function(){return t("showBackButton")},getExistingImports:function(){return t("existingImports")}})};function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var er=["fetch","setStateProp"];function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Xn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ar,cr,or,ir,lr=function(){var e=Object(It.a)("importerReducer"),t=e.fetch,n=e.setStateProp;return nr(nr({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,er)),{},{showBackButton:function(e){return n("showBackButton",e)},fetch:function(){return t("GET",Object(l.B)("/import/processes"))}})},sr=n(7);function ur(){return(ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var mr,br,fr=function(e){return sr.createElement("svg",ur({id:"wlm_svg__WishList_Member","data-name":"WishList Member",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 532.46 217.17"},e),ar||(ar=sr.createElement("defs",null,sr.createElement("style",null,".wlm_svg__cls-1{fill:#1e7fc0}.wlm_svg__cls-2{fill:#333}"))),cr||(cr=sr.createElement("g",{id:"wlm_svg__member"},sr.createElement("path",{className:"wlm_svg__cls-1",d:"M238.05 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.69-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.4 10.19l-.46 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.78 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.34-8.82l2.6-8.16h7.27l1.31 24.55h-5.39zM270.09 218.81h-9v5.84h10.1v4.55H255.5v-24.55h15.13v4.55h-9.57v5.11h9zM303.08 219.81c-.11-3-.22-6.52-.21-10.12h-.1c-.78 3.15-1.82 6.64-2.74 9.53l-3 9.58h-4.31l-2.65-9.49c-.79-2.89-1.6-6.38-2.21-9.62h-.08c-.12 3.34-.26 7.14-.41 10.19l-.45 9.32h-5.14l1.57-24.55h7.4l2.4 8.2c.77 2.82 1.53 5.9 2.08 8.78h.12c.67-2.84 1.5-6.08 2.33-8.82l2.61-8.16h7.26l1.32 24.55h-5.39zM320.53 205a45.06 45.06 0 017.16-.52c3.39 0 5.47.33 7.27 1.37a5.35 5.35 0 012.92 4.84c0 2.16-1.26 4.2-4 5.23v.08a6.11 6.11 0 014.89 6 6.5 6.5 0 01-2.56 5.21c-1.8 1.45-4.76 2.24-9.65 2.24a41.31 41.31 0 01-6-.37zm5.5 9.4h1.8c2.94 0 4.48-1.22 4.48-3s-1.42-2.85-3.93-2.85a12.1 12.1 0 00-2.35.17zm0 10.87a13.63 13.63 0 002.13.1c2.52 0 4.74-1 4.74-3.56s-2.2-3.44-5-3.44H326zM364.49 218.81h-9v5.84h10.1v4.55h-15.68v-24.55H365v4.55h-9.57v5.11h9zM376.73 205a47.35 47.35 0 017.38-.52c3.65 0 6.2.55 7.95 1.94a6.22 6.22 0 012.27 5.15 6.5 6.5 0 01-4.33 6v.12c1.7.69 2.66 2.31 3.28 4.57a71.49 71.49 0 002 6.93h-5.68a30.77 30.77 0 01-1.69-5.72c-.69-3.07-1.72-3.89-4-3.92h-1.65v9.64h-5.51zm5.51 10.56h2.17c2.76 0 4.4-1.4 4.4-3.54s-1.54-3.39-4.07-3.41a11.35 11.35 0 00-2.5.19z",transform:"translate(-39.77 -12.28)"}))),or||(or=sr.createElement("g",{id:"wlm_svg__WishList"},sr.createElement("path",{className:"wlm_svg__cls-2",d:"M64.62 180L39.77 75h25.41l8 43.21c2.24 12.5 4.42 26.12 6.1 36.71h.32c1.69-11.4 4.2-24 6.85-37L95.4 75h25.21l8.39 44.3c2.24 12.24 4 23.45 5.54 35.07h.32c1.64-11.7 3.85-23.87 6.17-36.46L149.51 75h24.12l-27.06 105h-25.63L112 134.77c-2.1-10.5-3.74-20.4-5.06-32.29h-.31c-1.78 11.81-3.47 21.77-6 32.36l-10 45.16zM180.94 180v-76.26h23.73V180zM218.57 159.31a46.05 46.05 0 0020.31 5.69c7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.07-25.06 31-25.06 8.92 0 16.8 2.1 21.46 4.44l-4.12 16.32a38.83 38.83 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.51 12.34 20.61 23.45 0 14.22-11.1 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM279.32 69.41h23.73v43.51h.31a26.93 26.93 0 019.28-7.87A26.39 26.39 0 01325 102c15.12 0 26.7 10.48 26.7 33.46V180h-23.76v-41.91c0-10-3.45-16.89-12.24-16.89a12.46 12.46 0 00-11.88 8.37 14.45 14.45 0 00-.77 5.18V180h-23.73zM359.57 75h23.72v85.05H425V180h-65.43zM432.35 180v-76.26h23.72V180zM468 159.31c4.31 2.65 13.42 5.66 20.31 5.66 7.15 0 10.21-2.4 10.21-6.29s-2.43-5.86-11.18-8.81c-15.85-5.21-21.81-13.83-21.72-22.78 0-14.31 12.08-25.06 31-25.06 8.92 0 16.81 2.1 21.47 4.44l-4.13 16.32a38.79 38.79 0 00-16.51-4.3c-5.78 0-9.09 2.3-9.09 6.14 0 3.65 3 5.57 12.36 8.8 14.46 4.91 20.52 12.34 20.61 23.45 0 14.22-11.09 24.71-32.93 24.71-9.93 0-18.86-2.25-24.67-5.37zM555.18 82v21.73h17.05v17.48h-17.05v27.61c0 9.19 2.28 13.43 9.35 13.43a30.89 30.89 0 007-.71l.19 18c-3.06 1.1-8.72 2-15.35 2-7.66 0-14-2.67-17.86-6.62-4.4-4.51-6.55-11.76-6.55-22.58v-31.12h-10.08v-17.48H532V87.37z",transform:"translate(-39.77 -12.28)"}))),ir||(ir=sr.createElement("path",{id:"wlm_svg__bounce",className:"wlm_svg__cls-1",d:"M456.86 82a13.41 13.41 0 01-13.4 13.5c-7.93 0-13.59-7-13.53-13.13.08-8 6.8-14.15 13.72-13.64 6.8-.56 13.24 5.85 13.21 13.27zm-33.32-7S302.47-38.88 195.48 88.11c0 0-36.78-75.63-119.47-74.84 0 0 71.11-13.4 120.07 58.58 0 0 106.11-125.65 242.11-10.49 0 0-13.52-.85-14.65 13.64z",transform:"translate(-39.77 -12.28)"})))};function pr(){return(pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var dr=function(e){return sr.createElement("svg",pr({xmlns:"http://www.w3.org/2000/svg",width:400,height:90,viewBox:"20 20 700 155",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:1.414},e),mr||(mr=sr.createElement("path",{d:"M135.1 105.3c-1 0-2 .1-3 .2l-14.4-25.9c3.2-3.8 5.1-8.7 5.1-14 0-12.1-9.8-21.9-21.9-21.9-12.1 0-21.9 9.9-21.9 21.9 0 5.2 1.8 10 4.9 13.8l-15 26.2c-1.1-.2-2.2-.3-3.3-.3-12.1 0-21.9 9.8-21.9 21.9 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-5.2-1.8-10-4.9-13.8l15-26.2c1.1.2 2.2.3 3.3.3 1 0 2-.1 3-.2l14.4 25.9c-3.2 3.8-5.1 8.7-5.1 14 0 12.1 9.8 21.9 21.9 21.9 12.1 0 21.9-9.8 21.9-21.9 0-12.1-9.8-21.9-21.9-21.9zm-34.2-47.2c4.1 0 7.5 3.4 7.5 7.5s-3.4 7.5-7.5 7.5-7.5-3.4-7.5-7.5 3.4-7.5 7.5-7.5zm-35.3 76.6c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.4 7.5-7.5 7.5zm69.5 0c-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5 7.5 3.4 7.5 7.5-3.3 7.5-7.5 7.5z",fill:"#e34f43",fillRule:"nonzero"})),br||(br=sr.createElement("g",{fill:"#2d2d2d",fillRule:"nonzero"},sr.createElement("path",{d:"M205.5 64h25.2l21.6 68h-20.6l-3.6-12.7h-22.5L202 132h-18.2l21.7-68zm3.8 42h14.9l-7.4-26.2-7.5 26.2zM258.1 93.9h-6.3V82.3h6.3v-3.8c0-12.4 7.6-18.2 19.4-18.2 3.1 0 5.4.4 7.6 1v12.5c-1.2-.4-2.7-.7-4.6-.7-3.8 0-5.5 2.3-5.5 5.4v3.8h14.5v-4.4c0-12.4 7.7-18.3 19.5-18.3 3.1 0 5.3.4 7.5 1v12.5c-1.2-.4-2.5-.6-4.5-.6-3.9 0-5.5 2.2-5.5 5.4v4.4h10v11.6h-10V132h-17V93.9H275V132h-16.9V93.9zM320.5 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM347.5 60.4h16.9V132h-16.9zM372.7 68.8c0-5 4-8.8 9.3-8.8 5.3 0 9.4 3.8 9.4 8.8 0 5-4.1 8.8-9.4 8.8-5.3-.1-9.3-3.8-9.3-8.8zm.9 13.5h17V132h-17V82.3zM396.7 118.2c0-11.7 9.9-16.3 26.4-16.3h4.8v-1.1c0-4.8-1.1-7.9-6.6-7.9-4.7 0-6.4 2.8-6.8 5.9h-16c.8-12 10.2-17.9 23.8-17.9 13.7 0 22.4 5.6 22.4 18.8V132h-16.6v-5.8c-2.4 3.6-6.8 6.9-14.7 6.9-8.8.1-16.7-4.3-16.7-14.9zm31.2-3.6v-3h-4.5c-6.8 0-9.9 1.3-9.9 5.4 0 2.9 1.9 4.7 5.9 4.7 4.9 0 8.5-2.8 8.5-7.1zM455 116.1V93.9h-6V82.3h6V71.9h17v10.4h9.8v11.6H472v20.5c0 3.6 1.8 5.2 5 5.2 1.9 0 3.3-.3 4.9-.9v12.9c-2.2.6-5.4 1.4-9.4 1.4-11.3.2-17.5-5.2-17.5-16.9zM484.8 107.8v-.8c0-16 11.9-26.1 26.9-26.1 13.6 0 25.3 7.8 25.3 25.7v4.5h-35c.5 6.6 4.3 10.4 10.4 10.4 5.6 0 8-2.6 8.7-5.9h16c-1.5 11.2-10.2 17.6-25.2 17.6-15.7 0-27.1-9.2-27.1-25.4zm35.6-6.3c-.3-6-3.2-9.3-8.8-9.3-5.1 0-8.7 3.3-9.5 9.3h18.3zM536.8 64h19.7l8.8 42.4 9.1-42.4h17.3l9.9 42.8 9.2-42.8h18.1L613 132h-20.4l-10.5-43.2-10.4 43.2h-19l-15.9-68zM634.6 64h25.9c18.6 0 27.3 8.3 27.3 22.7v.4c0 14.3-9.6 22-26.4 22H654V132h-19.4V64zm25 31.8c6.3 0 9.6-2.9 9.6-8.6v-.4c0-5.8-3.4-8.2-9.5-8.2H654v17.1h5.6v.1z"}))))},Or=n(85),jr=n(1201),wr=n(380);n(1266);function yr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return vr(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(vr(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,vr(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,vr(m,"constructor",s),vr(s,"constructor",l),l.displayName="GeneratorFunction",vr(s,a,"GeneratorFunction"),vr(m),vr(m,a,"Generator"),vr(m,r,(function(){return this})),vr(m,"toString",(function(){return"[object Generator]"})),(yr=function(){return{w:c,m:b}})()}function vr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(vr=function(e,t,n,r){function c(t,n){vr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function gr(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Er=function(e){var t,n=e.requestData,c=e.headersData,o=e.setImport,i=c.import_id,s=hr(Object(r.useState)(null),2),m=s[0],b=s[1],f=hr(Object(r.useState)(!0),2),d=f[0],O=f[1],j=hr(Object(r.useState)({loading:!1,status:!1}),2),w=j[0],v=j[1],g=m&&"log"in m?m.log:{},h=g.skipped,E=void 0===h?[]:h,k=g.failed,S=void 0===k?[]:k,N=g.succeed,C=void 0===N?[]:N,P=hr(Object(r.useState)(null),2),x=P[0],I=P[1],T=lr().showBackButton,A=hr(Object(r.useState)(!1),2),F=A[0],D=A[1],G=hr(Object(r.useState)(!1),2),B=G[0],M=G[1],L=hr(Object(r.useState)(!1),2),z=L[0],U=L[1],R=function(){var e,t=(e=yr().m((function e(){var t,r,a,c,o=arguments;return yr().w((function(e){for(;;)switch(e.p=e.n){case 0:return t=o.length>0&&void 0!==o[0]&&o[0],e.p=1,M(!0),r=n&&"useExisting"in n&&n.useExisting?{}:n,!n.useExisting&&(r.start_import=t),e.n=2,y()({method:"POST",data:r,path:Object(l.B)("/import/csv/status/".concat(i))});case 2:a=e.v,b(a.result),a.result&&"status"in a.result&&"success"===a.result.status&&(U(!0),T(!0),D(!0)),O(!1),M(!1),e.n=4;break;case 3:e.p=3,c=e.v,T(!0),I(c),O(!1),M(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){gr(c,r,a,o,i,"next",e)}function i(e){gr(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(zt.a)((function(){B||z||!Object(u.isEmpty)(x)||R()}),5e3),Object(r.useEffect)((function(){return T(!1),window.scrollTo(0,0),R(!0),function(){T(!0),O(!1)}}),[]),d?Object(r.createElement)($.a,null):x||m&&!1 in m?Object(r.createElement)(_.a,{status:"error",className:"bwf-ml-16 bwf-mr-16"},x&&"message"in x?x.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):m&&"percent"in m?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:parseInt(m.percent),text:"".concat(m.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(r.createElement)("p",null,"Skipped: ",parseInt(E)>0?E:0,", Failed:"," ",parseInt(S)>0?S:0,", Success:"," ",parseInt(C)>0?C:0)),F&&Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!m&&!!m.has_log_file&&Object(r.createElement)(r.Fragment,null,-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(r.createElement)("span",{onClick:function(){v({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),v({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer",marginLeft:"10px"},title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))):Object(r.createElement)("a",{target:"_blank",href:Object(l.xb)()+"/wp-json"+Object(l.B)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.G)())),title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))),Object(r.createElement)(ke.a,{modalTitle:null!==(t=w.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:w.confirmText,deleteEntityName:w.deleteEntityName,confirmButtonText:w.buttonConfirm,cancelButtonText:w.buttonCancel,onConfirm:w.onConfirm,isLoading:w.loading,successMessage:w.success,confirmDescription:w.confirmDescription,errorMessage:w.error,onRequestClose:function(){return v({status:!1})},isOpen:w.status,isDelete:!w.hasOwnProperty("isDelete")||w.isDelete}))):null};function kr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Sr(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Sr(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Sr(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Sr(m,"constructor",s),Sr(s,"constructor",l),l.displayName="GeneratorFunction",Sr(s,a,"GeneratorFunction"),Sr(m),Sr(m,a,"Generator"),Sr(m,r,(function(){return this})),Sr(m,"toString",(function(){return"[object Generator]"})),(kr=function(){return{w:c,m:b}})()}function Sr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Sr=function(e,t,n,r){function c(t,n){Sr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Nr(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xr=function(e){Object(l.m)(Object(a.__)("CSV Importer","wp-marketing-automations"));var t=Cr(Object(r.useState)(null),2),n=t[0],c=t[1],o=Cr(Object(r.useState)(null),2),i=o[0],s=o[1],u=Cr(Object(r.useState)(null),2),m=u[0],b=u[1],f=Cr(Object(r.useState)(!1),2),d=f[0],O=f[1],j=Object(r.useContext)(l.h),w=(0,Jn().getExistingImports)().csv,v=e.step,g=e.setImport,h=function(){var e,t=(e=kr().m((function e(){var t,r,o,i;return kr().w((function(e){for(;;)switch(e.p=e.n){case 0:return O(!0),e.p=1,(t=new FormData).append("csv",n),r=1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.4.0")?"/import/csv-upload":"/import/csv/upload",e.n=2,y()({method:"POST",body:t,path:Object(l.B)(r)});case 2:o=e.v,s(o.result),e.n=4;break;case 3:e.p=3,i=e.v,c(null),j(i&&"message"in i?i.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 4:Object(l.Nb)(j,3e3),O(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Nr(c,r,a,o,i,"next",e)}function i(e){Nr(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&h()}),[n]),Object(r.useEffect)((function(){w&&(s({import_id:w}),b({useExisting:!0}))}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==v&&!w&&!n&&!d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(wr.a,{onFileSelected:function(e){return c(e)},filetypeArray:["text/csv","text/plain","application/csv","text/comma-separated-values","application/excel","application/vnd.ms-excel","application/vnd.msexcel","text/anytext","application/octet-stream","application/txt"],btnLabel:Object(a.__)("Drop your CSV file here OR","wp-marketing-automations")})),d&&Object(r.createElement)($.a,null),2==v&&i&&"import_id"in i&&!m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)(jr.a,{buttonAlignClass:"bwf-crm-btn-right-alignment",headersData:i,onRequestImport:function(t){b(t),e.setStep(3)},contactHeaderText:Object(a.__)("Contact Fields","wp-marketing-automations"),updateExistingText:Object(a.__)("Update existing contact status","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf_clear_24"})),2==v&&!d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations")))),3==v&&m&&i&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(Er,{requestData:m,setStep:e.setStep,setImporter:e.setImporter,headersData:i,setImport:g}))))};n(1267);function Ir(e){return function(e){if(Array.isArray(e))return Fr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||Ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){if(e){if("string"==typeof e)return Fr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fr(e,t):void 0}}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Dr=function(e){var t=e.roles,n=void 0===t?{}:t,c=e.onRolesSelected,o=Tr(Object(r.useState)(Object.keys(n)),2),i=o[0],s=o[1],m=Tr(Object(r.useState)(!0),2),b=m[0],f=(m[1],Tr(Object(r.useState)(!1),2)),d=f[0],O=f[1],j=Tr(Object(r.useState)(!1),2),w=j[0],y=j[1],v=Tr(Object(r.useState)([]),2),g=v[0],h=v[1],_=Tr(Object(r.useState)([]),2),E=_[0],k=_[1],S=Tr(Object(r.useState)(1),2),N=S[0],C=S[1],P=Object(l.N)();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("User Roles","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-crm-import-checkbox-3col"},n&&Object.keys(n).map((function(e){return Object(r.createElement)(W.a,{checked:i.includes(e),key:e,label:n[e],onChange:function(t){return function(e,t){s(e?[].concat(Ir(i),[t]):i.filter((function(e){return e!==t})))}(t,e)}})})))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(lt.a,{onTagsChange:h,selected:g}),Object(r.createElement)(st.a,{onListsChange:k,selected:E})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){C(e.target.value)},value:Object(u.isEmpty)(N)?"":N},Object.keys(P).map((function(e){return Object(r.createElement)("option",{key:e,value:e},P[e])}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(p.ToggleControl,{checked:d,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return O(e)}}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:y})),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(r.createElement)(p.Button,{disabled:0===i.length,isPrimary:!0,onClick:function(){return c({roles:i,tags:g.map((function(e){return{id:e.key,value:e.label}})),lists:E.map((function(e){return{id:e.key,value:e.label}})),marketing_status:b,update_existing:d,disable_events:w,imported_contact_status:N})}},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function $r(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Gr(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Gr(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Gr(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Gr(m,"constructor",s),Gr(s,"constructor",l),l.displayName="GeneratorFunction",Gr(s,a,"GeneratorFunction"),Gr(m),Gr(m,a,"Generator"),Gr(m,r,(function(){return this})),Gr(m,"toString",(function(){return"[object Generator]"})),($r=function(){return{w:c,m:b}})()}function Gr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Gr=function(e,t,n,r){function c(t,n){Gr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Br(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Lr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var zr=function(e){var t,n=e.requestData,o=e.setImport,i=Mr(Object(r.useState)(!1),2),s=i[0],m=i[1],b=Mr(Object(r.useState)(null),2),f=b[0],d=b[1],O=Mr(Object(r.useState)({loading:!1,status:!1}),2),j=O[0],w=O[1],v=Mr(Object(r.useState)(n&&"importId"in n?parseInt(n.importId):0),2),g=v[0],h=v[1],E=f&&"log"in f?f.log:{},k=E.skipped,S=void 0===k?0:k,N=E.failed,C=void 0===N?0:N,P=E.succeed,x=void 0===P?0:P,I=Mr(Object(r.useState)(null),2),T=I[0],A=I[1],F=lr().showBackButton,D=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),$=Mr(Object(r.useState)(5e3),2),G=$[0],B=$[1],M=function(){var e,t=(e=$r().m((function e(){var t,r,a;return $r().w((function(e){for(;;)switch(e.p=e.n){case 0:return D++,e.p=1,t=parseInt(g)>0?{import_id:g}:n,parseInt(g)>0?t.start_import=!1:t.start_import=!0,e.n=2,y()({method:"POST",data:t,path:Object(l.B)("/import/wp/status")});case 2:r=e.v,d(r.result),h(parseInt(r.result.import_id)),r.result&&"status"in r.result&&"success"===r.result.status&&(B(null),F(!1),m(!0)),e.n=4;break;case 3:e.p=3,a=e.v,B(null),F(!1),A(a);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Br(c,r,a,o,i,"next",e)}function i(e){Br(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(zt.a)((function(){Object(u.isEmpty)(g)&&0!=D||M()}),G),Object(r.useEffect)((function(){return F(!0),window.scrollTo(0,0),function(){F(!1)}}),[]),T||f&&!1 in f?Object(r.createElement)(_.a,{status:"error"},T&&"message"in T?T.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(Lt.a,{progress:parseInt(f.percent),noStriped:!0,size:"sm",text:"".concat(f.percent,"% Completed")}),Object(r.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(S)>0?S:0,", Failed:"," ",parseInt(C)>0?C:0,", Success:"," ",parseInt(x)>0?x:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!f&&!!f.has_log_file&&Object(r.createElement)(r.Fragment,null,-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(r.createElement)("span",{onClick:function(){w({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),w({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer",marginLeft:"10px"},title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))):Object(r.createElement)("a",{target:"_blank",href:Object(l.xb)()+"/wp-json"+Object(l.B)("/importer-log/download/".concat(g,"?bwf-nonce=").concat(Object(l.G)())),title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations")))),Object(r.createElement)(ke.a,{modalTitle:null!==(t=j.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:j.confirmText,deleteEntityName:j.deleteEntityName,confirmButtonText:j.buttonConfirm,cancelButtonText:j.buttonCancel,onConfirm:j.onConfirm,isLoading:j.loading,successMessage:j.success,confirmDescription:j.confirmDescription,errorMessage:j.error,onRequestClose:function(){return w({status:!1})},isOpen:j.status,isDelete:!j.hasOwnProperty("isDelete")||j.isDelete})))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("p",{className:"bwf-p"},"Skipped: ",parseInt(S)>0?S:0,", Failed: ",parseInt(C)>0?C:0,", Success: ",parseInt(x)>0?x:0)))};function Ur(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Rr(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Rr(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Rr(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Rr(m,"constructor",s),Rr(s,"constructor",l),l.displayName="GeneratorFunction",Rr(s,a,"GeneratorFunction"),Rr(m),Rr(m,a,"Generator"),Rr(m,r,(function(){return this})),Rr(m,"toString",(function(){return"[object Generator]"})),(Ur=function(){return{w:c,m:b}})()}function Rr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Rr=function(e,t,n,r){function c(t,n){Rr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function qr(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Hr=function(e){Object(l.m)("WP Importer");var t=e.step,n=e.setImport,c=Vr(Object(r.useState)({}),2),o=c[0],i=c[1],s=Vr(Object(r.useState)(null),2),m=s[0],b=s[1],f=Vr(Object(r.useState)(!1),2),p=f[0],d=f[1],O=(0,Jn().getExistingImports)().wp,j=Object(r.useContext)(l.h),w=function(){var e,t=(e=Ur().m((function e(){var t,n;return Ur().w((function(e){for(;;)switch(e.p=e.n){case 0:return d(!0),e.p=1,e.n=2,y()({method:"GET",path:Object(l.B)("/import/wp/roles")});case 2:t=e.v,i(t.result),e.n=4;break;case 3:e.p=3,n=e.v,i(null),j(n&&"message"in n?n.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 4:Object(l.Nb)(j,3e3),d(!1);case 5:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){qr(c,r,a,o,i,"next",e)}function i(e){qr(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){O?b({importId:O}):w()}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},p&&Object(r.createElement)($.a,null),2==t&&!m&&o&&Object(u.size)(o)>0&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(Dr,{roles:o,setStep:e.setStep,setImporter:e.setImporter,onRolesSelected:function(t){b(t),e.setStep(3)}})),3==t&&m&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(zr,{setStep:e.setStep,requestData:m,setImporter:e.setImporter,setImport:n})))};n(1268);function Kr(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Yr(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Yr(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Yr(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Yr(m,"constructor",s),Yr(s,"constructor",l),l.displayName="GeneratorFunction",Yr(s,a,"GeneratorFunction"),Yr(m),Yr(m,a,"Generator"),Yr(m,r,(function(){return this})),Yr(m,"toString",(function(){return"[object Generator]"})),(Kr=function(){return{w:c,m:b}})()}function Yr(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Yr=function(e,t,n,r){function c(t,n){Yr(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Qr(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Xr=function(e){var t,n=e.importData,o=e.setImport,i=n.importId,s=Zr(Object(r.useState)(null),2),u=s[0],m=s[1],b=u&&"log"in u?u.log:{},f=b.skipped,d=void 0===f?0:f,O=b.failed,j=void 0===O?0:O,w=b.succeed,v=void 0===w?0:w,g=Zr(Object(r.useState)({loading:!1,status:!1}),2),h=g[0],_=g[1],E=Zr(Object(r.useState)(!1),2),k=E[0],S=E[1],N=Zr(Object(r.useState)(!1),2),C=N[0],P=N[1],x=function(){var e,t=(e=Kr().m((function e(){var t,n,r;return Kr().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t={start_import:!1,import_id:i},e.n=1,y()({method:"GET",path:Object(l.B)("/import/wc/status?"+Object(c.stringify)(t))});case 1:n=e.v,m(n.result),n.result&&"status"in n.result&&"success"===n.result.status&&n.result.percent>=100&&(S(!0),P(!0)),e.n=3;break;case 2:e.p=2,r=e.v,setError(r);case 3:return e.a(2)}}),e,null,[[0,2]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Qr(c,r,a,o,i,"next",e)}function i(e){Qr(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(zt.a)((function(){C||x()}),5e3),u?u&&"percent"in u?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:parseInt(u.percent),text:"".concat(u.percent,"% Completed")}),Object(r.createElement)("p",null,"Skipped: ",parseInt(d)>0?d:0,", Failed:"," ",parseInt(j)>0?j:0,", Success:"," ",parseInt(v)>0?v:0)),k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations")),!!u&&!!u.has_log_file&&Object(r.createElement)(r.Fragment,null,-1===Object(l.n)(bwfcrm_contacts_data.bwf_pro_version,"3.5.3")?Object(r.createElement)("span",{onClick:function(){_({status:!0,isDelete:!1,buttonConfirm:Object(a.__)("Upgrade Now","wp-marketing-automations"),onConfirm:function(){window.open("plugins.php?s=Funnelkit%20Automations","_blank"),_({status:!1})},title:Object(a.__)("Unable To Download File","wp-marketing-automations"),confirmDescription:Object(a.__)("FunnelKit Automation PRO version 3.5.3 or higher is required.","wp-marketing-automations")})},style:{cursor:"pointer",marginLeft:"10px"},title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))):Object(r.createElement)("a",{target:"_blank",href:Object(l.xb)()+"/wp-json"+Object(l.B)("/importer-log/download/".concat(i,"?bwf-nonce=").concat(Object(l.G)())),title:Object(a.__)("Download Error Log","wp-marketing-automations"),className:"bwf-a-no-underline",style:{marginLeft:"10px"},rel:"noreferrer"},Object(r.createElement)(p.Button,{isSecondary:!0},Object(a.__)("Download Error Log","wp-marketing-automations"))))),Object(r.createElement)(ke.a,{modalTitle:null!==(t=h.title)&&void 0!==t?t:Object(a.__)("Delete","wp-marketing-automations"),confirmText:h.confirmText,deleteEntityName:h.deleteEntityName,confirmButtonText:h.buttonConfirm,cancelButtonText:h.buttonCancel,onConfirm:h.onConfirm,isLoading:h.loading,successMessage:h.success,confirmDescription:h.confirmDescription,errorMessage:h.error,onRequestClose:function(){return _({status:!1})},isOpen:h.status,isDelete:!h.hasOwnProperty("isDelete")||h.isDelete}))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(d)>0?d:0,", Failed: ",parseInt(j)>0?j:0,", Success: ",parseInt(v)>0?v:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function ea(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return ta(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ta(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ta(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,ta(m,"constructor",s),ta(s,"constructor",l),l.displayName="GeneratorFunction",ta(s,a,"GeneratorFunction"),ta(m),ta(m,a,"Generator"),ta(m,r,(function(){return this})),ta(m,"toString",(function(){return"[object Generator]"})),(ea=function(){return{w:c,m:b}})()}function ta(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(ta=function(e,t,n,r){function c(t,n){ta(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function na(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ra(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){na(c,r,a,o,i,"next",e)}function i(e){na(c,r,a,o,i,"throw",e)}o(void 0)}))}}function aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ca(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ca(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oa=function(e){Object(l.m)("WC Importer");var t=e.step,n=e.setImport,o=aa(Object(r.useState)({}),2),i=o[0],s=o[1],m=aa(Object(r.useState)(!0),2),b=m[0],f=m[1],d=aa(Object(r.useState)(null),2),O=d[0],j=d[1],w=aa(Object(r.useState)(!1),2),v=w[0],g=w[1],h=aa(Object(r.useState)(!0),2),_=h[0],E=(h[1],aa(Object(r.useState)(!1),2)),k=E[0],S=E[1],N=aa(Object(r.useState)([]),2),C=N[0],P=N[1],x=aa(Object(r.useState)([]),2),I=x[0],T=x[1],A=Object(r.useContext)(l.h),F=aa(Object(r.useState)(1),2),D=F[0],G=F[1],B=(0,Jn().getExistingImports)().wc,M=Object(l.N)(),L=function(){var t=ra(ea().m((function t(){var n,r,o,i,u=arguments;return ea().w((function(t){for(;;)switch(t.p=t.n){case 0:return n=u.length>0&&void 0!==u[0]&&u[0],t.p=1,r={start_import:n,tags:C.map((function(e){return{id:e.key,value:e.label}})),lists:I.map((function(e){return{id:e.key,value:e.label}})),marketing_status:_,update_existing:k,disable_events:v,imported_contact_status:D},t.n=2,y()({method:"GET",path:Object(l.B)("/import/wc/status?"+Object(c.stringify)(r))});case 2:o=t.v,s({importId:o.result.import_id}),e.setStep(3),t.n=4;break;case 3:t.p=3,i=t.v,s(null),A(i&&"message"in i?i.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations"));case 4:Object(l.Nb)(A,3e3),f(!1);case 5:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),z=function(){var e=ra(ea().m((function e(){return ea().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({method:"GET",path:Object(l.B)("/import/wc/get-orders")}).then((function(e){j(parseInt(e.result)),f(!1)}));case 1:return e.a(2)}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){parseInt(B)>0?(s({importId:B}),f(!1)):z()}),[]);return Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&b&&(Object(u.isEmpty)(i)||1===i.status)&&Object(r.createElement)($.a,null),2==t&&!b&&!Object(u.isNull)(O)&&(O>0?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},O+" "+Object(a.__)("paid orders are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_16"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(lt.a,{onTagsChange:P,selected:C}),Object(r.createElement)(st.a,{onListsChange:T,selected:I})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wc-status-select",onChange:function(e){G(e.target.value)},value:Object(u.isEmpty)(D)?"":D},Object.keys(M).map((function(e){return Object(r.createElement)("option",{key:e,value:e},M[e])}))),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)(p.ToggleControl,{checked:k,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return S(e)}}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger Automations (for Tag & List related Events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:v,onChange:g})),Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){e.setStep(3),f(!0),L(!0)}},Object(a.__)("Import","wp-marketing-automations"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-crm-importer-wc-wrap"},Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WooCommerce Customers","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_24"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("No Orders are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_20"})))),2==t&&!b&&Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){e.setStep(1),e.setImporter(null)}},Object(a.__)("Back","wp-marketing-automations"))),3==t&&b&&Object(r.createElement)($.a,null),3==t&&!b&&i&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)(Xr,{importData:i,setStep:e.setStep,setImporter:e.setImporter,setImport:n})))};n(1269);function ia(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return la(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(la(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,la(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,la(m,"constructor",s),la(s,"constructor",l),l.displayName="GeneratorFunction",la(s,a,"GeneratorFunction"),la(m),la(m,a,"Generator"),la(m,r,(function(){return this})),la(m,"toString",(function(){return"[object Generator]"})),(ia=function(){return{w:c,m:b}})()}function la(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(la=function(e,t,n,r){function c(t,n){la(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function sa(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ua(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){sa(c,r,a,o,i,"next",e)}function i(e){sa(c,r,a,o,i,"throw",e)}o(void 0)}))}}var ma=function(){return Object(Ne.useQuery)(["get-wlm-members-count"],ua(ia().m((function e(){var t;return ia().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({path:Object(l.B)("/import/wlm/get-members-count")});case 1:if((t=e.v).code&&200===t.code){e.n=2;break}throw new Error(Object(a.__)("Unable to load members count","wp-marketing-automations"));case 2:return e.a(2,parseInt(t.result))}}),e)}))))};function ba(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pa=Object(l.N)(),da=function(e){var t=e.onStartImport,n=e.setStep,c=e.setImporter,o=ma(),i=o.isLoading,s=o.data,m=void 0===s?0:s,b=o.isError,f=o.error,d=ba(Object(r.useState)(!1),2),O=d[0],j=d[1],w=ba(Object(r.useState)(!1),2),y=w[0],v=w[1],g=ba(Object(r.useState)([]),2),h=g[0],_=g[1],E=ba(Object(r.useState)([]),2),k=E[0],S=E[1],N=ba(Object(r.useState)(1),2),C=N[0],P=N[1],x=Object(r.useContext)(l.h),I=Object(r.useCallback)((function(){return t({tags:h.map((function(e){return{id:e.key,value:e.label}})),lists:k.map((function(e){return{id:e.key,value:e.label}})),update_existing:O,disable_events:y,imported_contact_status:C})}),[h,k,O,y,C,t]);return Object(r.useEffect)((function(){b&&(x("string"==typeof f?f:f&&f.message?f.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.Nb)(x,3e3))}),[b,f]),i?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)($.a,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("WishList Members","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},m+" "+Object(a.__)("members are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(lt.a,{onTagsChange:_,selected:h}),Object(r.createElement)(st.a,{onListsChange:S,selected:k})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){P(e.target.value)},value:Object(u.isEmpty)(C)?"":C},Object.keys(pa).map((function(e){return Object(r.createElement)("option",{key:e,value:e},pa[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(p.ToggleControl,{checked:O,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return j(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:y,onChange:v})),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment"},Object(r.createElement)(p.Button,{disabled:0===parseInt(m),isPrimary:!0,onClick:I},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){n(1),c(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Oa(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return ja(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(ja(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,ja(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,ja(m,"constructor",s),ja(s,"constructor",l),l.displayName="GeneratorFunction",ja(s,a,"GeneratorFunction"),ja(m),ja(m,a,"Generator"),ja(m,r,(function(){return this})),ja(m,"toString",(function(){return"[object Generator]"})),(Oa=function(){return{w:c,m:b}})()}function ja(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(ja=function(e,t,n,r){function c(t,n){ja(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function wa(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return va(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?va(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ga=function(e){var t=e.requestData,n=e.existingImport,o=(e.setStep,e.setImport),i=ya(Object(r.useState)(!1),2),s=i[0],m=i[1],b=ya(Object(r.useState)(null),2),f=b[0],d=b[1],O=ya(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),j=O[0],w=O[1],v=f&&"log"in f?f.log:{},g=v.skipped,h=void 0===g?0:g,E=v.failed,k=void 0===E?0:E,S=v.succeed,N=void 0===S?0:S,C=ya(Object(r.useState)(null),2),P=C[0],x=C[1],I=lr().showBackButton,T=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),A=ya(Object(r.useState)(5e3),2),F=A[0],D=A[1],$=ya(Object(r.useState)(!0),2),G=$[0],B=$[1],M=function(){var e,r=(e=Oa().m((function e(){var r,a,c;return Oa().w((function(e){for(;;)switch(e.p=e.n){case 0:return T++,e.p=1,r=parseInt(j)>0?{import_id:j}:t,G&&!n?(B(!1),r.start_import=!0):r.start_import=!1,e.n=2,y()({method:"POST",data:r,path:Object(l.B)("/import/wlm/status")});case 2:a=e.v,d(a.result),w(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(bwfcrm_contacts_data.is_wlm_active="1",D(null),I(!1),m(!0)),e.n=4;break;case 3:e.p=3,c=e.v,D(null),I(!1),x(c);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){wa(c,r,a,o,i,"next",e)}function i(e){wa(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(zt.a)((function(){Object(u.isEmpty)(j)&&0!=T||M()}),F),Object(r.useEffect)((function(){return I(!0),window.scrollTo(0,0),function(){I(!1)}}),[]),P||f&&!1 in f?Object(r.createElement)(_.a,{status:"error"},P&&"message"in P?P.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% Completed")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("p",{className:"bwf-t-center"},"Skipped: ",parseInt(h)>0?h:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(N)>0?N:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p bwf-t-center"},Object(a.__)("Skipped","wp-marketing-automations"),": ",parseInt(h)>0?h:0,",",Object(a.__)("Failed","wp-marketing-automations"),": ",parseInt(k)>0?k:0,",",Object(a.__)("Success","wp-marketing-automations"),": ",parseInt(N)>0?N:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ea=function(e){var t=e.step,n=e.setStep,c=e.setImporter,o=e.setImport;Object(l.m)("WLM Importer");var i=ha(Object(r.useState)(null),2),s=i[0],u=i[1],m=(0,Jn().getExistingImports)().wlm;return Object(r.useEffect)((function(){parseInt(m)>0&&(u({importId:m}),n(3))}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(da,{setStep:n,setImporter:c,onStartImport:function(e){u(e),n(3)}})),3==t&&s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(ga,{setStep:n,requestData:s,setImporter:c,existingImport:parseInt(m)>0,setImport:o})))};n(1270);function ka(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Sa(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Sa(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Sa(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Sa(m,"constructor",s),Sa(s,"constructor",l),l.displayName="GeneratorFunction",Sa(s,a,"GeneratorFunction"),Sa(m),Sa(m,a,"Generator"),Sa(m,r,(function(){return this})),Sa(m,"toString",(function(){return"[object Generator]"})),(ka=function(){return{w:c,m:b}})()}function Sa(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Sa=function(e,t,n,r){function c(t,n){Sa(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function Na(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ca(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Na(c,r,a,o,i,"next",e)}function i(e){Na(c,r,a,o,i,"throw",e)}o(void 0)}))}}var Pa=function(){return Object(Ne.useQuery)(["get-affwp-affiliate-count"],Ca(ka().m((function e(){var t;return ka().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,y()({path:Object(l.B)("/import/affwp/get-affiliate-count")});case 1:if((t=e.v).code&&200===t.code){e.n=2;break}throw new Error(Object(a.__)("Unable to load affiliate count","wp-marketing-automations"));case 2:return e.a(2,parseInt(t.result))}}),e)}))))};function xa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ia(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ia(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ta=Object(l.N)(),Aa=function(e){var t=e.onStartImport,n=e.setStep,c=e.setImporter,o=Pa(),i=o.isLoading,s=o.data,u=void 0===s?0:s,m=o.isError,b=o.error,f=xa(Object(r.useState)(!1),2),d=f[0],O=f[1],j=xa(Object(r.useState)(!1),2),w=j[0],y=j[1],v=xa(Object(r.useState)([]),2),g=v[0],h=v[1],_=xa(Object(r.useState)([]),2),E=_[0],k=_[1],S=xa(Object(r.useState)(1),2),N=S[0],C=S[1],P=Object(r.useContext)(l.h),x=Object(r.useCallback)((function(){return t({tags:g.map((function(e){return{id:e.key,value:e.label}})),lists:E.map((function(e){return{id:e.key,value:e.label}})),update_existing:d,disable_events:w,imported_contact_status:N})}),[g,E,d,w,N,t]);return Object(r.useEffect)((function(){m&&(P("string"==typeof b?b:b&&b.message?b.message:Object(a.__)("Unknown API Error","wp-marketing-automations")),Object(l.Nb)(P,3e3))}),[m,b]),i?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)($.a,null)):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wp-roles-wrap"},Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Configuration","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("AffiliateWP Affiliates","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},u+" "+Object(a.__)("affiliates are available for import.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf-crm-import-section"},Object(r.createElement)("div",{className:"bwf-h3"},Object(a.__)("Contact Profile","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-c-import-field"},Object(r.createElement)(lt.a,{onTagsChange:h,selected:g}),Object(r.createElement)(st.a,{onListsChange:k,selected:E})),Object(r.createElement)("div",{className:"bwf-heading7-new"},Object(a.__)("Status","wp-marketing-automations")),Object(r.createElement)("select",{className:"bwf-import-wp-status-select",onChange:function(e){C(e.target.value)}},Object.keys(Ta).map((function(e){return Object(r.createElement)("option",{key:e,value:e,selected:N==e},Ta[e])}))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)(p.ToggleControl,{checked:d,label:Object(a.__)("Update existing contact status","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",onChange:function(e){return O(e)}}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)(p.ToggleControl,{label:Object(a.__)("Trigger automations (for tag & list related events)","wp-marketing-automations"),className:"bwf-tooglecontrol-advance",checked:w,onChange:y})),Object(r.createElement)("div",{className:"bwf-form-buttons"},Object(r.createElement)("div",{className:"bwf-crm-btn-right-alignment",style:{bottom:"-60px"}},Object(r.createElement)(p.Button,{disabled:0===parseInt(u),isPrimary:!0,onClick:x},Object(a.__)("Import","wp-marketing-automations"))))),Object(r.createElement)("div",{className:"bwf-crm-importer-navigation",style:{marginTop:"15px"}},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back bwf-display-flex",isSecondary:!0,onClick:function(){n(1),c(null)}},Object(a.__)("Back","wp-marketing-automations"))))};function Fa(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function c(n,r,a,c){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return Da(s,"_invoke",function(n,r,a){var c,i,l,s=0,u=a||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,l=e,b.n=n,o}};function f(n,r){for(i=n,l=r,t=0;!m&&s&&!a&&t<u.length;t++){var a,c=u[t],f=b.p,p=c[2];n>3?(a=p===r)&&(l=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((a=n<2&&f<c[1])?(i=0,b.v=r,b.n=c[1]):f<p&&(a=n<3||c[0]>r||r>p)&&(c[4]=n,c[5]=r,b.n=p,i=0))}if(a||n>1)return o;throw m=!0,r}return function(a,u,p){if(s>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,l=p;(t=i<2?e:l)||!m;){c||(i?i<3?(i>1&&(b.n=-1),f(i,l)):b.n=l:b.v=l);try{if(s=2,c){if(i||(a="next"),t=c[a]){if(!(t=t.call(c,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);c=e}else if((t=(m=b.n<0)?l:n.call(r,b))!==o)break}catch(t){c=e,i=1,l=t}finally{s=1}}return{value:t,done:m}}}(n,a,c),!0),s}var o={};function i(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(Da(t={},r,(function(){return this})),t),m=s.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,Da(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=s,Da(m,"constructor",s),Da(s,"constructor",l),l.displayName="GeneratorFunction",Da(s,a,"GeneratorFunction"),Da(m),Da(m,a,"Generator"),Da(m,r,(function(){return this})),Da(m,"toString",(function(){return"[object Generator]"})),(Fa=function(){return{w:c,m:b}})()}function Da(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}(Da=function(e,t,n,r){function c(t,n){Da(e,t,(function(e){return this._invoke(t,n,e)}))}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(c("next",0),c("throw",1),c("return",2))})(e,t,n,r)}function $a(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function Ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ba(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ba(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ma=function(e){var t=e.requestData,n=e.existingImport,o=(e.setStep,e.setImport),i=Ga(Object(r.useState)(!1),2),s=i[0],m=i[1],b=Ga(Object(r.useState)(null),2),f=b[0],d=b[1],O=Ga(Object(r.useState)(t&&"importId"in t?parseInt(t.importId):0),2),j=O[0],w=O[1],v=f&&"log"in f?f.log:{},g=v.skipped,h=void 0===g?0:g,E=v.failed,k=void 0===E?0:E,S=v.succeed,N=void 0===S?0:S,C=Ga(Object(r.useState)(null),2),P=C[0],x=C[1],I=lr().showBackButton,T=(location&&location.search&&Object(c.parse)(location.search.substring(1)),0),A=Ga(Object(r.useState)(5e3),2),F=A[0],D=A[1],$=Ga(Object(r.useState)(!0),2),G=$[0],B=$[1],M=function(){var e,r=(e=Fa().m((function e(){var r,a,c;return Fa().w((function(e){for(;;)switch(e.p=e.n){case 0:return T++,e.p=1,r=parseInt(j)>0?{import_id:j}:t,G&&!n?(B(!1),r.start_import=!0):r.start_import=!1,e.n=2,y()({method:"POST",data:r,path:Object(l.B)("/import/affwp/status")});case 2:a=e.v,d(a.result),w(parseInt(a.result.import_id)),a.result&&"status"in a.result&&"success"===a.result.status&&(D(null),I(!1),m(!0)),e.n=4;break;case 3:e.p=3,c=e.v,D(null),I(!1),x(c);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){$a(c,r,a,o,i,"next",e)}function i(e){$a(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(zt.a)((function(){Object(u.isEmpty)(j)&&0!=T||M()}),F),Object(r.useEffect)((function(){return I(!0),window.scrollTo(0,0),function(){I(!1)}}),[]),P||f&&!1 in f?Object(r.createElement)(_.a,{status:"error"},P&&"message"in P?P.message:Object(a.__)("There are some technical difficulties while processing CSV Import","wp-marketing-automations")):f?f&&"percent"in f?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:parseInt(f.percent),text:"".concat(f.percent,"% ").concat(Object(a.__)("Completed","wp-marketing-automations"))}),Object(r.createElement)("p",null,"Skipped: ",parseInt(h)>0?h:0,", Failed:"," ",parseInt(k)>0?k:0,", Success:"," ",parseInt(N)>0?N:0)),s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-importer-back-button"},Object(r.createElement)(p.Button,{className:"bwf-crm-navigation-back",isPrimary:!0,onClick:function(){o(!1)}},Object(a.__)("Go To Contacts","wp-marketing-automations"))))):null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-crm-import-progress-wrap"},Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("h2",null,Object(a.__)("Import Progress","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-p bwf-p2"},Object(a.__)("Import has begun in the background. We will let you know when it completes.","wp-marketing-automations"))),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)(Lt.a,{noStriped:!0,size:"sm",progress:0,text:Object(a.__)("0% Completed","wp-marketing-automations")}),Object(r.createElement)("div",{className:"bwf-p"},"Skipped: ",parseInt(h)>0?h:0,", Failed: ",parseInt(k)>0?k:0,", Success: ",parseInt(N)>0?N:0)),Object(r.createElement)("div",{className:"bwf_clear_20"}))};function La(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return za(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?za(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ua=function(e){var t=e.step,n=e.setStep,c=e.setImporter,o=e.setImport;Object(l.m)(Object(a.__)("AFFWP Importer","wp-marketing-automations"));var i=La(Object(r.useState)(null),2),s=i[0],u=i[1],m=(0,Jn().getExistingImports)().affwp;return Object(r.useEffect)((function(){parseInt(m)>0&&(u({importId:m}),n(3))}),[]),Object(r.createElement)("div",{className:"bwf-crm-importer-wrap"},2==t&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Aa,{setStep:n,setImporter:c,onStartImport:function(e){u(e),n(3)}})),3==t&&s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Confirmation","wp-marketing-automations"))),Object(r.createElement)(Ma,{setStep:n,requestData:s,setImporter:c,existingImport:parseInt(m)>0,setImport:o})))};function Ra(){return(Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Va(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Va(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Wa=function(e){var t=e.setImport,n=Object(r.useContext)(l.h),c=qa(Object(r.useState)(null),2),o=c[0],i=c[1],s=qa(Object(r.useState)(!0),2),m=(s[0],s[1]),b=Jn(),f=(b.showBackButton,b.getLoading),d=b.getExistingImports,O=lr().fetch,j=f(),w=d(),y=qa(Object(r.useState)(1),2),v=y[0],h=y[1],_=qa(Object(r.useState)(!1),2),E=_[0];_[1];Object(r.useEffect)((function(){O(),m(!1),Object(l.m)(Object(a.__)("Import Contacts","wp-marketing-automations"))}),[]),Object(r.useEffect)((function(){w&&Object(u.size)(w)>0&&(i(Object.keys(w)[0]),h(3))}),[w]);var k=function(){var e=[{key:"csv",label:Object(a.__)("CSV","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-csv"}];return Object(l.mc)()||e.push({key:"wp",label:Object(a.__)("WordPress","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wp"}),Object(l.sc)()&&e.push({key:"wc",label:Object(a.__)("WooCommerce","wp-marketing-automations"),className:"bwf-crm-importer-button bwf-crm-importer-button-wc"}),Object(l.lc)()&&e.push({key:"wlm",label:Object(r.createElement)(r.Fragment,null,fr()," ",Object(a.__)("WishList Member","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-wlm"}),Object(l.Pb)()&&e.push({key:"affwp",label:Object(r.createElement)(r.Fragment,null,dr()," ",Object(a.__)("AffiliateWP","wp-marketing-automations")),className:"bwf-crm-importer-button bwf-crm-importer-button-affwp"}),Object(Or.applyFilters)("bwfAddContactImporter",e)}(),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(B.g)(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.isEmpty)(e)||Object(B.l)(e,t,n)},N=function(e){return Object(r.createElement)(r.Fragment,null,function(e,a){switch(a){case"csv":return Object(r.createElement)(xr,{step:e,setStep:h,setImporter:i,setImport:t});case"wp":return Object(r.createElement)(Hr,{step:e,setStep:h,setImporter:i,setImport:t});case"wc":return Object(r.createElement)(oa,{step:e,setStep:h,setImporter:i,setImport:t});case"wlm":return Object(r.createElement)(Ea,{step:e,setStep:h,setImporter:i,setImport:t});case"affwp":return Object(r.createElement)(Ua,{step:e,setStep:h,setImporter:i,setImport:t});default:return Object(Or.applyFilters)("bwfImporterSelectedContent",Object(r.createElement)(r.Fragment,null),a,e,h,i,w,n,l.Nb,S,t)}}(e,o))},C=[{key:1,label:Object(a.__)("Source","wp-marketing-automations"),content:j?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(r.createElement)("div",{className:"bwf-placeholder-temp dark bwf-h-15 bwf-w-150"}))),Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-importer"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-150"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-270"}),Object(r.createElement)("div",{className:"bwf_clear_10"}),[1,2,3].map((function(e){return Object(r.createElement)(p.Button,{key:e,isTertiary:!0,className:"bwf-crm-importer-button"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-60 bwf-w-60"}))})),Object(r.createElement)("div",{className:"bwf_clear_20"})))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwf-card-wrap"},Object(r.createElement)("div",{className:"bwf-card-header bwf-h4"},Object(a.__)("Source","wp-marketing-automations"))),Object(r.createElement)(p.Card,{className:"bwf-crm-importer-wrapper"},Object(r.createElement)("div",{className:"bwf-crm-importer"},Object(r.createElement)("div",{className:"bwf-h2"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),Object(r.createElement)("div",{className:"bwf-p"},Object(a.__)("Choose the source for importing contacts","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf_clear_10"}),k.map((function(e,t){var n=e.key===o?{isPrimary:!0}:{};return Object(r.createElement)(p.Button,Ra({key:t,onClick:function(){i(e.key),h(2)}},n,{className:e.className}),e.label)})),Object(r.createElement)("div",{className:"bwf_clear_20"}))))},{key:2,label:Object(a.__)("Configuration","wp-marketing-automations"),content:N(2)},{key:3,label:Object(a.__)("Confirmation","wp-marketing-automations"),content:N(3)}];return Object(r.createElement)(p.Modal,{className:"bwf-admin-modal bwf-admin-modal-fullscreen bwf-admin-modal-no-header bwf-import-contact-modal",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-import-modal-header"},Object(r.createElement)("div",{className:"bwf-import-modal-title"},Object(a.__)("Import Contacts","wp-marketing-automations")),Object(r.createElement)("div",{onClick:function(){Object(l.m)(Object(a.__)("Contacts","wp-marketing-automations")),Object(B.l)({page:"autonami",path:"/contacts/"},"/",{}),t(!1)},className:"bwf-flex",style:{cursor:"pointer"}},Object(r.createElement)(g.a,{icon:"close"}))),Object(r.createElement)("div",{className:"bwf-crm-main-import-wrapper bwf-crm-import-init"},Object(r.createElement)(Mt.a,{steps:C,currentStep:v,isPending:E})),Object(r.createElement)("div",{className:"bwf_clear_24"}))};function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){Qa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ha(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ha(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Za(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ja(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ja(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(){var e=Object(O.a)(),t=Object(j.a)(),n=e.getError,o=e.getContacts,i=e.getCountData,s=t.clearError,u=t.startIndexing,m=t.setStateProp,b=Za(Object(r.useState)(!1),2),f=b[0],p=b[1],d=Za(Object(r.useState)(!1),2),w=d[0],y=d[1],v=Za(Object(r.useState)(!1),2),g=v[0],h=v[1],k=Za(Object(r.useState)({}),2),S=k[0],N=k[1],C=Za(Object(r.useState)(!1),2),P=C[0],x=C[1],I=location&&location.search?Object(c.parse)(location.search.substring(1)):{},T=n(),A=Object(r.useRef)();Object(r.useEffect)((function(){A.current?s():A.current=T})),Object(r.useEffect)((function(){return Object(l.m)("Contacts"),function(){m("countData",{})}}),[]);var F=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(E.a,{isPrimary:!0,className:"bwf-display-flex bwf-no-ripple",label:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){return p(!0)}},Object(a.__)("Create Contact","wp-marketing-automations"))),D=i(),$=Object(_t.a)().getPageCountData,G=Object(ht.a)().setPageCountData,B=$();Object(r.useEffect)((function(){G(Ya(Ya({},B),D))}),[D]),Object(vt.a)("contacts","",Object(a.__)("ALL CONTACTS","wp-marketing-automations"),F);var M=o();if("indexing_status"in M){var L="indexing_status"in M&&2===parseInt(M.indexing_status)?Object(a.__)("Contacts indexing is in progress. Kindly, check back after some time.","wp-marketing-automations"):Object(a.__)("Contacts Indexing required, before you can view the contacts.","wp-marketing-automations"),z="indexing_status"in M&&2===parseInt(M.indexing_status)?null:Object(a.__)("Start Indexing","wp-marketing-automations");return Object(r.createElement)(yt.a,{text:L,buttonText:z,onButtonClick:function(){return u()}})}var U=[{type:"heading",data:{title:Object(a.__)("Create contact for smarter engagement","wp-marketing-automations"),desc:Object(a.__)("Increase engagement strategies by creating contacts, apply tags, lists, and personal details.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(l.t)()+"contact/contact1.png",title:Object(a.__)("Seamlessly Import Contacts","wp-marketing-automations"),desc:Object(a.__)("Import contacts from WordPress, WooCommerce, CSV files, or other supported sources","wp-marketing-automations")},{img:Object(l.t)()+"contact/contact2.png",title:Object(a.__)("Get 360Â° Contact view","wp-marketing-automations"),desc:Object(a.__)("View Complete profile with purchase history, tags, lists, open, clicks and more","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(a.__)("Create Contact","wp-marketing-automations"),onClick:function(){N({}),p(!0)}},{text:Object(a.__)("Import Contact","wp-marketing-automations"),isSecondary:!0,proCheck:!0,onClick:function(){Object(l.cc)()?h(!0):(x(!0),N({isFeature:!0,featureTitle:Object(a.__)("Contacts Import","wp-marketing-automations")}))}}]}},{type:"link-wth-text",data:{text:Object(a.__)("Curious about contact?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/contacts/",linkText:Object(a.__)("Learn More","wp-marketing-automations")}}];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(gt.a,null),Object(r.createElement)("div",{className:"bwfcrm-contacts-list__scroll-point"}),T&&!f&&Object(r.createElement)(_.a,{status:"error"},T.message),Object(r.createElement)(rt,{query:I,isExport:w,setExport:y,isImport:g,setImport:h,menuButtons:F,pitchData:U}),f&&Object(r.createElement)(wt,{query:I,onCloseModal:function(){p(!1)}}),w&&Object(r.createElement)(Wn,{setExport:y}),g&&Object(r.createElement)(Wa,{setImport:h}),!Object(l.cc)()&&Object(r.createElement)(xe.b,{isOpen:P,onRequestClose:function(){return x(!1)},modalContent:S}))}}}]);