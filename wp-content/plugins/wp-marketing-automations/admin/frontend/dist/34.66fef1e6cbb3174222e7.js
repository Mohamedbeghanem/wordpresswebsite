(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1100:function(e,t,n){"use strict";var a=n(0),r=n(6),o=n.n(r),c=n(1),i=n(8),s=(n(1106),n(40)),l=n(3);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}t.a=function(e){var t=u(Object(a.useState)(!1),2),n=t[0],r=t[1],m=e.modalContent,b=void 0===m?{}:m,f=e.content,p=e.onPage,d=void 0!==p&&p;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:o()("bwf-upgrade-pro-overlay",{"is-on-page":d}),onClick:function(){d||r(!0)}},d?Object(a.createElement)(s.a,{showHeader:!1,modalContent:b}):Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-king-tag-pro"},Object(a.createElement)(i.a,{icon:"king",size:38,color:"#fff"})),Object(a.createElement)("span",{className:"bwf-mt-8"},f||(Object(l.Yb)()?Object(c.__)("Activate your license to continue using premium features without interruption.","wp-marketing-automations"):Object(c.__)("This feature is locked. To get full access of FunnelKit Automation upgrade to PRO","wp-marketing-automations"))))),Object(a.createElement)(s.b,{isOpen:n,onRequestClose:function(){return r(!1)},modalContent:b}))}},1102:function(e,t,n){"use strict";var a=n(77),r=n(0),o=n(1),c=n(3),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={workflow:{name:Object(o.__)("Workflow","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e):"admin.php?page=autonami-automations&edit=".concat(e),redirect:!t}};return t&&(n.single_a_contacts={name:Object(o.__)("Contacts","wp-marketing-automations"),link:"admin.php?page=autonami&path=/automation/".concat(e,"/contacts"),showOnClick:!0},n.analytics={name:Object(o.__)("Analytics","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/analytics"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/analytics"),isPro:!0,showOnClick:!0}),n.engagement={name:Object(o.__)("Engagements","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/engagements"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/engagements"),isPro:!0,showOnClick:!0},Object(c.sc)()&&(n.orders={name:Object(o.__)("Orders","wp-marketing-automations"),link:t?"admin.php?page=autonami&path=/automation/".concat(e,"/orders"):"admin.php?page=autonami&path=/automation-v1/".concat(e,"/orders"),isPro:!0,showOnClick:!0}),n};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]&&arguments[7],b=arguments.length>8&&void 0!==arguments[8]&&arguments[8],f=bwfcrm_contacts_data&&bwfcrm_contacts_data.header_data?bwfcrm_contacts_data.header_data:{},p=(f.automation_nav,f.automationv2_nav),d=Object(a.a)(),O=d.setActiveMultiple,v=d.resetHeaderMenu,j=d.setL2NavType,y=d.setL2Nav,w=d.setBackLink,g=d.setL2Title,_=d.setL2Content,h=d.setBackLinkLabel,E=d.setL2NavAlign,k=d.setPageHeader,N=d.setTabHeader;return Object(r.useEffect)((function(){v(!0),!c&&j("menu");var a=i(l,m);b||y(l?a:p),e&&a.hasOwnProperty(e)&&a[e].hasOwnProperty("name")&&N(a[e].name),O({leftNav:"automations-v2",rightNav:e}),n&&w(n),l&&w(n&&!m?"admin.php?page=autonami&path=/automations-v1":"admin.php?page=autonami&path=/automations"),c||m&&l&&h(Object(o.__)("All Automations","wp-marketing-automations")),!m&&l&&h(Object(o.__)("All Automations","wp-marketing-automations")),l&&E("left"),t&&""!==t&&g(t),!n&&s&&_(s),k(Object(o.__)("Automations","wp-marketing-automations")),u&&y({})}),[e,m,b]),!0}},1103:function(e,t){e.exports=function(e,t,n,a){for(var r=e.length,o=n+(a?1:-1);a?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},1106:function(e,t,n){},1107:function(e,t){e.exports=function(e){return e!=e}},1108:function(e,t){e.exports=function(e,t,n){for(var a=n-1,r=e.length;++a<r;)if(e[a]===t)return a;return-1}},1110:function(e,t,n){"use strict";var a=n(51),r=n(150);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["getStateProp"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(a.a)("automationList"),t=e.getStateProp,n=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,c),o=Object(a.a)(r.a.recipient).getStateProp,i=Object(a.a)(r.a.conversion).getStateProp,l=Object(a.a)(r.a.contacts).getStateProp,u=Object(a.a)(r.a.analytics).getStateProp;return s(s({},n),{},{getAutomations:function(){return t("automations")},getPageNumber:function(){return parseInt(t("offset"))/parseInt(t("limit"))+1},getPerPageCount:function(){return parseInt(t("limit"))},getOffset:function(){return parseInt(t("offset"))},getTotalCount:function(){return parseInt(t("total"))},getLoadingStatus:function(){return t("isLoading")},getWorkerResponseCode:function(){return t("response_code")},getWorkerDelay:function(){return t("worker_delayed")},getRecipientData:function(){return o("data")},getRecipientLoading:function(){return o("isLoading")},getRecipientOffset:function(){return o("offset")},getRecipientAutomationId:function(){return o("automationId")},getRecipientTotal:function(){return o("total")},getRecipientAutomation:function(){return o("automation")},getRecipientPage:function(){return parseInt(o("offset"))/parseInt(o("limit"))+1},getRecipientLimit:function(){return o("limit")},getRecipientSingleAutomationFailedCount:function(){return o("failedCount")},getConversionData:function(){return i("data")},getConversionLoading:function(){return i("isLoading")},getConversionOffset:function(){return i("offset")},getConversionAutomationId:function(){return i("automationId")},getConversionTotal:function(){return i("total")},getConversionAutomation:function(){return i("automation")},getConversionPage:function(){return parseInt(i("offset"))/parseInt(i("limit"))+1},getConversionLimit:function(){return i("limit")},getCountData:function(){return t("countData")},getConversionSingleAutomationFailedCount:function(){return i("failedCount")},getContactData:function(){return l("data")},getContactLoading:function(){return l("isLoading")},getContactOffset:function(){return l("offset")},getContactAutomationId:function(){return l("automationId")},getContactTotal:function(){return l("total")},getContactAutomation:function(){return l("automation")},getContactPage:function(){return parseInt(l("offset"))/parseInt(l("limit"))+1},getContactLimit:function(){return l("limit")},getContactCountData:function(){return l("contactCount")},getContactSingleAutomationFailedCount:function(){return l("failedCount")},getAnalyticsData:function(){return u("analytics")},getAnalyticsTileData:function(){return u("tiles")},getAnalyticsTableData:function(){return u("tableData")},getAnalyticsLoading:function(){return u("isLoading")},getAnalyticsType:function(){return u("type")},getAnalyticsAutomationData:function(){return u("automation")},getAnalyticsSingleAutomationFailedCount:function(){return u("failedCount")}})}},1117:function(e,t,n){var a=n(1103),r=n(1107),o=n(1108);e.exports=function(e,t,n){return t==t?o(e,t,n):a(e,r,n)}},1124:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},1127:function(e,t,n){"use strict";var a=n(0),r=n(1),o=n(6),c=n.n(o),i=n(110),s=(n(1137),n(182));function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}t.a=function(e){var t=e.className,n=e.align,o=void 0===n?"left":n,l=e.title,b=e.message,f=e.proLink,p=b||Object(r.sprintf)(Object(r.__)("Use our sample data to explore %s. See how it summarises metrics across multiple funnels.","wp-marketing-automations"),l),d=m(Object(a.useState)(!1),2),O=d[0],v=d[1];return Object(a.useEffect)((function(){var e=document.querySelector("body:not(.modal-open) #bwf-header-upgrade-pro-cta");if(e){var t=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?v(!1):v(!0)}))}),{root:null,rootMargin:"0px",threshold:.1});return t.observe(e),function(){t.disconnect()}}v(!0)}),[]),Object(a.createElement)("div",{className:c()("bwf-lite-noticebar is-sample-data-notice",t,u(u({},"bwf-notice-".concat(o),!!o),"is-btn-visible",O))},Object(a.createElement)("div",{className:"bwf-lite-noticebar__content-wrap"},l&&Object(a.createElement)("div",{className:"bwf-lite-noticebar__title-wrap"},l," ",Object(a.createElement)(i.b,{content:Object(r.__)("Sample Data","wp-marketing-automations"),type:"black"})),Object(a.createElement)("div",{className:"bwf-noticebar-conatiner"},Object(a.createElement)("div",{className:"bwf-noticebar-content"},p))),O&&Object(a.createElement)(s.a,{isPrimary:!0,proLink:f}))}},1128:function(e,t,n){"use strict";var a=n(50),r=n(3),o=n(150),c=n(17);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=["fetch","setStateProp"],l=["s","page","filter","path"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.a=function(){var e=Object(a.a)("automationList"),t=e.fetch,n=e.setStateProp,i=f(e,s),u=Object(a.a)(o.a.recipient),b=u.fetch,p=u.setStateProp,d=Object(a.a)(o.a.conversion),O=d.fetch,v=d.setStateProp,j=Object(a.a)(o.a.contacts),y=j.fetch,w=j.setStateProp,g=Object(a.a)(o.a.analytics),_=g.fetch,h=g.setStateProp;return m(m({},i),{},{fetch:function(e,a,o,c){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n("automation",{});var s=a.s,u=void 0===s?"":s,m=(a.page,a.filter,a.path,f(a,l)),b={offset:o,limit:c,status:e,search:u,filters:m,version:i?2:1};t("GET",Object(r.B)("/automations"),b)},setAutomationListValues:function(e,t){n(e,t)},fetchRecipient:function(e,t,n){b("GET",Object(r.B)("/v3/automation/".concat(e,"/recipients?limit=").concat(t,"&offset=").concat(n)))},setRecipientsValues:function(e,t){p(e,t)},fetchConversion:function(e,t,n){v("automation",{}),O("GET",Object(r.B)("/v3/automation/".concat(e,"/conversions?limit=").concat(t,"&offset=").concat(n)))},setConversionValues:function(e,t){v(e,t)},fetchContacts:function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";w("automation",{}),y("GET",Object(r.B)("/automation/".concat(e,"/contacts?limit=").concat(t,"&offset=").concat(n,"&type=").concat(a,"&search=").concat(o)))},setContactValues:function(e,t){w(e,t)},fetchAnalytics:function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=0;4===parseInt(i)&&(s=1),_("GET",Object(r.B)("/analytics/emails/chart/")+"?"+Object(c.stringify)({after:t,before:n,interval:a,oid:e,type:o,mode:i,contact:s}))},setAnalyticsValues:function(e,t){h(e,t)}})}},1137:function(e,t,n){},1197:function(e,t,n){"use strict";var a=n(0),r=n(6),o=n.n(r),c=n(2),i=n(56),s=n(1),l=n(9),u=n.n(l),m=n(8),b=(n(1198),n(3)),f=n(17);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=p(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}t.a=function(e){var t=e.header,n=void 0===t?Object(s.__)("View Analytics","wp-marketing-automations"):t,r=e.icon,l=void 0===r?"analytic":r,p=e.automationId,d=e.analyticsId,v=e.mode,y=void 0===v?"":v,w=e.extraData,g=void 0===w?{}:w,_=j(Object(a.useState)(!0),2),h=_[0],E=_[1],k=j(Object(a.useState)(!1),2),N=k[0],S=k[1],P=j(Object(a.useState)({}),2),A=P[0],I=P[1],C=function(){parseInt(d)>0&&Object(b.cc)()?(E(!0),I({}),function(){try{var e=O(O({},g),{},{mode:y});u()({path:Object(b.B)("/automation/".concat(p,"/analytics/").concat(d,"?").concat(Object(f.stringify)(e))),method:"GET"}).then((function(e){200===e.code?Object(c.isEmpty)(e.result)||I(e.result):S(!0),E(!1)}))}catch(e){S(!0),E(!1)}}()):E(!1)},F=function(){var e,t=A.tile,n=void 0===t?[]:t;return N?Object(a.createElement)(a.Fragment,null,Object(s.__)("Error while fetching the Analytics.","wp-marketing-automations")):Object(b.cc)()?Object(a.createElement)(a.Fragment,null,Object(c.isEmpty)(n)?Object(a.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("No analytics found.","wp-marketing-automations")):Object(a.createElement)("div",{className:"bwf-info-brick"},n.map((function(e,t){var n=e.label,r=void 0===n?"":n,o=e.value,c=void 0===o?"-":o;if(""!==r)return Object(a.createElement)("div",{className:"bwf-info-item",key:t},Object(a.createElement)("span",{className:"bwf-node-content-type"},r),Object(a.createElement)("span",{className:"bwf-node-content-label"},c))})))):(e=[{label:Object(s.__)("Sent","wp-marketing-automations")},{label:Object(s.__)("Open Rate","wp-marketing-automations")}],"email"===y&&e.push({label:Object(s.__)("Click Rate","wp-marketing-automations")},{label:Object(s.__)("Click to Open Rate","wp-marketing-automations")}),e.push({label:Object(s.__)("Revenue","wp-marketing-automations")},{label:Object(s.__)("Revenue/Contact","wp-marketing-automations")},{label:Object(s.__)("Unsubscribe Rate","wp-marketing-automations")}),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-info-brick"},e.map((function(e,t){return Object(a.createElement)("div",{className:"bwf-info-item",key:t},Object(a.createElement)("span",{className:"bwf-node-content-type"},e.label),Object(a.createElement)("span",{className:"bwf-node-content-label"},"-"))}))),Object(a.createElement)("div",{className:"bwf_clear_10"}),Object(a.createElement)("div",{className:"bwf-normal-text"},Object(s.__)("Email Analytics is a PRO feature.","wp-marketing-automations")+" ",Object(a.createElement)("a",{target:"__blank",className:"bwf-normal-a-t bwf-font-light",href:Object(b.gb)("upgrade",{utm_medium:"Automation+Email+Analytics"})},Object(s.__)("Upgrade to PRO","wp-marketing-automations")))))};return Object(a.createElement)("div",{className:"bwf-info-popup"},Object(a.createElement)(i.a,{contentClassName:"bwf-info__popover",position:"top center",renderToggle:function(e){var t=e.onToggle,r=e.isOpen,c=o()("bwf-info__toggle bwf-cursor-pointer",{"is-opened":r});return Object(a.createElement)("div",{className:c,onClick:function(){t(),C()},"aria-expanded":r},Object(a.createElement)(m.a,{size:14,icon:l}),n)},renderContent:function(e){var t=e.onToggle;return Object(a.createElement)("div",{className:"bwf-info-popover-container"},Object(a.createElement)("div",{className:"bwf-info-popover-header"},Object(a.createElement)("div",{className:"bwf-info-header-text"},n,!Object(b.cc)()&&b.e),Object(a.createElement)("span",{className:"bwf-info-close",onClick:t},Object(a.createElement)(m.a,{icon:"close",size:20}))),Object(a.createElement)("div",{className:"bwf-info-popover-body"},Object(a.createElement)("div",{className:"bwf-info-wrapper"},Object(a.createElement)("div",{className:"bwf-info--content"},h?Object(a.createElement)("div",{className:"bwf-info-brick"},[1,2,3,4,5,6].map((function(e){return Object(a.createElement)("div",{className:"bwf-info-item",key:e},Object(a.createElement)("span",{className:"bwf-node-content-type"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(a.createElement)("span",{className:"bwf-node-content-label"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-90 bwf-h-15"})))}))):F()))))},focusOnMount:!0}))}},1198:function(e,t,n){},1435:function(e,t,n){},1436:function(e,t,n){},1437:function(e,t,n){},1438:function(e,t,n){},1509:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1102),o=n(3),c=n(9),i=n.n(c),s=n(77),l=n(109),u=n(363),m=n(24),b=n(12);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){var t=e.query,n=e.children;return Object(a.createElement)("div",{className:"bwf-crm-emails-report-filter"},n,Object(a.createElement)(u.a,{siteLocale:"en-US",path:"/",query:t,onDateSelect:function(e){var n=d(d({},t),e);delete n.compare,Object(b.l)(n,"/",{})},showDatePicker:!0,isoDateFormat:m.j,hideCompare:!0,dateQuery:function(e){e.compare="previous_year";var t=Object(m.g)(e),n=t.period,a=t.compare,r=t.before,o=t.after,c=Object(m.e)(e);return{period:n,compare:a,before:r,after:o,primaryDate:c.primary,secondaryDate:c.secondary}}(t),currency:Object(o.Ab)()}))},j=n(68),y=n(1),w=n(1110),g=n(352),_=function(e){var t=e.type,n=e.metrics,r=(0,Object(w.a)().getAnalyticsLoading)();return Object(a.createElement)("div",{className:"bwf-crm-emails-report-tiles"},Object(a.createElement)(g.a,{items:n(t),title:Object(y.__)("Overview","wp-marketing-automations"),isLoading:r,rowTileCount:function(){switch(t){case"email":return Object(o.sc)()?5:3;case"sms":return Object(o.sc)()?4:2;case"contact":return Object(o.sc)()?4:3;default:return!1}}()}))},h=n(1128),E=n(147),k=n(341),N=n(2),S=n(348),P=n(5),A=n(6),I=n.n(A);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var D=function(e){var t,n=e.query,r=e.type,o=e.metrics,c=n.chart?n.chart:function(){switch(r){case"contact":return"active_contacts";default:return"email_sents"}}(),i=C(Object(a.useState)(o(r)[0]),2),s=i[0],l=i[1],u=Object(w.a)(),f=u.getAnalyticsData,p=u.getAnalyticsLoading,d=u.getAnalyticsTileData,O=p(),v=f(),j=d(),g=Object(m.h)(n),_=Object(m.d)(((t=n).period&&""!==t.period||(t.period="month"),t.compare&&""!==t.compare||(t.compare="previous_year"),n));_.includes(g)||(g=_[_.length-1]),Object(a.useEffect)((function(){l(o(r)[0])}),[r]);return Object(a.createElement)(S.a,{isRequesting:O,data:function(e){switch(r){case"email":return function(e){var t=[];if(!Object(N.isEmpty)(v)){v.map((function(n){switch(e){case"email_sents":t.push({date:n.start_date,email_sents:{label:Object(y.__)("Email Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"open_rate":t.push({date:n.start_date,email_open:{label:Object(y.__)("Opens","wp-marketing-automations"),value:parseInt(n.subtotals.open_rate)}});break;case"click_rate":t.push({date:n.start_date,email_click:{label:Object(y.__)("Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.click_rate)}});break;case"total_orders":t.push({date:n.start_date,total_orders:{label:Object(y.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":t.push({date:n.start_date,total_revenue:{label:Object(y.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return t}(e);case"sms":return function(e){var t=[];if(!Object(N.isEmpty)(v)){v.map((function(n){switch(e){case"email_sents":t.push({date:n.start_date,email_sents:{label:Object(y.__)("SMS Sent","wp-marketing-automations"),value:parseInt(n.subtotals.email_sents)}});break;case"email_click":t.push({date:n.start_date,email_click:{label:Object(y.__)("SMS Clicks","wp-marketing-automations"),value:parseInt(n.subtotals.email_click)}});break;case"total_orders":t.push({date:n.start_date,total_orders:{label:Object(y.__)("Total Orders","wp-marketing-automations"),value:parseInt(n.subtotals.total_orders)}});break;case"total_revenue":t.push({date:n.start_date,total_revenue:{label:Object(y.__)("Total Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.total_revenue)}})}}))}return t}(e);case"contact":return function(e){var t=[];if(!Object(N.isEmpty)(v)){v.map((function(n){switch(e){case"active_contacts":t.push({date:n.start_date,active_contacts:{label:Object(y.__)("Active Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.active_contacts)}});break;case"complete_contacts":t.push({date:n.start_date,complete_contacts:{label:Object(y.__)("Complete Contacts","wp-marketing-automations"),value:parseInt(n.subtotals.complete_contacts)}});break;case"unsubscribers":t.push({date:n.start_date,unsubscribers:{label:Object(y.__)("Unsubscribes","wp-marketing-automations"),value:parseInt(n.subtotals.unsubscribers)}});break;case"revenue":t.push({date:n.start_date,revenue:{label:Object(y.__)("Revenue","wp-marketing-automations"),value:parseInt(n.subtotals.revenue)}});break;case"conversions":t.push({date:n.start_date,conversions:{label:Object(y.__)("Orders","wp-marketing-automations"),value:parseInt(n.subtotals.conversions)}});break;case"aov":t.push({date:n.start_date,conversions:{label:Object(y.__)("AOV","wp-marketing-automations"),value:parseInt(n.subtotals.aov)}})}}))}return t}(e)}}(c),title:Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:""},Object(y.__)("Performance","wp-marketing-automations"))),interval:g,layout:"item-comparison",legendTotals:"aov"==c?{conversions:j.hasOwnProperty("aov")?j.aov:0}:null,interactiveLegend:!0,chartType:"curve-line",chartMeta:s,tabs:o(r),hideTypeSelect:!0,customHeaderItem:Object(a.createElement)(a.Fragment,null,o(r)&&Object(N.isArray)(o(r))&&Object(a.createElement)("div",{className:"bwf-chart-tabs"},o(r).filter((function(e){return"convert_time"!==e.key})).map((function(e){return Object(a.createElement)(P.Button,{className:I()({"is-gray-light":s.key!==e.key,"is-secondary-light":s.key===e.key}),key:e.key,onClick:function(t){l(e),t.preventDefault(),delete n.compare,Object(b.l)({chart:e.key},"/",n)}},e.title)}))))})},T=n(146),x=n(17),M=n(47);function L(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var s=a&&a.prototype instanceof i?a:i,l=Object.create(s.prototype);return Y(l,"_invoke",function(n,a,r){var o,i,s,l=0,u=r||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,i=0,s=e,b.n=n,c}};function f(n,a){for(i=n,s=a,t=0;!m&&l&&!r&&t<u.length;t++){var r,o=u[t],f=b.p,p=o[2];n>3?(r=p===a)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(i=0,b.v=a,b.n=o[1]):f<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,b.n=p,i=0))}if(r||n>1)return c;throw m=!0,a}return function(r,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:n.call(a,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(n,r,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(Y(t={},a,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Y(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,Y(m,"constructor",l),Y(l,"constructor",s),s.displayName="GeneratorFunction",Y(l,r,"GeneratorFunction"),Y(m),Y(m,r,"Generator"),Y(m,a,(function(){return this})),Y(m,"toString",(function(){return"[object Generator]"})),(L=function(){return{w:o,m:b}})()}function Y(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(Y=function(e,t,n,a){function o(t,n){Y(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,a)}function R(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var H=function(e){var t=e.query,n=e.automationId,r=t.period,c=t.interval,s=void 0===c?"day":c,l=t.after,u=t.before,b=Object(M.a)(Object(o.Ab)()).formatAmount,f=G(Object(a.useState)([]),2),p=f[0],d=f[1],O=G(Object(a.useState)(!0),2),v=O[0],j=O[1],g=G(Object(a.useState)(25),2),_=g[0],h=g[1],E=G(Object(a.useState)(0),2),k=E[0],S=E[1],P=G(Object(a.useState)(0),2),A=P[0],I=P[1],C=parseInt(k)/parseInt(_)+1,F=Object(w.a)(),D=F.getAnalyticsTileData,Y=F.getAnalyticsLoading,z=D(),H=Y();Object(a.useEffect)((function(){if(!Object(o.cc)()){var e=z.email_click,t=void 0===e?0:e,n=z.email_open,a=void 0===n?0:n,r=z.email_sents,c=void 0===r?0:r,i=z.total_orders,s=void 0===i?0:i,l=z.revenue,u=void 0===l?0:l;d([{click_count:t,click_rate:(t/c*100).toFixed(2),conversions:s,oid:"5",open_count:a,open_rate:(a/c*100).toFixed(2),revenue:u,sent:c,subject:"Dummy Subject",template:"",tid:"52",title:"Dummy Mail",type:"1"}]),j(!1)}}),[H]);var q=function(){var e,t=(e=L().m((function e(t,a){return L().w((function(e){for(;;)switch(e.p=e.n){case 0:if(j(!0),Object(o.cc)()){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,i()({method:"GET",path:Object(o.B)("/analytics/emails/tabular/")+"?"+Object(x.stringify)({after:t,before:a,oid:n,type:1,interval:"day",limit:_,offset:k,mode:1})}).then((function(e){e.hasOwnProperty("result")&&d(e.result),e.hasOwnProperty("total_count")&&I(e.total_count),j(!1)}));case 2:e.n=4;break;case 3:e.p=3,e.v,j(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){R(o,a,r,c,i,"next",e)}function i(e){R(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){if(Object(o.cc)()){var e=((r=t).compare="previous_year",Object(m.e)(r).primary),n="",a="";e&&(Object(N.isEmpty)(e.after)||(n=e.after.format("YYYY-MM-DD HH:mm:ss")),Object(N.isEmpty)(e.before)||(a=e.before.format("YYYY-MM-DD 23:59:59")),Object(N.isEmpty)(n)||Object(N.isEmpty)(a)||q(n,a))}var r}),[r,s,l,u]);var B,U=[{key:"subject",label:Object(y.__)("Subject","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(y.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(y.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"open",label:Object(y.__)("Open Rate","wp-marketing-automations"),isLeftAligned:!0},{key:"click",label:Object(y.__)("Click Rate","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.sc)()?{key:"orders",label:Object(y.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.sc)()?{key:"revenue",label:Object(y.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],V=function(e){e!==_&&h(e)};return Object(a.createElement)("div",{className:"bwf-table-with-border"},Object(a.createElement)(T.a,{title:Object(y.__)("Email","wp-marketing-automations"),rows:(B=[],Object(N.isEmpty)(p)||p.map((function(e){B.push([{display:e.subject?e.subject:"-",value:e.subject},{display:e.title?e.title:"-",value:e.title},{display:parseInt(e.sent)?parseInt(e.sent):"-",value:e.sent},{display:parseFloat(e.open_rate)>0?parseFloat(e.open_rate).toFixed(2)+"%":"-",value:e.open_count},{display:parseFloat(e.click_rate)>0?parseFloat(e.click_rate).toFixed(2)+"%":"-",value:e.click_count},Object(o.sc)()?{display:parseInt(e.conversions)?parseInt(e.conversions):"-",value:e.conversions}:{},Object(o.sc)()?{display:parseFloat(e.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},b(parseFloat(e.revenue))):"-",value:e.revenue}:{}])})),B),headers:U,query:{paged:C},rowsPerPage:_,totalRows:A,isLoading:v,onPageChange:function(e,t){S((e-1)*_)},onQueryChange:function(e){return"per_page"!==e?function(){}:V},showMenu:!1,rowHeader:!0,emptyMessage:Object(y.__)("No emails found","wp-marketing-automations")}))};function q(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var s=a&&a.prototype instanceof i?a:i,l=Object.create(s.prototype);return B(l,"_invoke",function(n,a,r){var o,i,s,l=0,u=r||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,i=0,s=e,b.n=n,c}};function f(n,a){for(i=n,s=a,t=0;!m&&l&&!r&&t<u.length;t++){var r,o=u[t],f=b.p,p=o[2];n>3?(r=p===a)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(i=0,b.v=a,b.n=o[1]):f<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,b.n=p,i=0))}if(r||n>1)return c;throw m=!0,a}return function(r,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:n.call(a,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(n,r,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(B(t={},a,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,B(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,B(m,"constructor",l),B(l,"constructor",s),s.displayName="GeneratorFunction",B(l,r,"GeneratorFunction"),B(m),B(m,r,"Generator"),B(m,a,(function(){return this})),B(m,"toString",(function(){return"[object Generator]"})),(q=function(){return{w:o,m:b}})()}function B(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(B=function(e,t,n,a){function o(t,n){B(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,a)}function U(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var W=function(e){var t=e.query,n=e.automationId,r=t.period,c=t.interval,s=void 0===c?"day":c,l=t.after,u=t.before,b=Object(M.a)(Object(o.Ab)()).formatAmount,f=V(Object(a.useState)([]),2),p=f[0],d=f[1],O=V(Object(a.useState)(!0),2),v=O[0],j=O[1],g=V(Object(a.useState)(25),2),_=g[0],h=g[1],E=V(Object(a.useState)(0),2),k=E[0],S=E[1],P=V(Object(a.useState)(0),2),A=P[0],I=P[1],C=parseInt(k)/parseInt(_)+1,F=Object(w.a)(),D=F.getAnalyticsTileData,L=F.getAnalyticsLoading,Y=D(),R=L();Object(a.useEffect)((function(){if(!Object(o.cc)()){var e=Y.email_click,t=void 0===e?0:e,n=Y.email_open,a=void 0===n?0:n,r=Y.email_sents,c=void 0===r?0:r,i=Y.total_orders,s=void 0===i?0:i,l=Y.revenue,u=void 0===l?0:l;d([{click_count:t,click_rate:(t/c*100).toFixed(2),conversions:s,oid:"5",open_count:a,open_rate:(a/c*100).toFixed(2),revenue:u,sent:c,subject:"Dummy Message",template:"",tid:"52",title:"Dummy SMS",type:"1"}]),j(!1)}}),[R]);var G=function(){var e,t=(e=q().m((function e(t,a){return q().w((function(e){for(;;)switch(e.p=e.n){case 0:if(j(!0),Object(o.cc)()){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,i()({method:"GET",path:Object(o.B)("/analytics/emails/tabular/")+"?"+Object(x.stringify)({after:t,before:a,oid:n,type:1,interval:"day",limit:_,offset:k,mode:2})}).then((function(e){e.hasOwnProperty("result")&&d(e.result),e.hasOwnProperty("total_count")&&I(e.total_count),j(!1)}));case 2:e.n=4;break;case 3:e.p=3,e.v,j(!1);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){U(o,a,r,c,i,"next",e)}function i(e){U(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){if(Object(o.cc)()){var e=((r=t).compare="previous_year",Object(m.e)(r).primary),n="",a="";e&&(Object(N.isEmpty)(e.after)||(n=e.after.format("YYYY-MM-DD HH:mm:ss")),Object(N.isEmpty)(e.before)||(a=e.before.format("YYYY-MM-DD 23:59:59")),Object(N.isEmpty)(n)||Object(N.isEmpty)(a)||G(n,a))}var r}),[r,s,l,u]);var z,H=[{key:"message",label:Object(y.__)("Message","wp-marketing-automations"),isLeftAligned:!0},{key:"source",label:Object(y.__)("Source","wp-marketing-automations"),isLeftAligned:!1},{key:"sent",label:Object(y.__)("Sent","wp-marketing-automations"),isLeftAligned:!0,isNumeric:!0},{key:"click",label:Object(y.__)("Click","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0},Object(o.sc)()?{key:"orders",label:Object(y.__)("Orders","wp-marketing-automations"),isLeftAligned:!0}:{},Object(o.sc)()?{key:"revenue",label:Object(y.__)("Revenue","wp-marketing-automations"),isLeftAligned:!1,isNumeric:!0}:{}],B=function(e){e!==_&&h(e)};return Object(a.createElement)("div",{className:"bwf-table-with-border"},Object(a.createElement)(T.a,{title:Object(y.__)("SMS","wp-marketing-automations"),hideHeader:"yes",rows:(z=[],Object(N.isEmpty)(p)||p.map((function(e){var t=parseFloat(e.click_rate)?" ( "+parseFloat(e.click_rate).toFixed(2)+"% ) ":"";z.push([{display:e.template?Object(a.createElement)("div",{className:"bwf-pre-line"},e.template):"-",value:""},{display:e.title?e.title:"-",value:e.title},{display:parseInt(e.sent)?parseInt(e.sent):"-",value:e.sent},{display:parseInt(e.click_count)?e.click_count+t:"-",value:e.click_count},Object(o.sc)()?{display:parseInt(e.conversions)?parseInt(e.conversions):"-",value:e.conversions}:{},Object(o.sc)()?{display:parseFloat(e.revenue)>0?Object(a.createElement)("span",{className:"bwf-tags bwf-tag-green"},b(parseFloat(e.revenue))):"-",value:e.revenue}:{}])})),z),headers:H,query:{paged:C},rowsPerPage:_,totalRows:A,isLoading:v,onPageChange:function(e,t){S((e-1)*_)},onQueryChange:function(e){return"per_page"!==e?function(){}:B},showMenu:!1,rowHeader:!0,emptyMessage:Object(y.__)("No SMS found","wp-marketing-automations")}))},J=n(8),Q=n(112),Z=(n(1435),n(48)),K=n(1095),X=n(1169),ee=(n(1161),n(1164)),te=function(e){var t=e.readables;return Object(a.createElement)("div",{className:"bwf-step-brick"},t.map((function(e,t){var n=e.map((function(e,t){return Object(N.isEmpty)(e)?Object(a.createElement)(a.Fragment,null):Object(a.createElement)("div",{key:t},0!==t&&Object(a.createElement)("div",{className:"bwf-step-divider"},Object(a.createElement)("span",{className:"bwf-divider"},"AND")),Object(a.createElement)("div",{className:"bwf-step-content-content bwf-two-line-ellipse-text"},e))}));return 0!==t?Object(N.isEmpty)(n)?Object(a.createElement)(a.Fragment,null):Object(a.createElement)("div",{key:t+"-or"},Object(a.createElement)("div",{className:"bwf-step-divider divider-line bwf-or"},Object(a.createElement)("span",{className:"bwf-divider"},"OR")),n):n})))},ne=function(e){var t,n,r=e.data,c=void 0===r?{}:r,i=e.id,s=Object(a.useContext)(o.b),l=s.automationId,u=void 0===l?"":l,m=s.eventSlug,b=void 0===m?"":m,f=c.stats,p=Object(N.isEmpty)(b)?{}:Object(ee.a)(b,parseInt(u)),d=p.isLoading,O=p.error,v=p.getReadableTexts,j=p.rules,w=(t=c.sidebarValues,n=[],Object(N.isEmpty)(t)?[]:(Object.keys(t).map((function(e){var a=t[e],r=[];!Object(N.isEmpty)(a)&&Object(N.isArray)(a)&&(a.map((function(e){j.hasOwnProperty(e.filter)&&r.push(e)})),Object(N.isEmpty)(r)||n.push(r))})),n)),g=d||O||Object(N.isEmpty)(b)?[]:v(w);return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon"},Object(a.createElement)(J.a,{size:26,icon:"condition"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(y.__)("Step","wp-marketing-automations")+" "+i),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(y.__)("Condition","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Array.isArray(g)&&g.length?Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)(te,{readables:g}))),Object(a.createElement)("div",{className:"bwf-node-status"},Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(y.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},f.hasOwnProperty("completed")?Object(o.vc)(parseInt(f.completed)):0)))):Object(a.createElement)(a.Fragment,null,d?Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(y.__)("Loading","wp-marketing-automations")))))):Object(a.createElement)("div",{className:"bwf-control-event-error"},Object(a.createElement)("div",{className:"bwf-control-error-msg bwf-cursor-pointer"},Object(y.__)("Not Configured","wp-marketing-automations")))))),Object(a.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1}))},ae=n(149),re=n(1197),oe=function(e){var t,n=e.data,r=void 0===n?{}:n,c=e.id,i=r.desc_text,s=void 0===i?"":i,l=r.integration,u=void 0===l?"-":l,m=r.selected,b=void 0===m?"-":m,f=r.action_slug,p=void 0===f?"":f,d=r.stats,O=void 0===d?{}:d,v=r.stepId,j=void 0===v?"":v,w=Object(a.useContext)(o.b),g=w.automationId,_=void 0===g?"":g,h=w.stepId,E=void 0===h?"":h,k=function(){return Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle "},Object(a.createElement)(re.a,{automationId:_,analyticsId:j,mode:"email",extraData:{split:E}}))},S=function(){return Object(a.createElement)("div",{className:"bwf-display-flex bwf-flex-start bwf-mt-3 bwf-cursor-pointer bwf-info__toggle"},Object(a.createElement)(re.a,{automationId:_,analyticsId:j,mode:"sms",extraData:{split:E}}))};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-action"},Object(a.createElement)(J.a,{size:22,icon:"charge"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(y.__)("Step","wp-marketing-automations")+" "+c),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(y.__)("Action","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},!Object(N.isEmpty)(r)&&r.hasOwnProperty("selected")&&(t=Object(a.createElement)(a.Fragment,null),"wp_sendemail"===p?t=k():"twilio_send_sms"===p&&(t=S()),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-content-type"},u),Object(a.createElement)("div",{className:"bwf-node-content-label"},b),""!==s&&!Object(N.isNull)(s)&&Object(a.createElement)("div",{className:"bwf-node-content-label bwf-node-desc"+(Object(N.isArray)(s)?"":" bwf-two-line-ellipse-text")},function(e){if(Object(N.isEmpty)(e))return Object(a.createElement)(a.Fragment,null);if(Object(N.isArray)(e)){var t="",n=[];return e.map((function(e){Object(N.isEmpty)(t)&&(t=e),n.push(Object(a.createElement)("span",{key:e},e))})),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-table-v-center"},Object(a.createElement)("span",null,!Object(N.isEmpty)(t)&&t),!Object(N.isEmpty)(n)&&n.length>1&&Object(a.createElement)("div",{className:"bwf-display-inline",onClick:function(e){e.preventDefault(),e.stopPropagation()}},Object(a.createElement)(ae.a,{items:n}))))}return e}(s)),t)))))),Object(a.createElement)("div",{className:"bwf-node-status"},Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(y.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},O.hasOwnProperty("completed")?Object(o.vc)(parseInt(O.completed)):0))))),Object(a.createElement)(K.d,{type:"source",isConnectable:!1,position:"bottom"}))},ce=n(102),ie=n(10),se=n.n(ie),le={1:Object(y.__)("Delay for a specific period","wp-marketing-automations"),2:Object(y.__)("Delay until a specific date and time","wp-marketing-automations"),3:Object(y.__)("Delay until a custom field date","wp-marketing-automations"),4:Object(y.__)("Delay with variable","wp-marketing-automations")},ue={1:Object(y.__)("Sun","wp-marketing-automations"),2:Object(y.__)("Mon","wp-marketing-automations"),3:Object(y.__)("Tue","wp-marketing-automations"),4:Object(y.__)("Wed","wp-marketing-automations"),5:Object(y.__)("Thu","wp-marketing-automations"),6:Object(y.__)("Fri","wp-marketing-automations"),7:Object(y.__)("Sat","wp-marketing-automations")},me=function(e){var t=e.data,n=e.id,r=t.stats,c=void 0===r?{}:r,i=t.sidebarValues,s=void 0===i?{}:i,l=s.type,u=void 0===l?0:l,m=s.data,b=void 0===m?{}:m,f=function(){switch(parseInt(u)){case 1:var e=b.day_delay,t=void 0===e?{}:e,n=b.enable_time_delay,r=void 0!==n&&n,o=b.enable_week_delay,c=void 0!==o&&o,i=b.time_delay,s=void 0===i?{time:""}:i,l=b.week_delay,m=void 0===l?[]:l;if(!Object(N.isEmpty)(t)){var f=t.text+" "+function(e,t){switch(e){case"min":return parseInt(t)>1?Object(y.__)("Minutes","wp-marketing-automations"):Object(y.__)("Minute","wp-marketing-automations");case"hours":return parseInt(t)>1?Object(y.__)("Hours","wp-marketing-automations"):Object(y.__)("Hour","wp-marketing-automations");case"days":return parseInt(t)>1?Object(y.__)("Days","wp-marketing-automations"):Object(y.__)("Day","wp-marketing-automations");case"weeks":return parseInt(t)>1?Object(y.__)("Weeks","wp-marketing-automations"):Object(y.__)("Week","wp-marketing-automations");case"months":return parseInt(t)>1?Object(y.__)("Months","wp-marketing-automations"):Object(y.__)("Month","wp-marketing-automations");default:return""}}(t.unit,t.text),p=[];return c&&!Object(N.isEmpty)(m)&&m.map((function(e){ue.hasOwnProperty(e)&&p.push(ue[e])})),r&&s.hasOwnProperty("time")&&!Object(N.isEmpty)(s.time)?(f+=" "+Object(y.__)("till","wp-marketing-automations")+" "+Object(ce.format)(bwfcrm_contacts_data.time_format,se()(s.time,"HH:mm:ss")),Object(N.isEmpty)(p)||(f+=" "+p.join("/")),s.hasOwnProperty("in_contact_timezone")&&s.in_contact_timezone&&(f+=" "+Object(y.__)("in Contact's Timezone","wp-marketing-automations"))):Object(N.isEmpty)(p)||(f+=" "+p.join("/")),f+"."}break;case 2:var d=b.date,O=void 0===d?"":d,v=b.time_delay,j=void 0===v?{time:"",in_contact_timezone:!1}:v,w=b.enable_step_skip,g=void 0!==w&&w,_=b.skip_to_step,h=void 0===_?{step:"",name:""}:_;if(!Object(N.isEmpty)(O)&&!Object(N.isEmpty)(j.time)){var E="",k="";return j.hasOwnProperty("in_contact_timezone")&&j.in_contact_timezone?E+=" "+Object(y.__)("in Contact's Timezone.","wp-marketing-automations"):E+=".",g&&!Object(N.isEmpty)(h)&&h.hasOwnProperty("step")&&""!=h.step&&h.hasOwnProperty("name")&&""!=h.name&&(k=" ".concat(Object(y.__)("Jump to","wp-marketing-automations")," ").concat(h.name,".")),Object(y.__)("Delay till","wp-marketing-automations")+" "+Object(ce.format)(bwfcrm_contacts_data.date_format,se()(O))+" at "+Object(ce.format)(bwfcrm_contacts_data.time_format,se()(j.time,"HH:mm:ss"))+" "+E+k}break;case 3:var S=b.custom_field,P=b.enable_time_delay,A=void 0!==P&&P,I=b.time_delay,C=b.enable_step_skip,F=void 0!==C&&C,D=b.skip_to_step;if(S.hasOwnProperty("field")&&""!==S.field){var T=Object(y.__)("Delay","wp-marketing-automations");return A?I.hasOwnProperty("duration")&&(T+=" ".concat(Object(y.__)("of","wp-marketing-automations")," ").concat(I.duration," ").concat(I.type," ").concat(I.timing," ")):T+=" "+Object(y.__)("till","wp-marketing-automations"),S.hasOwnProperty("custom_field_label")&&""!==S.custom_field_label?T+=" ".concat(Object(y.__)("Contacts","wp-marketing-automations")," '").concat(S.custom_field_label,"' ").concat(Object(y.__)("field value","wp-marketing-automations")):T+=" ".concat(Object(y.__)("Contacts","wp-marketing-automations")," ( ").concat(S.field," ) ").concat(Object(y.__)("field value","wp-marketing-automations")),S.hasOwnProperty("time")&&""!==S.time&&(T+=" till ".concat(Object(ce.format)(bwfcrm_contacts_data.time_format,se()(S.time,"HH:mm:ss")))),S.hasOwnProperty("in_contact_timezone")&&S.in_contact_timezone?T+=" ".concat(Object(y.__)("in Contact's Timezone","wp-marketing-automations"),"."):T+=".",F&&!Object(N.isEmpty)(D)&&D.hasOwnProperty("step")&&""!=D.step&&D.hasOwnProperty("name")&&""!=D.name&&(T+=" ".concat(Object(y.__)("Jump to","wp-marketing-automations")," ").concat(D.name,".")),T}break;case 4:var x=b.variable_field,M=b.enable_time_delay,L=void 0!==M&&M,Y=b.time_delay,R=b.enable_step_skip,G=void 0!==R&&R,z=b.skip_to_step;if(x.hasOwnProperty("variable")&&""!==x.variable){var H=Object(y.__)("Delay","wp-marketing-automations");return L?Y.hasOwnProperty("duration")&&(H+=" of ".concat(Y.duration," ").concat(Y.type," ").concat(Y.timing," ")):H+=" "+Object(y.__)("till","wp-marketing-automations"),x.hasOwnProperty("variable")&&""!==x.variable&&(H+=" ".concat(Object(y.__)("Orders meta key","wp-marketing-automations")," ").concat(x.variable," ").concat(Object(y.__)("value","wp-marketing-automations"))),x.hasOwnProperty("time")&&""!==x.time&&(H+=" ".concat(Object(y.__)("till","wp-marketing-automations")," ").concat(Object(ce.format)(bwfcrm_contacts_data.time_format,se()(x.time,"HH:mm:ss")))),x.hasOwnProperty("in_contact_timezone")&&x.in_contact_timezone?H+=" ".concat(Object(y.__)("in Contact's Timezone","wp-marketing-automations"),"."):H+=".",G&&!Object(N.isEmpty)(z)&&z.hasOwnProperty("step")&&""!=z.step&&z.hasOwnProperty("name")&&""!=z.name&&(H+=" ".concat(Object(y.__)("Jump to","wp-marketing-automations")," ").concat(z.name,".")),H}break;default:return Object(a.createElement)(a.Fragment,null)}return Object(a.createElement)(a.Fragment,null)};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-delay"},Object(a.createElement)(J.a,{size:28,icon:"time-left"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(y.__)("Step","wp-marketing-automations")+" "+n),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(y.__)("Delay","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick"},Object(a.createElement)("div",{className:"bwf-step-content-content"},le.hasOwnProperty(u)&&Object(a.createElement)("div",{className:"bwf-node-content-type"},le[u]),Object(a.createElement)("div",{className:"bwf-node-content-label bwf-two-line-ellipse-text",title:f()},f()))))),Object(a.createElement)("div",{className:"bwf-node-status"},Object(a.createElement)("div",{className:"bwf-queued-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(y.__)("Queued","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},c.hasOwnProperty("queued")?Object(o.vc)(parseInt(c.queued)):0)),Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(y.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},c.hasOwnProperty("completed")?Object(o.vc)(parseInt(c.completed)):0))))),Object(a.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1}))},be=function(e){return Object(a.createElement)("div",{className:e&&e.data&&e.data.direction&&"no"===e.data.direction?"bwf-yes-no-node  bwf-no-node":"bwf-yes-no-node bwf-yes-node"},Object(a.createElement)(K.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(a.createElement)("span",{className:"bwf-yes-no-wrap"},e&&e.data&&e.data.direction&&"no"===e.data.direction?Object(y.__)("No","wp-marketing-automations"):Object(y.__)("Yes","wp-marketing-automations")),Object(a.createElement)(K.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))},fe=function(e){var t=e.id,n=e.data,r=void 0===n?{}:n,c=r.stats,i=void 0===c?{}:c,s=r.desc_text,l=void 0===s?"":s,u=r.desc,m=void 0===u?"":u;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)("div",{className:"bwf-inner-wrapper "},Object(a.createElement)("div",{className:"bwf-node-brick"},Object(a.createElement)("div",{className:"bwf-node-icon icon-split-test"},Object(a.createElement)(J.a,{size:26,icon:"split-test"})),Object(a.createElement)("div",{className:"bwf-node-inner-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},Object(y.__)("Step","wp-marketing-automations")+" "+t),Object(a.createElement)("div",{className:"bwf-node-content-label"},Object(y.__)("Split Path","wp-marketing-automations"))),Object(a.createElement)("div",{className:"bwf-node-action"})),Object(a.createElement)("div",{className:"bwf-node-step-content"},Object(a.createElement)("div",{className:"bwf-step-content"},Object(a.createElement)("div",{className:"bwf-step-brick bwf-split-wrap"},Object(a.createElement)("div",{className:"bwf-step-content-content"},Object(a.createElement)("div",{className:"bwf-node-content-type"},""!==l?l:"-"),""!==m&&Object(a.createElement)("div",{className:"bwf-node-content-label bwf-node-desc bwf-two-line-ellipse-text"},m))))),Object(a.createElement)("div",{className:"bwf-node-status bwf-node-mt-10"},Object(a.createElement)("div",{className:"bwf-status-wrap"},Object(a.createElement)("span",{className:"bwf-node-status-label"},Object(y.__)("Completed","wp-marketing-automations")),Object(a.createElement)("span",{className:"bwf-node-status-count"},i.hasOwnProperty("completed")?Object(o.vc)(parseInt(i.completed)):0))))),Object(a.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1}))},pe=function(e){var t=e.data,n=void 0===t?{}:t,r=Object(o.Rc)(),c=n.path,i=void 0===c?"1":c;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-splitpath-node-wrapper"},Object(a.createElement)(K.d,{type:"target",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-split-node split-path-"+i},Object(y.__)("Path","wp-marketing-automations")+" "+r[i])),Object(a.createElement)(K.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0}}))},de=function(){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-node-wrapper"},Object(a.createElement)(K.d,{type:"source",position:"top",isConnectable:!1}),Object(a.createElement)("div",{className:"bwf-node-content bwf-end"},Object(a.createElement)("div",{className:"bwf-node-content-item"},Object(y.__)("End","wp-marketing-automations")))))},Oe=(n(1436),n(1160),n(26));function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return je(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?je(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var ye=function(e){var t=e.stepTitle,n=void 0===t?"":t,r=e.onClose,c=e.stepId,s=e.automationId,l=e.eventSlug,u=ve(Object(a.useState)(!0),2),m=u[0],b=u[1],f=ve(Object(a.useState)(!1),2),p=f[0],d=f[1],O=ve(Object(a.useState)([]),2),v=O[0],j=O[1],w=Object(K.l)(),g=Object(K.n)().setCenter;Object(a.useEffect)((function(){!function(){try{i()({path:Object(o.B)("/automation/".concat(s,"/split/").concat(c,"/preview")),method:"GET"}).then((function(e){b(!1),200===e.code?Object(N.isEmpty)(e.result)||j(e.result):d(!0)}))}catch(e){d(!0),b(!1)}}()}),[c]);var _=Object(a.useRef)(),h={end:de,wait:me,split:fe,action:oe,yesNoNode:be,splitpath:pe,conditional:ne};Object(a.useEffect)((function(){Object(N.isNull)(document.querySelector("#bwf-single-automation-wrap"))||(_.current=document.querySelector("#bwf-single-automation-wrap").getBoundingClientRect())}),[m]),Object(a.useEffect)((function(){var e=0,t=0,n=w.getState().nodes;if(n.length&&_.current&&!m){var a=n[0];a.hasOwnProperty("__rf")?(e=a.__rf.position.x+140,t=a.__rf.position.y):(e=a.position.x+140,t=a.position.y),t=parseFloat(t)+.4*parseFloat(_.current.height),g(e,t,.8)}}),[m,v,_.current]);return Object(a.createElement)(P.Modal,{title:Object(y.sprintf)(Object(y.__)("Preview - %s ","wp-marketing-automations"),n),onRequestClose:function(){return r(!0)},className:"bwf-admin-modal bwf-admin-modal-xxxl bwf-split-path-analytics-modal",shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1},Object(a.createElement)(o.b.Provider,{value:{automationId:s,eventSlug:l,stepId:c}},Object(a.createElement)("div",{className:"bwf-single-automation-wrap",id:"bwf-single-automation-wrap"},m?Object(a.createElement)(Z.a,null):Object(a.createElement)(a.Fragment,null,p?Object(a.createElement)(Oe.a,{status:"error"},Object(y.__)("Unable to fetch split path preview","wp-marketing-automations")):Object(a.createElement)(K.f,{defaultZoom:.9,minZoom:.5,maxZoom:3,nodeTypes:h,nodesConnectable:!1,nodesDraggable:!1,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,elements:Object(X.a)(v,!0)},Object(a.createElement)(K.a,{color:"#fff"}),Object(a.createElement)(K.c,{showInteractive:!1}))))))},we=(n(1437),function(e){var t=e.fill,n=e.height,r=void 0===n?16:n;return Object(a.createElement)("span",{className:"bwf-ripple-wrap",style:{height:"".concat(r,"px")}},Object(a.createElement)("span",{className:I()("dot",{transition:"#09B29C"===t,"bwf-mr-16":void 0!==t}),style:{"--ripple-var":t}}))});function ge(){return(ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}function _e(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var s=a&&a.prototype instanceof i?a:i,l=Object.create(s.prototype);return Ee(l,"_invoke",function(n,a,r){var o,i,s,l=0,u=r||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,i=0,s=e,b.n=n,c}};function f(n,a){for(i=n,s=a,t=0;!m&&l&&!r&&t<u.length;t++){var r,o=u[t],f=b.p,p=o[2];n>3?(r=p===a)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(i=0,b.v=a,b.n=o[1]):f<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,b.n=p,i=0))}if(r||n>1)return c;throw m=!0,a}return function(r,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:n.call(a,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(n,r,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(Ee(t={},a,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ee(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,Ee(m,"constructor",l),Ee(l,"constructor",s),s.displayName="GeneratorFunction",Ee(l,r,"GeneratorFunction"),Ee(m),Ee(m,r,"Generator"),Ee(m,a,(function(){return this})),Ee(m,"toString",(function(){return"[object Generator]"})),(he=function(){return{w:o,m:b}})()}function Ee(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(Ee=function(e,t,n,a){function o(t,n){Ee(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,a)}function ke(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o,c,i=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(i.push(a.value),i.length!==t);s=!0);}catch(e){l=!0,r=e}finally{try{if(!s&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(e,t)||Se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var Ae=function(e){var t=e.automationId,n=Ne(Object(a.useState)(!0),2),c=n[0],s=n[1],l=Ne(Object(a.useState)({}),2),u=l[0],m=l[1],b=Ne(Object(a.useState)({}),2),f=b[0],p=b[1],d=Ne(Object(a.useState)(""),2),O=d[0],v=d[1],j=Ne(Object(a.useState)(""),2),w=j[0],g=j[1];Object(a.useEffect)((function(){C()}),[]);var _=Object(o.Rc)(),h=Object(E.a)().getAutomationData,S=Object(k.a)().setAutomationData,P=h().title,A=void 0===P?"":P;Object(r.a)("analytics",""!==A&&""===O?A:O,!0,!1,null,t,!1,!0);var I,C=function(){var e,n=(e=he().m((function e(){var n;return he().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,i()({path:Object(o.B)("/automation/".concat(t,"/split-stats")),method:"GET"}).then((function(e){if(200===e.code){if(e.hasOwnProperty("result")&&!Object(N.isEmpty)(e.result)&&e.result.hasOwnProperty("data")&&!Object(N.isEmpty)(e.result.data)&&m(e.result.data),e.hasOwnProperty("result")&&!Object(N.isEmpty)(e.result)&&e.result.hasOwnProperty("automation_data")&&!Object(N.isEmpty)(e.result.automation_data)){var t=e.result.automation_data,n=t.title,a=void 0===n?"":n,r=t.event,o=void 0===r?"":r;""!==a&&v(a),""!==o&&g(o),S("data",e.result.automation_data)}s(!1)}}));case 1:e.n=3;break;case 2:e.p=2,n=e.v,console.log(n),s(!1);case 3:return e.a(2)}}),e,null,[[0,2]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){ke(o,a,r,c,i,"next",e)}function i(e){ke(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),F=Object(a.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-title"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-header-date"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-header-tag bwf-split-ongoing"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-10"}))),Object(a.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-preview"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))),D=Object(a.createElement)("div",{className:"bwf-split-analytics-item"},Object(a.createElement)("div",{className:"bwf-split-description"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},[1,2].map((function(e){return Object(a.createElement)("div",{className:"bwf-split-analytics-path-item",key:e},Object(a.createElement)("div",{className:"bwf-split-analytics-path-header"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-15"})),Object(a.createElement)("div",{className:"bwf-split-analytics-path-content"},_e(Array(8)).map((function(e,t){return Object(a.createElement)("div",{className:"bwf-split-test-path-content-stat",key:t},Object(a.createElement)("span",{className:"bwf-split-test-path-content-value"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-30 bwf-h-15"})),Object(a.createElement)("span",{className:"bwf-split-test-path-content-label"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-15"})))}))))})))),T=function(e){var t=e.path,n=void 0===t?[]:t,r=e.desc,o=void 0===r?"":r;return Object(N.isEmpty)(n)?Object(a.createElement)("div",{className:"bwf-split-analytics-item"},""!==o&&Object(a.createElement)("div",{className:"bwf-split-description"},Object(a.createElement)("span",{className:"bwf-split-desc-heading"},Object(y.__)("Description","wp-marketing-automations")),":",Object(a.createElement)("span",{className:"bwf-split-desc-text"},o)),Object(a.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},Object(a.createElement)("div",{className:"bwf-mb-10"},Object(y.__)("No paths found","wp-marketing-automations")))):Object(a.createElement)("div",{className:"bwf-split-analytics-item"},""!==o&&Object(a.createElement)("div",{className:"bwf-split-description"},Object(a.createElement)("span",{className:"bwf-split-desc-heading"},Object(y.__)("Description","wp-marketing-automations")),":",Object(a.createElement)("span",{className:"bwf-split-desc-text"},o)),Object(a.createElement)("div",{className:"bwf-split-analytics-path-wrapper"},n.map((function(e,t){var n=e.tile,r=void 0===n?[]:n,o=e.path,c=void 0===o?"":o,i=e.winner,s=void 0!==i&&i;return Object(a.createElement)("div",{className:"bwf-split-analytics-path-item",key:t},Object(a.createElement)("div",{className:"bwf-split-analytics-path-header splitpath-"+c},Object(a.createElement)("span",{className:"bwf-split-path-title"},Object(y.__)("Path","wp-marketing-automations")+" "+_[c]),s&&Object(a.createElement)(J.a,{icon:"winner"})),Object(a.createElement)("div",{className:"bwf-split-analytics-path-content"},r.map((function(e,t){return Object(a.createElement)("div",{className:"bwf-split-test-path-content-stat",key:t},Object(a.createElement)("span",{className:"bwf-split-test-path-content-value"},e.v),Object(a.createElement)("span",{className:"bwf-split-test-path-content-label"},e.l))}))))}))))},x=function(e){var n=e.started,r=void 0===n?"":n,c=e.status,i=void 0===c?"":c,s=e.title,l=void 0===s?"":s,u=e.completed,m=void 0===u?"":u,b=e.step_id,f=void 0===b?"":b;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-split-analytics-item-header"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-left"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-title"},""!==l?l:"-"),Object(a.createElement)("div",{className:"bwf-split-analytics-header-date"},""!==r?Object(a.createElement)(a.Fragment,null,Object(y.__)("Started on","wp-marketing-automations")," ",Object(o.jb)(r),"completed"===i&&""!==m&&Object(a.createElement)(a.Fragment,null," | ",Object(y.__)(" Ended On","wp-marketing-automations")," ",Object(o.jb)(m))):Object(a.createElement)(a.Fragment,null)),""!==i&&Object(a.createElement)("div",{className:"bwf-split-analytics-header-tag"},"ongoing"===i&&Object(a.createElement)(we,{fill:"#09B29C"}),Object(a.createElement)("span",null,i))),Object(a.createElement)("div",{className:"bwf-split-analytics-header-right"},Object(a.createElement)("div",{className:"bwf-split-analytics-header-preview components-form-toggle__input",onClick:function(e){e.stopPropagation(),p({stepTitle:""!==l?l:"",stepId:f,automationId:t})}},Object(a.createElement)(J.a,{icon:"view",size:15}),Object(y.__)("Preview","wp-marketing-automations")))))},M=Object(a.createElement)("div",{className:"bwf-split-analytics-zero-state"},Object(a.createElement)(J.a,{icon:"split-analytics-zero"}),Object(a.createElement)("div",{className:"bwf-heading"},Object(y.__)("No Split Path Created","wp-marketing-automations")),Object(a.createElement)("div",{className:"bwf-desc"},Object(y.__)("Once you create a split path in the work flow. You stats will start appear here.","wp-marketing-automations")));return Object(a.createElement)("div",{className:"bwf-split-analytics-wrapper"},!c&&Object(N.isEmpty)(u)?Object(a.createElement)(a.Fragment,null,M):Object(a.createElement)(a.Fragment,null,c?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(a.Fragment,null,[1,2].map((function(e){return Object(a.createElement)("div",{key:e,className:" bwf-c-s-collapsible"},Object(a.createElement)("div",{className:"bwf-c-s-heading"},Object(a.createElement)("div",{className:"bwf-accordion-label-elm"},F),Object(a.createElement)("span",{className:"acc-icon"})),Object(a.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion"},D))})))):Object(a.createElement)(Q.a,{items:(I=[],u.map((function(e,t){I.push({key:t,label:x(e),display:T(e)})})),I)})),!Object(N.isEmpty)(f)&&Object(a.createElement)(K.e,null,Object(a.createElement)(ye,ge({},f,{onClose:function(){return p({})},eventSlug:w}))))},Ie=n(344),Ce=(n(1438),n(1127)),Fe=n(1100);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function Me(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,a,r,o){var s=a&&a.prototype instanceof i?a:i,l=Object.create(s.prototype);return Le(l,"_invoke",function(n,a,r){var o,i,s,l=0,u=r||[],m=!1,b={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,i=0,s=e,b.n=n,c}};function f(n,a){for(i=n,s=a,t=0;!m&&l&&!r&&t<u.length;t++){var r,o=u[t],f=b.p,p=o[2];n>3?(r=p===a)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(i=0,b.v=a,b.n=o[1]):f<p&&(r=n<3||o[0]>a||a>p)&&(o[4]=n,o[5]=a,b.n=p,i=0))}if(r||n>1)return c;throw m=!0,a}return function(r,u,p){if(l>1)throw TypeError("Generator is already running");for(m&&1===u&&f(u,p),i=u,s=p;(t=i<2?e:s)||!m;){o||(i?i<3?(i>1&&(b.n=-1),f(i,s)):b.n=s:b.v=s);try{if(l=2,o){if(i||(r="next"),t=o[r]){if(!(t=t.call(o,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,i<2&&(i=0)}else 1===i&&(t=o.return)&&t.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=e}else if((t=(m=b.n<0)?s:n.call(a,b))!==c)break}catch(t){o=e,i=1,s=t}finally{l=1}}return{value:t,done:m}}}(n,r,o),!0),l}var c={};function i(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(Le(t={},a,(function(){return this})),t),m=l.prototype=i.prototype=Object.create(u);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Le(e,r,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=l,Le(m,"constructor",l),Le(l,"constructor",s),s.displayName="GeneratorFunction",Le(l,r,"GeneratorFunction"),Le(m),Le(m,r,"Generator"),Le(m,a,(function(){return this})),Le(m,"toString",(function(){return"[object Generator]"})),(Me=function(){return{w:o,m:b}})()}function Le(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}(Le=function(e,t,n,a){function o(t,n){Le(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))})(e,t,n,a)}function Ye(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(a,r)}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=De(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=e.match.params,n=t.automationId,c=t.type,u=void 0===c?"contact":c,f=e.isV2,p=void 0===f||f,d=Object(b.i)(),O=d.period,g=d.compare,S=d.interval,P=d.after,A=d.before,I=Object(s.a)(),C=I.setL2NavAlign,F=I.setL2Title,T=I.setPageCountData,x=(0,Object(l.a)().getPageCountData)(),L=Object(h.a)(),Y=L.fetchAnalytics,R=L.setAnalyticsValues,G=Object(w.a)(),z=G.getAnalyticsAutomationData,q=G.getAnalyticsTileData,B=G.getAnalyticsSingleAutomationFailedCount,U=G.getAnalyticsLoading,V=z(),$=B(),J=V.title,Q=void 0===J?"":J,Z=Object(k.a)().setAutomationData,K=U();Object(a.useEffect)((function(){Object(N.isEmpty)(V)||Z("data",V)}),[V]),Object(a.useEffect)((function(){K||T(Ge(Ge({},x),{},{single_a_contacts:$}))}),[$]),Object(a.useEffect)((function(){return function(){R("automation",{})}}),[]);var X=Object(E.a)(),ee=X.getAutomationData,te=X.getAutomationId,ne=ee().title,ae=void 0===ne?"":ne,re=te(),oe=q(),ce=Object(M.a)(Object(o.Ab)()).formatAmount;Object(r.a)("analytics","",!0,!1,null,n,!1,p),Object(a.useEffect)((function(){C("left"),Object(o.m)("Automation #"+n),R("automationId",n)}),[]),Object(a.useEffect)((function(){F(parseInt(n)===parseInt(re)&&""!==ae&&""===Q?ae:""!==Q?Q:Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-15 bwf-w-90"}))}),[ae,Q,n]);var ie=function(e){return e.compare="previous_year",Object(m.e)(e).primary},se=function(){for(var e=ie(d),t=0,n=0,a=0,r=0,o=0,c=0,i=0,s=0,l=[],u=e.after;u.isBefore(e.before);u.add(1,"days")){var m=Math.floor(11*Math.random()),b=Math.floor(Math.random()*parseInt(m)),f=Math.floor(Math.random()*parseInt(m)),p=Math.floor(Math.random()*parseInt(f)),O=Math.floor(100*Math.random()).toFixed(2),v=Math.floor(10*Math.random()),j=Math.floor(10*Math.random()),y=Math.floor(10*Math.random()),w=parseFloat(O)>0&&parseInt(p)>0?parseFloat(parseFloat(O)/parseInt(p)).toFixed(2):0;l.push({date_end_gmt:u.format("YYYY-MM-DD")+" 23:59:59",date_start_gmt:u.format("YYYY-MM-DD")+" 00:00:00",end_date:u.format("YYYY-MM-DD")+" 23:59:59",interval:u.format("YYYY-MM-DD"),start_date:u.format("YYYY-MM-DD")+" 00:00:00",subtotals:{click_rate:(b/m*100).toFixed(2),email_click:b,email_open:f,email_sents:m,open_rate:(f/m*100).toFixed(2),total_orders:p,total_revenue:parseFloat(O).toFixed(2),active_contacts:v,complete_contacts:j,unsubscribers:y,revenue:parseFloat(O).toFixed(2),conversions:p,aov:parseFloat(w).toFixed(2)}}),t+=f,n+=m,a+=b,r+=p,o=parseFloat(o)+parseFloat(O),c+=v,i+=j,s+=y}R("tiles",{click_rate:(a/n*100).toFixed(2),email_click:a,email_open:t,email_sents:n,open_rate:(t/n*100).toFixed(2),total_orders:r,total_revenue:o,active_contacts:c,complete_contacts:i,unsubscribers:s,revenue:o,conversions:r,aov:(parseFloat(o)/parseInt(r)).toFixed(2)}),R("analytics",l),R("isLoading",!1)},le=function(){var e,t=(e=Me().m((function e(t,a){var r,c,s,l,m,b;return Me().w((function(e){for(;;)switch(e.p=e.n){case 0:if(R("analytics",[]),R("tiles",[]),Object(o.cc)()){e.n=5;break}return e.p=1,e.n=2,i()({path:Object(o.B)("/automation/".concat(n,"/contacts?limit=1&offset=0&type=failed")),method:"GET"}).then((function(e){e.hasOwnProperty("result")&&e.result.hasOwnProperty("automation_data")&&Z("data",e.result.automation_data)}));case 2:e.n=4;break;case 3:e.p=3,m=e.v,console.log(m);case 4:return setTimeout((function(){se()}),1e3),e.a(2);case 5:if(r=ie(t),c="",s="",l="",!r){e.n=12;break}Object(N.isEmpty)(r.after)||(c=r.after.format("YYYY-MM-DD HH:mm:ss")),Object(N.isEmpty)(r.before)||(s=r.before.format("YYYY-MM-DD 23:59:59")),b=u,e.n="email"===b?6:"sms"===b?7:"whatsapp"===b?8:"contact"===b?9:10;break;case 6:return l=1,e.a(3,11);case 7:return l=2,e.a(3,11);case 8:return l=3,e.a(3,11);case 9:return l=4,e.a(3,11);case 10:return l=1,e.a(3,11);case 11:Object(N.isEmpty)(c)||Object(N.isEmpty)(s)||Y(n,c,s,a,1,l);case 12:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){Ye(o,a,r,c,i,"next",e)}function i(e){Ye(o,a,r,c,i,"throw",e)}c(void 0)}))});return function(e,n){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){if("split"!==u){var e=d.hasOwnProperty("interval")?d.interval:"day";le(d,e)}}),[O,g,S,P,A,u]);var ue=[{slug:"contact",name:Object(y.__)("Contacts","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/contact")},{slug:"email",name:Object(y.__)("Emails","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/email")}];Object(N.isEmpty)(Object(o.z)())||ue.push({slug:"sms",name:Object(y.__)("SMS","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/sms")}),Object(o.cc)()&&ue.push({slug:"split",name:Object(y.__)("Split Path","wp-marketing-automations"),path:"/automation/".concat(n,"/analytics/split")});var me=function(e){return Object(N.isEmpty)(oe)||!oe.hasOwnProperty(e)||Object(N.isNull)(oe[e])?0:oe[e]},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contact";return"email"===e?[{key:"email_sents",title:Object(y.__)("Sent","wp-marketing-automations"),icon:"sent-new",value:parseInt(me("email_sents"))},{key:"open_rate",title:Object(y.__)("Open Rate","wp-marketing-automations"),icon:"open-rate",value:parseFloat(me("open_rate"))+" %",isPercentage:!0},{key:"click_rate",title:Object(y.__)("Click Rate","wp-marketing-automations"),icon:"click-rate",value:parseFloat(me("click_rate"))+" %",isPercentage:!0}].concat(Te(Object(o.sc)()?[{key:"total_orders",title:Object(y.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:me("total_orders")},{key:"total_revenue",title:Object(y.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:ce(me("total_revenue")),isCurrency:!0}]:[])):"sms"===e?[{key:"email_sents",title:Object(y.__)("Sent","wp-marketing-automations"),icon:"sent",value:parseInt(me("email_sents"))},{key:"email_click",title:Object(y.__)("Clicks","wp-marketing-automations"),icon:"click-rate",value:parseInt(me("email_click"))}].concat(Te(Object(o.sc)()?[{key:"total_orders",title:Object(y.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:parseInt(me("total_orders"))},{key:"total_revenue",title:Object(y.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:ce(me("total_revenue")),isCurrency:!0}]:[])):"contact"===e?[{key:"active_contacts",title:Object(y.__)("Active Contacts","wp-marketing-automations"),icon:"add-contact-new",value:parseInt(me("active_contacts"))},{key:"complete_contacts",title:Object(y.__)("Completed Contacts","wp-marketing-automations"),icon:"contact-new",value:parseInt(me("complete_contacts"))}].concat(Te(Object(o.sc)()?[{key:"conversions",title:Object(y.__)("Orders","wp-marketing-automations"),icon:"order-summary",value:me("conversions")},{key:"revenue",title:Object(y.__)("Revenue","wp-marketing-automations"),icon:"revenue-new",value:ce(me("revenue")),isCurrency:!0},{key:"aov",title:Object(y.__)("AOV","wp-marketing-automations"),icon:"order-revenue",value:ce(parseFloat(me("aov"))),isCurrency:!0}]:[]),[{key:"unsubscribers",title:Object(y.__)("Unsubscribes","wp-marketing-automations"),icon:"unsubscribes",value:parseInt(me("unsubscribers"))}]):void 0};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>#bwfcrm-page{ overflow: auto !important; }</style>"}}),Object(a.createElement)(j.a,null),Object(a.createElement)("div",{className:"bwf-single-automation-body-header",style:{paddingBottom:"8px"}},Object(a.createElement)("div",{className:"bwf-content-header-left"},Object(a.createElement)("div",{className:"bwf-content-header-title2"},Object(y.__)("Analytics","wp-marketing-automations")),!Object(o.cc)()&&o.e)),Object(a.createElement)(Ie.a,{tabs:ue,selected:u}),Object(a.createElement)("div",{className:"bwf-crm-analytics-wrap bwf-crm-emails-report-wrap bwf-table-with-border "},!o.ac&&!Object(o.cc)()&&Object(a.createElement)(Fe.a,{onPage:!0,modalContent:{proLink:Object(o.gb)("upgrade",{utm_medium:"Automation+Analytics+Upgrade+Modal"})}}),"split"!==u?Object(a.createElement)(a.Fragment,null,Object(a.createElement)(v,{query:d},o.ac&&Object(a.createElement)(Ce.a,{title:Object(y.__)("Analytics","wp-marketing-analytics"),message:"contact"===u?Object(y.__)("Analyse the sample data to review Contact Analytics. Use this report to assess key metrics for contacts within the automation.","wp-marketing-automations"):Object(y.__)("Analyse the sample data to review Email Analytics. Use this report to assess key email metrics with the automation.","wp-marketing-automations"),proLink:Object(o.gb)("upgrade",{utm_medium:"Automation+Analytics+Sample+Data+Notice"})})),Object(a.createElement)("div",{className:"bwf_clear_16"}),Object(a.createElement)(_,{query:d,type:u,automationId:n,metrics:function(e){return be(e)}}),Object(a.createElement)("div",{className:"bwf_clear_24"}),Object(a.createElement)(D,{query:d,type:u,metrics:function(e){return be(e)}}),function(){switch(u){case"email":return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(H,{query:d,automationId:n}));case"sms":return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(W,{query:d,automationId:n}));default:return Object(a.createElement)(a.Fragment,null)}}()):Object(o.cc)()?Object(a.createElement)(Ae,{automationId:n}):null))}}}]);