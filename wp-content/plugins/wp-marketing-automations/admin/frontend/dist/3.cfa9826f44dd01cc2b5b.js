(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1164:function(t,e,r){"use strict";r.d(e,"a",(function(){return V}));var n=r(96),a=r(9),o=r.n(a),i=r(3),u=r(1),c=r(0),l=r(16),s=r.n(l);function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return p(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function b(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof u?n:u,l=Object.create(c.prototype);return y(l,"_invoke",function(r,n,a){var o,u,c,l=0,s=a||[],f=!1,p={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,r){return o=e,u=0,c=t,p.n=r,i}};function b(r,n){for(u=r,c=n,e=0;!f&&l&&!a&&e<s.length;e++){var a,o=s[e],b=p.p,y=o[2];r>3?(a=y===n)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=b&&((a=r<2&&b<o[1])?(u=0,p.v=n,p.n=o[1]):b<y&&(a=r<3||o[0]>n||n>y)&&(o[4]=r,o[5]=n,p.n=y,u=0))}if(a||r>1)return i;throw f=!0,n}return function(a,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,y),u=s,c=y;(e=u<2?t:c)||!f;){o||(u?u<3?(u>1&&(p.n=-1),b(u,c)):p.n=c:p.v=c);try{if(l=2,o){if(u||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=t}else if((e=(f=p.n<0)?c:r.call(n,p))!==i)break}catch(e){o=t,u=1,c=e}finally{l=1}}return{value:e,done:f}}}(r,a,o),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(y(e={},n,(function(){return this})),e),f=l.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,y(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=l,y(f,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,a,"GeneratorFunction"),y(f),y(f,a,"Generator"),y(f,n,(function(){return this})),y(f,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:o,m:p}})()}function y(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}(y=function(t,e,r,n){function o(e,r){y(t,e,(function(t){return this._invoke(e,r,t)}))}e?a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(o("next",0),o("throw",1),o("return",2))})(t,e,r,n)}function m(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}function d(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){m(o,n,a,i,u,"next",t)}function u(t){m(o,n,a,i,u,"throw",t)}i(void 0)}))}}var v=function(t){return{name:t.slug,className:"bwf-search-bwf-".concat(t.slug,"-result"),options:function(e){return(r=d(b().m((function e(r){var n,a;return b().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,o()({path:Object(i.B)("/automation/rules/".concat(t.slug,"/suggestions?search=")+r),method:"GET"});case 1:return n=e.v,(a=n&&n.result?n.result:{})&&(a=Object.keys(a).map((function(t){return{key:String(t),label:a[t]}}))),e.a(2,a)}}),e)}))),function(t){return r.apply(this,arguments)})(e);var r},isDebounced:!0,getOptionIdentifier:function(t){return t.key},getOptionKeywords:function(t){return[t.label]},getFreeTextOptions:function(e,r){var n,a=f(r);try{for(a.s();!(n=a.n()).done;){if(n.value.value.label.toLowerCase()===e.toLowerCase())return[]}}catch(t){a.e(t)}finally{a.f()}return[{key:"name",label:Object(c.createElement)("span",{key:"name",className:"bwf-search-result-name"},s()({mixedString:"Search ".concat(t.name," with term {{query /}}"),components:{query:Object(c.createElement)("strong",{className:"components-form-token-field__suggestion-match"},e)}})),value:{key:"0",label:e}}]},getOptionLabel:function(t,e){var r=Object(i.o)(t.label,e)||{};return Object(c.createElement)("span",{key:"name",className:"bwf-search-result-name","aria-label":t.label},Object.keys(r).length>0?Object(c.createElement)(c.Fragment,null,r.suggestionBeforeMatch,Object(c.createElement)("strong",{className:"components-form-token-field__suggestion-match"},r.suggestionMatch),r.suggestionAfterMatch):t.label)},getOptionCompletion:function(t){return t}}},h=function(t){return function(){var e=d(b().m((function e(r){var n,a;return b().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o()({path:Object(i.B)("/automation/rules/".concat(t.slug,"/suggestions?search=")+r),method:"GET"});case 1:return n=e.v,(a=n&&n.result?n.result:{})&&(a=Object.keys(a).map((function(t){return{key:String(t),label:a[t]}}))),e.a(2,a);case 2:return e.p=2,e.v,e.a(2,[])}}),e,null,[[0,2]])})));return function(t){return e.apply(this,arguments)}}()};function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var k=function(t){switch(t.type){case"Text":case"Number":case"Days":case"datetime":case"time":case"Date":return{input:{component:t.type,extraProps:t.hasOwnProperty("extra_props")?t.extra_props:{}}};case"Select":return{input:{component:"selectcontrol",options:t.options?Object.keys(t.options).map((function(e){return{value:e,label:t.options[e]}})):[],default:t.default}};case"key-value":return{input:{component:"key-value",options:t.options?Object.keys(t.options).map((function(e){return{value:e,label:t.options[e]}})):[]}};case"Search":return{input:{component:"Search",type:v(t),getLabels:h(t),emptySearch:!0}};case"product-qty":return{input:{component:"product-qty",type:v(t),getLabels:h(t),emptySearch:!0}};case"search-list":return{input:{component:"search-list",apiPath:t.slug,multiple:!(!t.hasOwnProperty("multiple")||!t.multiple)}};default:return{}}},_=function(t){return t&&t.operators?{rules:Object.keys(t.operators).map((function(e){return{label:t.operators[e],value:e}}))}:{}},S=function(t){if(!t||!t.name||!t.slug)return{};var e=t.hasOwnProperty("title")&&""!==t.title?t.title:t.name;return{labels:{add:t.name,label:e,valueLabel:t.value_label?t.value_label:Object(u.__)("Value","wp-marketing-automations"),remove:Object(u.__)("Remove ","wp-marketing-automations")+e,rule:Object(u.__)("Select ","wp-marketing-automations")+t.name+Object(u.__)(" filter match","wp-marketing-automations"),title:"{{title}}".concat(e,"{{/title}} {{rule/}} {{filter /}}"),filter:Object(u.__)("Select ","wp-marketing-automations")+e}}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(!t||!t.type)&&j(j(j(j({},e),k(t)),_(t)),S(t))},P=r(2),A=function(t,e){var r=e.type,n=e.options,a=void 0===n?{}:n,o=e.operators,l=void 0===o?{}:o,s=t.rule,f=t.data;if(["is_blank","is_not_blank"].includes(s)){if("key-value"===r){a&&a[f[0]]&&(f[0]=a[f[0]]);var p=l&&l[s]?l[s]:s;return f[0]+" "+p}return""}switch(r){case"product-qty":if(!f||!Array.isArray(f.search))return"";var b="";return f.qty&&(b+=f.qty+Object(u.__)(" qty of ","wp-marketing-automations")),b+=f.search.map((function(t){return t.label})).join(", ");case"Search":return f&&Array.isArray(f)?f.map((function(t){return t.label})).join(", "):"";case"Select":return f?a&&a[f]?a[f]:f:"";case"key-value":if(!Array.isArray(f)||2!==f.length)return"";a&&a[f[0]]&&(f[0]=a[f[0]]);var y=l&&l[s]?l[s]:s;return y||(y=":"),f.join(" ".concat(y," "));case"Date":if(Object(P.isObject)(f)){var m=f.from,d=void 0===m?"":m,v=f.to,h=void 0===v?"":v;if(!Object(P.isEmpty)(d)&&!Object(P.isEmpty)(h))return Object(c.createElement)(c.Fragment,null,Object(i.ib)(d,!0,!1)," "+Object(u.__)("and","wp-marketing-automations")+" ",Object(i.ib)(h,!0,!1))}return Object(i.jb)(f,!0,!1);case"datetime":if(Object(P.isObject)(f)){var g=f.from,O=void 0===g?"":g,j=f.to,w=void 0===j?"":j;if(!Object(P.isEmpty)(O)&&!Object(P.isEmpty)(w))return Object(c.createElement)(c.Fragment,null,Object(i.jb)(O,!0,!1)," "+Object(u.__)("and","wp-marketing-automations")+" ",Object(i.jb)(w,!0,!1))}return Object(i.jb)(f,!0,!1);case"Days":if(Object(P.isObject)(f)){var k=f.from,_=void 0===k?"":k,S=f.to,E=void 0===S?"":S;if(!Object(P.isEmpty)(_)&&!Object(P.isEmpty)(E))return _+" "+Object(u.__)("and","wp-marketing-automations")+" "+E}return f;case"search-list":return f&&Array.isArray(f)?f.map((function(t){return t.name})).join(", "):"";default:return f}},x=function(t,e){var r=e.type,n=(e.options,e.operators),a=void 0===n?{}:n,o=t.rule,i=(t.data,a&&a[o]?a[o]:o);switch(r){case"Select":return o?i:": ";case"key-value":return": ";default:return i}},T=function(t){return function(e){var r=Object(P.cloneDeep)(e);return t&&Object.keys(t).length&&Array.isArray(r)&&r.length?r.map((function(e){return e.map((function(e){var r=Object.keys(t).find((function(t){return e.filter===t}));return!(!r||!t[r])&&s()({mixedString:t[r].readable_text,components:{key:Object(c.createElement)(c.Fragment,null,t[r].hasOwnProperty("title")&&""!==t[r].title?t[r].title:t[r].name),rule:Object(c.createElement)(c.Fragment,null,x(e,t[r])),value:Object(c.createElement)("strong",null,A(e,t[r]))}})}))})):[]}};function G(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=D(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function I(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var c=n&&n.prototype instanceof u?n:u,l=Object.create(c.prototype);return F(l,"_invoke",function(r,n,a){var o,u,c,l=0,s=a||[],f=!1,p={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,r){return o=e,u=0,c=t,p.n=r,i}};function b(r,n){for(u=r,c=n,e=0;!f&&l&&!a&&e<s.length;e++){var a,o=s[e],b=p.p,y=o[2];r>3?(a=y===n)&&(c=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=t):o[0]<=b&&((a=r<2&&b<o[1])?(u=0,p.v=n,p.n=o[1]):b<y&&(a=r<3||o[0]>n||n>y)&&(o[4]=r,o[5]=n,p.n=y,u=0))}if(a||r>1)return i;throw f=!0,n}return function(a,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&b(s,y),u=s,c=y;(e=u<2?t:c)||!f;){o||(u?u<3?(u>1&&(p.n=-1),b(u,c)):p.n=c:p.v=c);try{if(l=2,o){if(u||(a="next"),e=o[a]){if(!(e=e.call(o,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=o.return)&&e.call(o),u<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=t}else if((e=(f=p.n<0)?c:r.call(n,p))!==i)break}catch(e){o=t,u=1,c=e}finally{l=1}}return{value:e,done:f}}}(r,a,o),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var s=[][n]?e(e([][n]())):(F(e={},n,(function(){return this})),e),f=l.prototype=u.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,F(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return c.prototype=l,F(f,"constructor",l),F(l,"constructor",c),c.displayName="GeneratorFunction",F(l,a,"GeneratorFunction"),F(f),F(f,a,"Generator"),F(f,n,(function(){return this})),F(f,"toString",(function(){return"[object Generator]"})),(I=function(){return{w:o,m:p}})()}function F(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}(F=function(t,e,r,n){function o(e,r){F(t,e,(function(t){return this._invoke(e,r,t)}))}e?a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(o("next",0),o("throw",1),o("return",2))})(t,e,r,n)}function N(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);c=!0);}catch(t){l=!0,a=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(t,e)||D(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){if(t){if("string"==typeof t)return L(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function M(t,e,r,n,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,a)}var q=function(){var t,e=(t=I().m((function t(e){var r,n,a,c,l,s,f,p;return I().w((function(t){for(;;)switch(t.n){case 0:if(r=e.queryKey,(n=N(r,3))[0],a=n[1],c=void 0===a?"ab_cart_abandoned":a,l=n[2],s=void 0===l?0:l,c){t.n=1;break}throw new Error(Object(u.__)("Unable to fetch rules, Event is empty","wp-marketing-automations"));case 1:return t.n=2,o()({path:Object(i.B)("/automation/event-rules/".concat(c,"?automation_id=").concat(s))});case 2:if((f=t.v)&&f.code&&200===parseInt(f.code)&&f.result){t.n=3;break}throw p=f&&f.message?f.message:Object(u.__)("Unable to load automation rules","wp-marketing-automations"),new Error(p);case 3:return t.a(2,f.result)}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){M(o,n,a,i,u,"next",t)}function u(t){M(o,n,a,i,u,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ab_cart_abandoned",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Object(n.useQuery)(["bwfan-rules",t,e],q,{staleTime:5e3}),a=r.isLoading,o=r.error,i=r.data;if(a||o||!i)return{isLoading:a,error:o,rules:{},getReadableTexts:function(t){return[]}};var u=1,c={},l={};for(var s in i)if(!Object(P.isEmpty)(i[s].rules)){var f,p={priority:u++,group:s,groupLabel:i[s].title},b=Object(P.isArray)(i[s].rules)?i[s].rules:Object.values(i[s].rules),y=G(b);try{for(y.s();!(f=y.n()).done;){var m=f.value;c[m.slug]=E(m,p),l[m.slug]=m}}catch(t){y.e(t)}finally{y.f()}}return{isLoading:a,error:o,rules:c,getReadableTexts:T(l)}}},1169:function(t,e,r){"use strict";var n=r(1095),a=r(1207),o=r.n(a),i=r(2),u=r(3);function c(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return l(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){u=!0,o=t},f:function(){try{i||null==r.return||r.return()}finally{if(u)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||!t.type)return 200+e;var n=0;switch(t.type){case"start":n=r?110:80;break;case"end":n=30;break;case"exit":n=Object(u.cc)()?65:95;break;case"jump":n=Object(u.cc)()?150:95;break;case"wait":n=160,r&&t.data&&t.data.sidebarValues;break;case"yesNoNode":n=r?50:20;break;case"benchmark":n=160,Object(u.cc)()&&(n=r&&t.data&&t.data.benchmark?150:125,t.hasOwnProperty("data")&&t.data.hasOwnProperty("desc_text")&&!Object(i.isEmpty)(t.data.desc_text)&&(n+=30));break;case"action":var a=t.data&&t.data.selected?t.data.selected:"";if(""!==a)switch(a){case"wp_sendemail":case"twilio_send_sms":n=t.data.hasOwnProperty("sidebarValues")&&!Object(i.isEmpty)(t.data.sidebarValues)?200:145;break;default:n=r?165:120}else n=105;t.hasOwnProperty("data")&&t.data.hasOwnProperty("desc_text")&&!Object(i.isEmpty)(t.data.desc_text)&&(n+=30);break;case"conditional":if(n=95,Object(u.cc)()){var o=Object(i.flatten)(t.data.sidebarValues).length,c=o-1;n=o?48*o+29*c+75:150,r||(n-=30)}break;case"split":n=t.data.hasOwnProperty("sidebarValues")&&!Object(i.isEmpty)(t.data.sidebarValues)?200:140,r||(n=100);break;case"splitpath":n=70;break;case"unknown":n=65;break;default:n=200}return n+e},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],r=[];if(Array.isArray(t)){var a,o={},i=c(t);try{for(i.s();!(a=i.n()).done;){var u=a.value;Object(n.k)(u)&&"exit"===u.type&&r.push(u.id)}}catch(t){i.e(t)}finally{i.f()}var l,s=c(t);try{for(s.s();!(l=s.n()).done;){var f=l.value;e.includes(f.target)||(o[f.target]?(e.push(f.target),delete o[f.target]):o[f.target]=1,Object(n.j)(f)&&r.includes(f.source)&&e.push(f.target))}}catch(t){s.e(t)}finally{s.f()}}return{hasMultiParents:function(t){return e.includes(t)}}};e.a=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new o.a.graphlib.Graph;a.setDefaultEdgeLabel((function(){return{}})),a.setGraph({rankdir:"TB",ranksep:90,nodesep:100});var i=f(t),u=i.hasMultiParents;return t.forEach((function(t){Object(n.k)(t)?a.setNode(t.id,{width:366,height:s(t,3,e)+r}):a.setEdge(t.source,t.target,{weight:"conditional"===t.type?2:5})})),o.a.layout(a),t.map((function(t){if(Object(n.k)(t)){var r=a.node(t.id);t.targetPosition="top",t.sourcePosition="bottom",t.hasMultiParents=u(t.id);var o=s(t,"conditional"===t.type?70:50,e);t.position={x:r.x-165+Math.random()/1e3,y:r.y-o/2}}return t}))}}}]);