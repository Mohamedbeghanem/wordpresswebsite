(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1099:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(0);var o=function(t,e){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=t}),[t]),Object(r.useEffect)((function(){if(null!==e){var t=setInterval((function(){n.current()}),e);return function(){return clearInterval(t)}}}),[e])}},1133:function(t,e,n){"use strict";var r=n(50),o=n(3);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c=["fetch","setStateProp","clearError"];function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=function(){var t=Object(r.a)("singleTemplateData"),e=t.fetch,n=t.setStateProp,a=t.clearError;return u(u({},function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,c)),{},{fetch:function(t){n("isLoading",!0),a(),e("GET",Object(o.B)("/template/".concat(t)))},setTemplateData:function(t){n("data",t)},setTemplateListData:function(t){n("listData",t)}})}},1138:function(t,e,n){"use strict";var r=n(0),o=n(1099),a=(n(1147),n(8)),c=n(1),i=n(9),u=n.n(i),l=n(3),s=n(5),f=n(2);function m(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return p(l,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,u=t,m.n=n,c}};function p(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],p=m.p,b=a[2];n>3?(o=b===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,m.n=b,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),i=s,u=b;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(m.n=-1),p(i,u)):m.n=u:m.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=m.n<0)?u:n.call(r,m))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(p(e={},r,(function(){return this})),e),f=l.prototype=i.prototype=Object.create(s);function b(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,p(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,p(f,"constructor",l),p(l,"constructor",u),u.displayName="GeneratorFunction",p(l,o,"GeneratorFunction"),p(f),p(f,o,"Generator"),p(f,r,(function(){return this})),p(f,"toString",(function(){return"[object Generator]"})),(m=function(){return{w:a,m:b}})()}function p(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(p=function(t,e,n,r){function a(e,n){p(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))})(t,e,n,r)}function b(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function O(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){b(a,r,o,c,i,"next",t)}function i(t){b(a,r,o,c,i,"throw",t)}c(void 0)}))}}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,c,i=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var d={automation:Object(c.__)("Automation","wp-marketing-automations"),templates:Object(c.__)("Template","wp-marketing-automations"),recovered_carts:Object(c.__)("Recovered Cart","wp-marketing-automations"),lost_carts:Object(c.__)("Lost Cart","wp-marketing-automations"),recoverable_carts:Object(c.__)("Recoverable Cart","wp-marketing-automations")};e.a=function(t){var e=t.type,n=void 0===e?"":e,i=t.localData,p=void 0===i?{}:i,b=t.onDismiss,j=void 0===b?function(){}:b,g=Object(r.useContext)(l.h),v=y(Object(r.useState)(1),2),w=v[0],h=v[1],_=y(Object(r.useState)(!1),2),E=_[0],k=_[1],P=y(Object(r.useState)(!1),2),S=P[0],T=P[1],x=y(Object(r.useState)({}),2),C=x[0],D=x[1],N=function(){var t=O(m().m((function t(){var e;return m().w((function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,u()({path:Object(l.B)("/export/status?type=".concat(n)),method:"GET"}).then((function(t){if(200!==t.code||!t.hasOwnProperty("result"))throw Error(Object(l.v)(null==t?void 0:t.message));var e=t.result,n=e.status,r=void 0===n?1:n,o=e.msg,a=void 0===o?[]:o,c=e.url,i=void 0===c?"":c;h(r),D({msg:a,url:i})}));case 1:t.n=3;break;case 2:t.p=2,e=t.v,g(e.hasOwnProperty("message")&&""!==e.message?e.message:Object(c.__)("Unable to export.","wp-marketing-automations")),Object(l.Nb)(g,3e3);case 3:return t.a(2)}}),t,null,[[0,2]])})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){if(Object(f.isEmpty)(p))""!==n&&N();else{var t=p.status,e=void 0===t?1:t,r=p.msg,o=void 0===r?[]:r,a=p.url,c=void 0===a?"":a;h(e),D({msg:o,url:c})}}),[]);var I=function(){var t=O(m().m((function t(){var e;return m().w((function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,u()({path:Object(l.B)("/export/action?type=".concat(n,"&action=cancel")),method:"POST"}).then((function(t){if(200!==t.code||!t.hasOwnProperty("result"))throw Error(Object(l.v)(null==t?void 0:t.message));var e=t.result.status;(void 0===e?1:e)&&(bwfcrm_contacts_data.export_data.hasOwnProperty(n)&&delete bwfcrm_contacts_data.export_data[n],k(!0),j())}));case 1:t.n=3;break;case 2:t.p=2,e=t.v,g(e.hasOwnProperty("message")&&""!==e.message?e.message:Object(c.__)("Unable to perform action.","wp-marketing-automations")),Object(l.Nb)(g,3e3);case 3:return t.a(2)}}),t,null,[[0,2]])})));return function(){return t.apply(this,arguments)}}(),A=function(){var t=O(m().m((function t(){return m().w((function(t){for(;;)switch(t.n){case 0:window.open(Object(l.xb)()+"/wp-json"+Object(l.B)("/export/download?type=".concat(n,"&bwf-nonce=").concat(Object(l.G)(),"&user_id=").concat(Object(l.O)())),"_blank");case 1:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}();if(Object(o.a)((function(){1==w&&""!==n&&N()}),5e3),""===n||E)return Object(r.createElement)(r.Fragment,null);var F=C.url,G=void 0===F?"":F,B=C.msg,M=void 0===B?[]:B,L={1:Object(c.__)("Export In Progress…","wp-marketing-automations"),2:Object(c.__)("File Is Ready","wp-marketing-automations"),3:Object(c.__)("Export Failed","wp-marketing-automations")},R={1:Object(c.__)("Cancel","wp-marketing-automations"),2:Object(c.__)("Download","wp-marketing-automations"),3:Object(c.__)("View Details","wp-marketing-automations")};return Object(r.createElement)("div",{className:"bwf-export-info-wrap bwf-status-".concat(w)},Object(r.createElement)("div",{className:"bwf-export-info-left"},Object(r.createElement)("div",{className:"bwf-export-status-icon"},Object(r.createElement)(a.a,{icon:"export-info",size:20})),Object(r.createElement)("div",{className:"bwf-export-status-message"},L[w])),Object(r.createElement)("div",{className:"bwf-export-info-right"},(2!==parseInt(w)||!(2===parseInt(w)&&""===G))&&Object(r.createElement)("div",{className:"bwf-export-status-button",onClick:function(){switch(parseInt(w)){case 1:I();break;case 2:A();break;case 3:T(!0)}}},R[w]),1!==parseInt(w)&&Object(r.createElement)("div",{className:"bwf-export-status-dismiss",onClick:I},Object(r.createElement)(a.a,{icon:"close",size:16,color:"#FFF"}))),S&&Object(r.createElement)(s.Modal,{onRequestClose:function(){return T(!1)},className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header bwf-export-info-modal"},Object(r.createElement)("div",{className:"bwf-admin-m-header-new"},Object(r.createElement)("div",{className:"bwf-admin-m-title"},Object(c.sprintf)(Object(c.__)("Error! Export %ss","wp-marketing-automations"),d.hasOwnProperty(n)?d[n]:n)),Object(r.createElement)("div",{className:"bwf-admin-m-close",onClick:function(){return T(!1)}},Object(r.createElement)(a.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-export-info-content"},Object(r.createElement)("div",{className:"bwf-export-info-content-bold"},Object(c.__)("Following reasons while creating file for export","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-export-info-content-error-list"},Object(f.isEmpty)(M)?Object(r.createElement)("li",null,Object(c.__)("Unable to create export","wp-marketing-automations")):M.map((function(t,e){return Object(r.createElement)("li",{key:e},t)}))))))}},1147:function(t,e,n){},1194:function(t,e,n){"use strict";var r=n(0),o=n(1),a=n(3),c=(n(576),n(5)),i=n(8);e.a=function(t){var e=t.onFileSelected,n=t.filetypeArray,u=t.type,l=void 0===u?"automation":u,s=t.importText,f=void 0===s?"":s,m=t.importInfo,p=void 0===m?"":m,b=Object(r.useContext)(a.h),O=function(t){t&&t[0]&&"type"in t[0]?n.includes(t[0].type)?(e(t[0]),Object(a.Nb)(b,3e3)):b(Object(o.__)("Uploaded file is not valid.","wp-marketing-automations")):b(Object(o.__)("Uploaded file not found","wp-marketing-automations"))};return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(c.FormFileUpload,{isSecondary:!0,accept:"application/json",onChange:function(t){return O(t.target.files)},render:function(t){var e=t.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:e},Object(r.createElement)(i.a,{icon:"json-upload",size:72}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},""!==f?f:Object(o.__)("Click or Drag & Drop your JSON file","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},""!==p?p:Object(o.sprintf)(Object(o.__)("This tool allows you to import the %s from the JSON file.","wp-marketing-automations"),l)))}}),Object(r.createElement)(c.DropZone,{onFilesDrop:O,onHTMLDrop:O,onDrop:O})))}},1473:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n(1),a=n(357),c=n(3),i=n(12),u=n(50);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=["fetch","setStateProp"];function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(){var t=Object(u.a)("templateData"),e=t.fetch,n=t.setStateProp;return m(m({},function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,s)),{},{fetch:function(t,r,o){n("isLoading",!0);var a={offset:r,limit:o,search:t.s,get_template:!1};e("GET",Object(c.B)("/templates"),a)},setTemplateValues:function(t,e){n(t,e)}})},O=n(51);function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var j=["getStateProp"];function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function(){var t=Object(O.a)("templateData"),e=t.getStateProp;return g(g({},function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,j)),{},{getTemplates:function(){return e("data")},getPageNumber:function(){return parseInt(e("offset"))/parseInt(e("limit"))+1},getPerPageCount:function(){return parseInt(e("limit"))},getPageOffset:function(){return parseInt(e("offset"))},getTotalCount:function(){return parseInt(e("total_count"))}})},h=n(146),_=n(54),E=n(60),k=n(61),P=n(19),S=n(8),T=n(9),x=n.n(T),C=n(148),D=n(1133),N=n(1194),I=n(5);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return G(l,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,u=t,m.n=n,c}};function p(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],p=m.p,b=a[2];n>3?(o=b===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,m.n=b,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),i=s,u=b;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(m.n=-1),p(i,u)):m.n=u:m.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=m.n<0)?u:n.call(r,m))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(G(e={},r,(function(){return this})),e),f=l.prototype=i.prototype=Object.create(s);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,G(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,G(f,"constructor",l),G(l,"constructor",u),u.displayName="GeneratorFunction",G(l,o,"GeneratorFunction"),G(f),G(f,o,"Generator"),G(f,r,(function(){return this})),G(f,"toString",(function(){return"[object Generator]"})),(F=function(){return{w:a,m:m}})()}function G(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(G=function(t,e,n,r){function a(e,n){G(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))})(t,e,n,r)}function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function U(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,c,i=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(r.createElement)(r.Fragment,null,"".concat(""!==t?t:"It seems there was an issue during the import",". For further help, contact "),Object(r.createElement)("a",{href:Object(c.gb)("support",{utm_medium:"Support+Recipe+Import+Failed"}),target:"_blank",rel:"noopener noreferrer"},Object(o.__)(" support. ","wp-marketing-automations")))},V=function(t){var e=t.onRequestClose,n=Object(i.i)(),a=U(Object(r.useState)({status:!1,modalTitle:Object(o.__)("Import Template","wp-marketing-automations")}),2),u=a[0],l=a[1],s=U(Object(r.useState)(null),2),f=s[0],m=s[1],p=function(){var t,a=(t=F().m((function t(){var a,s;return F().w((function(t){for(;;)switch(t.p=t.n){case 0:return l(M(M({},u),{},{loading:!0,title:Object(o.__)("Please wait…","wp-marketing-automations"),message:Object(r.createElement)(r.Fragment,null,Object(o.sprintf)(Object(o.__)("Please wait! We are importing %s data","wp-marketing-automations"),null==f?void 0:f.name))})),t.p=1,(a=new FormData).append("files",f),t.n=2,x()({method:"POST",body:a,path:Object(c.B)("/templates/import")}).then((function(t){200==t.code?t.result.hasOwnProperty("template_id")?(l(M(M({},u),{},{status:!0,loading:!1,title:Object(o.__)("Importing Done","wp-marketing-automations"),message:Object(o.__)("Successfully Imported and added in your Template","wp-marketing-automations")})),setTimeout((function(){Object(i.l)({page:"autonami",path:"/template/".concat(t.result.template_id)},"/",{})}),1e3)):(Object(i.l)({path:"/templates/"},"/",n),e()):(m(null),l(M(M({},u),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:z(t.message)})))}));case 2:t.n=4;break;case 3:t.p=3,s=t.v,m(null),l(M(M({},u),{},{status:!1,loading:!1,title:Object(o.__)("Importing Failed","wp-marketing-automations"),message:z(s.message)}));case 4:return t.a(2)}}),t,null,[[1,3]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){R(a,r,o,c,i,"next",t)}function i(t){R(a,r,o,c,i,"throw",t)}c(void 0)}))});return function(){return a.apply(this,arguments)}}();return Object(r.useEffect)((function(){f&&p()}),[f]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(I.Modal,{className:"bwf-admin-modal bwf-admin-modal-480 bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-admin-m-header-new"},Object(r.createElement)("div",{className:"bwf-admin-m-title"},Object(o.__)("Import Template","wp-marketing-automations")),Object(r.createElement)("div",{className:"bwf-admin-m-close",onClick:e},Object(r.createElement)(S.a,{icon:"close",size:20}))),u.title&&Object(r.createElement)("div",{className:"bwf-import-modal-content bwf-t-center"},u.loading?Object(r.createElement)(S.a,{icon:"import-loading"}):Object(r.createElement)(S.a,{icon:u.status?"success-loader":"circle-close",size:48}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},u.message)),!u.title&&Object(r.createElement)(N.a,{onFileSelected:function(t){return m(t)},filetypeArray:["application/json"],importText:Object(o.__)("Drag or Browse a json file to import template","wp-marketing-automations"),importInfo:"( "+Object(o.__)("File size 10 MB max","wp-marketing-automations")+" )"})))},$=n(96);function J(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return H(l,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,u=t,m.n=n,c}};function p(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],p=m.p,b=a[2];n>3?(o=b===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,m.n=b,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),i=s,u=b;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(m.n=-1),p(i,u)):m.n=u:m.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=m.n<0)?u:n.call(r,m))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(H(e={},r,(function(){return this})),e),f=l.prototype=i.prototype=Object.create(s);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,H(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,H(f,"constructor",l),H(l,"constructor",u),u.displayName="GeneratorFunction",H(l,o,"GeneratorFunction"),H(f),H(f,o,"Generator"),H(f,r,(function(){return this})),H(f,"toString",(function(){return"[object Generator]"})),(J=function(){return{w:a,m:m}})()}function H(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(H=function(t,e,n,r){function a(e,n){H(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))})(t,e,n,r)}function W(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function Q(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){W(a,r,o,c,i,"next",t)}function i(t){W(a,r,o,c,i,"throw",t)}c(void 0)}))}}var K=function(t){var e=t.isOpen,n=t.tasks,a=t.onSuccess,i=t.onError,u=t.onRequestClose,l=t.actionType,s=n?n.length:0,f=Object($.useMutation)(function(){var t=Q(J().m((function t(e){return J().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,x()({path:Object(c.B)("/bulk-action/template"),method:"DELETE",data:{ids:e}});case 1:return t.a(2,t.v)}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onSuccess:function(){setTimeout((function(){return f.reset()}),2500),a&&a()},onError:function(){i&&i()}}),m=function(){var t=Q(J().m((function t(){return J().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,f.mutate(n.map((function(t){return t.ID})));case 1:return t.a(2)}}),t)})));return function(){return t.apply(this,arguments)}}(),p={delete:{title:Object(o._n)("Delete Template","Delete Templates",s,"wp-marketing-automations"),description:Object(r.createElement)(r.Fragment,null,Object(o.__)("You are about to delete ","wp-marketing-automations"),Object(o._n)("template","templates",s,"wp-marketing-automations"),Object(o.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","wp-marketing-automations")),confirmBtn:Object(o.__)("Delete","wp-marketing-automations"),cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),successMsg:Object(o.__)("Bulk action executed successfully","wp-marketing-automations"),errorMsg:Object(o.__)("Unable to delete template","wp-marketing-automations"),confirmDescription:Object(o.__)("This action is irreversible","wp-marketing-automations")}};return Object(r.createElement)(_.a,{modalTitle:p.hasOwnProperty(l)&&p[l].hasOwnProperty("title")?p[l].title:Object(o._n)("Perform Actions","Perform Actions",s,"wp-marketing-automations"),deleteDescriptionText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("description")?p[l].description:"",confirmButtonText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("confirmBtn")?p[l].confirmBtn:Object(o.__)("Confirm","wp-marketing-automations"),cancelButtonText:p.hasOwnProperty(l)&&p[l].hasOwnProperty("cancelBtn")?p[l].cancelBtn:Object(o.__)("Cancel","wp-marketing-automations"),onConfirm:m,isLoading:f.isLoading,successMessage:f.isSuccess&&(p.hasOwnProperty(l)&&p[l].hasOwnProperty("successMsg")?p[l].successMsg:Object(o.__)("Actions Done!","wp-marketing-automations")),errorMessage:f.isError&&(f.error&&f.error.message?f.error.message:p.hasOwnProperty(l)&&p[l].hasOwnProperty("errorMsg")?p[l].errorMsg:Object(o.__)("Unable to perform action","wp-marketing-automations")),onRequestClose:function(){return!!u&&u()},isOpen:e,confirmDescription:p.hasOwnProperty(l)&&p[l].hasOwnProperty("confirmDescription")?p[l].confirmDescription:"",isDelete:!0})},Y=n(1138),Z=n(2),X=n(44),tt=n(202),et=n(342),nt=n(26),rt=n(11);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(){return(at=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(null,arguments)}function ct(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return it(l,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,u=t,m.n=n,c}};function p(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],p=m.p,b=a[2];n>3?(o=b===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,m.n=b,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),i=s,u=b;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(m.n=-1),p(i,u)):m.n=u:m.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=m.n<0)?u:n.call(r,m))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(it(e={},r,(function(){return this})),e),f=l.prototype=i.prototype=Object.create(s);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,it(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,it(f,"constructor",l),it(l,"constructor",u),u.displayName="GeneratorFunction",it(l,o,"GeneratorFunction"),it(f),it(f,o,"Generator"),it(f,r,(function(){return this})),it(f,"toString",(function(){return"[object Generator]"})),(ct=function(){return{w:a,m:m}})()}function it(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(it=function(t,e,n,r){function a(e,n){it(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))})(t,e,n,r)}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){st(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function st(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ot(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ft(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function mt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){ft(a,r,o,c,i,"next",t)}function i(t){ft(a,r,o,c,i,"throw",t)}c(void 0)}))}}function pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,c,i=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,e)||bt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){if(t){if("string"==typeof t)return Ot(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ot(t,e):void 0}}function Ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var yt=function(t){var e=t.menuButtons,n=void 0===e?Object(r.createElement)(r.Fragment,null):e,a=t.pitchData,u=void 0===a?{}:a,l=t.setOpenProModal,s=void 0===l?function(){}:l,f=Object(r.useContext)(c.h),m=Object(i.i)(),p=m.s,O=void 0===p?"":p,y={1:Object(o.__)("Rich Text","wp-marketing-automations"),2:Object(o.__)("WooCommerce","wp-marketing-automations"),3:Object(o.__)("Raw HTML","wp-marketing-automations"),4:Object(o.__)("Visual Builder (Legacy)","wp-marketing-automations"),5:Object(o.__)("Visual Builder","wp-marketing-automations")},j=b(),d=j.fetch,g=j.setTemplateValues,v=Object(D.a)().setTemplateListData,T=w(),N=T.getLoading,I=T.getTemplates,A=T.getTotalCount,F=T.getPageOffset,G=T.getPerPageCount,B=T.getPageNumber,M=T.getError,L=I(),R=F(),U=G(),q=N(),z=A(),$=B(),J=M(),H=Object(c.Gb)();Object(r.useEffect)((function(){d(m,R,U)}),[R,U,m.s]);var W=pt(Object(r.useState)({loading:!1,status:!1}),2),Q=W[0],ot=W[1],it=pt(Object(r.useState)(!1),2),ut=it[0],st=it[1],ft=pt(Object(r.useState)(!1),2),Ot=ft[0],yt=ft[1],jt=pt(Object(r.useState)(!1),2),dt=jt[0],gt=jt[1],vt=pt(Object(r.useState)([]),2),wt=vt[0],ht=vt[1],_t=pt(Object(r.useState)(!1),2),Et=_t[0],kt=_t[1],Pt=pt(Object(r.useState)(""),2),St=Pt[0],Tt=Pt[1];Object(r.useEffect)((function(){q||gt(!1)}),[q]);var xt=function(){Rt&&Rt(),ht([])};Object(r.useEffect)((function(){return xt(),function(){return g("offset",0)}}),[]);var Ct,Dt=function(t,e){if(Object(c.cc)())if("export"===t){var n=[];e.map((function(t){return n.push(t.ID)})),Qt(n)}else ht(e),Tt(t),kt(!0);else s(!0)},Nt=function(){var t=mt(ct().m((function t(e){var n,r,a=arguments;return ct().w((function(t){for(;;)switch(t.p=t.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},ot(lt(lt({},n),{},{status:!0})),t.p=1,t.n=2,x()({path:Object(c.B)("/template/".concat(e)),method:"DELETE"}).then((function(t){f(t.message),ot({status:!1}),d(m,R,U)}));case 2:t.n=4;break;case 3:t.p=3,r=t.v,ot({status:!0,error:r.message?r.message:Object(o.__)("Error in deleting template","wp-marketing-automations")});case 4:Object(c.Nb)(f,3e3);case 5:return t.a(2)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}(),It=function(){var t=mt(ct().m((function t(e){var n;return ct().w((function(t){for(;;)switch(t.p=t.n){case 0:return f(Object(o.__)("Cloning…","wp-marketing-automations")),t.p=1,t.n=2,x()({path:Object(c.B)("/template/".concat(e,"/clone")),method:"GET"}).then((function(t){200==t.code?(f(Object(o.__)("Template cloned","wp-marketing-automations")),d(m,0,U)):f(t.message)}));case 2:t.n=4;break;case 3:t.p=3,n=t.v,f(n.message);case 4:Object(c.Nb)(f,3e3);case 5:return t.a(2)}}),t,null,[[1,3]])})));return function(e){return t.apply(this,arguments)}}(),At=function(t){return Object(r.createElement)(E.a,{label:Object(o.__)("Quick Actions","wp-marketing-automations"),menuPosition:"bottom right",renderContent:function(e){var n=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(k.a,{isClickable:!0,onInvoke:function(){v(t.title),Object(i.l)({path:"/template/"+parseInt(t.ID)},"/",m),n()}},Object(r.createElement)(P.a,{justify:"space-between"},Object(r.createElement)(P.c,null,Object(o.__)("Edit","wp-marketing-automations")))),Object(r.createElement)(k.a,{isClickable:!0,onInvoke:function(){Object(c.cc)()?It(parseInt(t.ID)):s(!0),n()}},Object(r.createElement)(P.a,{justify:"space-between"},Object(r.createElement)(P.c,null,Object(o.__)("Duplicate","wp-marketing-automations")),!Object(c.cc)()&&Object(r.createElement)(P.c,null,c.e))),Object(r.createElement)(k.a,{isClickable:!0,onInvoke:function(){Object(c.cc)()?Qt(t.ID,t.title):s(!0),n()}},Object(r.createElement)(P.a,{justify:"space-between"},Object(r.createElement)(P.c,null,Object(o.__)("Export","wp-marketing-automations")),!Object(c.cc)()&&Object(r.createElement)(P.c,null,c.e))),Object(r.createElement)(k.a,{isClickable:!0,onInvoke:function(){var e={status:!0,modalTitle:Object(o.__)("Delete Template","wp-marketing-automations"),deleteEntityName:t.title,buttonConfirm:Object(o.__)("Delete","wp-marketing-automations"),buttonCancel:Object(o.__)("Cancel","wp-marketing-automations"),isDelete:!0};ot(lt(lt({},e),{},{onConfirm:function(){return Nt(t.ID,e)}})),n()}},Object(r.createElement)(P.a,{justify:"flex-start"},Object(r.createElement)(P.c,null,Object(o.__)("Delete","wp-marketing-automations")))))}})},Ft=Object(r.useMemo)((function(){var t={};if(Array.isArray(L)){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=bt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}(L);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.ID]=r}}catch(t){n.e(t)}finally{n.f()}}return t}),[L]),Gt=Object(C.b)(Ft),Bt=Gt.singleSelectProps,Mt=Gt.selectAllProps,Lt=Gt.floatingBarProps,Rt=Gt.resetSelection,Ut=Gt.selected,qt=Object.keys(Ut).filter((function(t){return Ut[t]})).length,zt=[{key:"select_template",label:Object(r.createElement)(X.a,at({type:"checkbox",checked:!1,onChange:function(){}},Mt)),isLeftAligned:!0,required:!0,cellClassName:"bwf-col-action bwf-w-30"},{key:"actions",label:"",isLeftAligned:!1,cellClassName:"bwf-col-action bwf-w-30"},{key:"name",label:Object(o.__)("Name","wp-marketing-automations"),isLeftAligned:!0},{key:"createdon",label:Object(o.__)("Created On","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-240"},{key:"type",label:Object(o.__)("Type","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-210"},{key:"updatedon",label:Object(o.__)("Last Update","wp-marketing-automations"),isLeftAligned:!0,cellClassName:"bwf-w-240"}],Vt=function(t){return Object(r.createElement)("a",{href:"admin.php?page=autonami&path=/template/"+t.ID,type:"bwf-crm",className:"bwf-a-no-underline",onClick:function(e){e.preventDefault(),v(t.title),Object(i.l)({path:"/template/"+parseInt(t.ID)},"/",m)}},Object(r.createElement)("b",null,t.title.charAt(0).toUpperCase()+t.title.slice(1)+" "))},$t=L.map((function(t){return[{display:Bt.hasOwnProperty(t.ID)?Object(r.createElement)(X.a,at({type:"checkbox",checked:!1,onChange:function(){}},Bt[t.ID])):Object(r.createElement)(r.Fragment,null),value:null},{display:At(t),value:"action"},{display:t.title?Vt(t):"-",value:""},{display:Object(c.jb)(t.created_at),value:""},{display:y.hasOwnProperty(parseInt(t.mode))?Object(r.createElement)(r.Fragment,null,y[parseInt(t.mode)],5===parseInt(t.mode)&&Object(r.createElement)("span",{className:"bwf-tags bwf-tag-green bwf-ml-4"},Object(o.__)("New","wp-marketing-automations"))):"-",value:""},{display:Object(c.jb)(t.updated_at),value:""}]})),Jt=function(t){t!==U&&g("limit",t)},Ht=function(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",e+".json"),document.body.appendChild(r),r.click(),r.remove()},Wt=function(){var t=mt(ct().m((function t(){return ct().w((function(t){for(;;)switch(t.p=t.n){case 0:return f(Object(o.__)("Exporting…","wp-marketing-automations")),t.p=1,t.n=2,x()({path:Object(c.B)("/export/action"),data:{type:"templates",action:"start",extra_data:{search:O}},method:"POST"}).then((function(t){if(200!==t.code)throw Error(Object(c.v)(null==t?void 0:t.message));t.hasOwnProperty("result")&&t.result.hasOwnProperty("data")&&!Object(Z.isEmpty)(t.result.data)&&(bwfcrm_contacts_data.export_data=t.result.data,f(Object(o.__)("Template export has started","wp-marketing-automations"))),Object(c.Nb)(f,3e3)}));case 2:t.n=4;break;case 3:t.p=3,t.v,Object(c.Nb)(f,3e3);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),Qt=function(){var t=mt(ct().m((function t(){var e,n,r,a,i=arguments;return ct().w((function(t){for(;;)switch(t.p=t.n){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:0,n=i.length>1&&void 0!==i[1]?i[1]:"templates",f(Object(o.__)("Exporting…","wp-marketing-automations")),r="",!Object(Z.isArray)(e)&&parseInt(e)>0?r=Object(c.B)("/templates/".concat(e,"/export")):(r=Object(c.B)("/templates/export/"),Object(Z.isEmpty)(e)||(r+="?ids=".concat(e.join(",")))),t.p=1,t.n=2,x()({path:r,method:"GET"}).then((function(t){if(200!==t.code)throw Error(Object(c.v)(null==t?void 0:t.message));Ht(t.result,n),f(Object(o.__)("Template exported","wp-marketing-automations")),Object(Z.isArray)(e)&&xt(),Object(c.Nb)(f,3e3)}));case 2:t.n=4;break;case 3:t.p=3,a=t.v,Object(c.Nb)(f,3e3),setTimeout((function(){ot({status:!0,modalTitle:Object(o.__)("Export Template","wp-marketing-automations"),error:a.message})}),[1500]);case 4:return t.a(2)}}),t,null,[[1,3]])})));return function(){return t.apply(this,arguments)}}(),Kt=0===parseInt(qt)?Object(r.createElement)("div",{className:"bwf-display-flex gap-12"},H.hasOwnProperty("templates")&&Object(r.createElement)(Y.a,{type:"templates",localData:H.templates,onDismiss:function(){return st(!0)}}),Object(r.createElement)(rt.a,{className:"bwf-btn-small is-light",title:Object(o.__)("Export","wp-marketing-automations"),onClick:function(){Object(c.cc)()?Wt():s(!0)},disabled:H.hasOwnProperty("templates")&&!ut},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(r.createElement)(S.a,{icon:Object(c.cc)()?"export":"king",size:16}),Object(r.createElement)("span",null,Object(o.__)("Export All","wp-marketing-automations")))),Object(r.createElement)(rt.a,{className:"bwf-btn-small is-light",title:Object(o.__)("Import","wp-marketing-automations"),onClick:function(){Object(c.cc)()?yt(!0):s(!0)}},Object(r.createElement)("span",{className:"bwf-display-flex gap-4"},Object(r.createElement)(S.a,{icon:Object(c.cc)()?"import":"king",size:16}),Object(r.createElement)("span",null,Object(o.__)("Import","wp-marketing-automations"))))):Object(r.createElement)(r.Fragment,null),Yt=q||dt||0!==z||""!==O||J;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-content-header-new"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("Templates","wp-marketing-automations")),parseInt(z)>0&&Object(r.createElement)("div",{className:"bwf-content-header-count"},Object(o.sprintf)(Object(o._n)("(%s Result)","(%s Results)",z,"wp-marketing-automations"),z))),Object(r.createElement)("div",{className:"bwf-content-header-right"},Yt&&!q&&n)),J&&Object(r.createElement)(nt.a,{status:"error"},J.message),Yt?Object(r.createElement)(h.a,{className:"bwf-template-table has-search",title:"",rows:$t,headers:zt,query:{paged:$},rowsPerPage:U,totalRows:z,isLoading:q,onPageChange:function(t,e){g("offset",(t-1)*U)},onQueryChange:function(t){return"per_page"!==t?function(){}:Jt},showMenu:!1,rowHeader:!0,actions:qt>0?[Object(r.createElement)(C.a,at({key:"template-bulk-action",actions:(Ct=[],-1!==Object(c.n)(bwfcrm_contacts_data.bwf_pro_version,"2.9.5")&&Ct.push({id:"export",icon:"export",hint:Object(o.__)("Export","wp-marketing-automations"),isPro:!0}),Ct.push({id:"delete",icon:"trash",hint:Object(o.__)("Delete","wp-marketing-automations")}),Ct),onAction:Dt,inLine:!0,reset:xt},Lt))]:[Object(r.createElement)(tt.a,{key:"search",isLoading:q,searchTerm:null==m?void 0:m.s,showResultCount:!1,setSearchData:function(t){if(Object(Z.size)(t))Object(i.l)({s:t},"/",m);else{var e=Object(Z.cloneDeep)(m);e.hasOwnProperty("s")&&(null==e||delete e.s),gt(!0),Object(i.l)(e,"/",{})}}})],emptyMessage:Object(o.__)("No templates found","wp-marketing-automations"),extraSectionBeforefilterCol:Kt}):Object(r.createElement)(et.a,{data:u}),Object(r.createElement)(_.a,{modalTitle:Q.modalTitle,deleteEntityName:Q.deleteEntityName,confirmText:Q.confirmText,confirmButtonText:Q.buttonConfirm,cancelButtonText:Q.buttonCancel,onConfirm:Q.onConfirm,isLoading:Q.loading,successMessage:Q.success,errorMessage:Q.error,content:Q.content,onRequestClose:function(){return ot({status:!1})},isOpen:Q.status,isDelete:!Q.hasOwnProperty("isDelete")||Q.isDelete}),Object(r.createElement)(K,{tasks:wt,isOpen:Et,onSuccess:function(){d(m,R,U),xt()},onError:xt,onRequestClose:function(){return kt(!1)},screenType:"bulkaction",actionType:St}),Ot&&Object(r.createElement)(V,{onRequestClose:function(){return yt(!1)}}))};n(353),n(355),n(48);function jt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof i?r:i,l=Object.create(u.prototype);return dt(l,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,i=0,u=t,m.n=n,c}};function p(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],p=m.p,b=a[2];n>3?(o=b===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=p&&((o=n<2&&p<a[1])?(i=0,m.v=r,m.n=a[1]):p<b&&(o=n<3||a[0]>r||r>b)&&(a[4]=n,a[5]=r,m.n=b,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,b){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),i=s,u=b;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(m.n=-1),p(i,u)):m.n=u:m.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=m.n<0)?u:n.call(r,m))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),l}var c={};function i(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(dt(e={},r,(function(){return this})),e),f=l.prototype=i.prototype=Object.create(s);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,dt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,dt(f,"constructor",l),dt(l,"constructor",u),u.displayName="GeneratorFunction",dt(l,o,"GeneratorFunction"),dt(f),dt(f,o,"Generator"),dt(f,r,(function(){return this})),dt(f,"toString",(function(){return"[object Generator]"})),(jt=function(){return{w:a,m:m}})()}function dt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(dt=function(t,e,n,r){function a(e,n){dt(t,e,(function(t){return this._invoke(e,n,t)}))}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))})(t,e,n,r)}function gt(t,e,n,r,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function vt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,c,i=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return wt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ht=function(t){var e=t.onCloseModal,n=Object(r.useContext)(c.h),a=vt(Object(r.useState)(!1),2),u=a[0],l=a[1],s=vt(Object(r.useState)(""),2),f=s[0],m=s[1],p=vt(Object(r.useState)({}),2),b=(p[0],p[1]),O=vt(Object(r.useState)(null),2),y=O[0],j=O[1],d=Object(D.a)().setTemplateListData;Object(r.useEffect)((function(){l(!1),b({}),j(""),m("")}),[]);var g=function(){var t,e=(t=jt().m((function t(){var e;return jt().w((function(t){for(;;)switch(t.p=t.n){case 0:return l(!0),m(""),t.p=1,t.n=2,x()({path:Object(c.B)("/template/"),method:"POST",data:{title:y,mode:5,escape_body:!0}}).then((function(t){200==t.code&&(Object(c.fb)()||(bwfcrm_contacts_data.first_template_id=1),n(Object(o.__)("Template created","wp-marketing-automations")),d(y),Object(i.l)({path:"/template/"+t.result.id},"/",{}))}));case 2:t.n=4;break;case 3:t.p=3,e=t.v,l(!1),m(e.message);case 4:Object(c.Nb)(n,3e3);case 5:return t.a(2)}}),t,null,[[1,3]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){gt(a,r,o,c,i,"next",t)}function i(t){gt(a,r,o,c,i,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}(),v=function(){Object(Z.isEmpty)(y)?m(Object(o.__)("Name is required.","wp-marketing-automations")):(m(""),g())};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(I.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-h--core-header",shouldCloseOnClickOutside:!1,shouldCloseOnEsc:!1},Object(r.createElement)("div",{className:"bwf-modal-header"},Object(r.createElement)("div",{className:"bwf-modal-heading"},Object(o.__)("Add Template","wp-marketing-automations")),Object(r.createElement)("span",{onClick:e,className:"bwf-modal-close"},Object(r.createElement)(S.a,{icon:"close",color:"#353030"}))),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(t){"Enter"==t.key&&v()}},f&&Object(r.createElement)(nt.a,{status:"error",onRemove:function(){return m("")}},f),Object(r.createElement)(I.TextControl,{placeholder:Object(o.__)("Enter","wp-marketing-automations"),autoFocus:!0,label:Object(o.__)("Name","wp-marketing-automations"),value:y||"",onChange:function(t){return j(t)},disabled:u}),Object(r.createElement)("div",{className:"bwf_text_right bwf-form-buttons"},Object(r.createElement)(rt.a,{onClick:function(){return e()},className:"bwf-cancel-btn"},Object(o.__)("Cancel","wp-marketing-automations")),Object(r.createElement)(rt.a,{isPrimary:!0,disabled:u,isBusy:u,onClick:function(){v()}},Object(o.__)("Add","wp-marketing-automations"))))))},_t=n(77),Et=n(109),kt=n(68),Pt=n(40);function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){Ct(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ct(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==St(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,c,i=[],u=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Nt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}e.default=function(){var t=(0,w().getTotalCount)(),e=Object(r.createElement)(I.Button,{isPrimary:!0,className:"bwf-display-flex",onClick:function(){Object(c.cc)()?f(!0):u(!0)}},!Object(c.cc)()&&Object(r.createElement)(S.a,{icon:"king",size:"16",color:"#fff"}),Object(r.createElement)("span",null,Object(o.__)("Create Template","wp-marketing-automations")));Object(a.a)(Object(o.__)("Templates","wp-marketing-automations"),e,t);var n=Dt(Object(r.useState)(!1),2),i=n[0],u=n[1],l=Dt(Object(r.useState)(!1),2),s=l[0],f=l[1];Object(r.useEffect)((function(){Object(c.m)(Object(o.__)("My Templates","wp-marketing-automations"))}),[]);var m=Object(Et.a)().getPageCountData,p=Object(_t.a)().setPageCountData,b=m();Object(r.useEffect)((function(){p(xt(xt({},b),{},{templates_templates:t}))}),[t]);var O=[{type:"heading",data:{title:Object(o.__)("Truly Flexible Email Editor With Beautiful Templates","wp-marketing-automations"),desc:Object(o.__)("Import beautiful email templates with a single click and never ever start from blank page again.","wp-marketing-automations")}},{type:"image-desc",data:[{img:Object(c.t)()+"template/template1.png",title:Object(o.__)("Pick from proven email templates","wp-marketing-automations"),desc:Object(o.__)("Save time with ever growing template library","wp-marketing-automations")},{img:Object(c.t)()+"template/template2.png",title:Object(o.__)("Edit with our easy drag-and-drop editor","wp-marketing-automations"),desc:Object(o.__)("Launch fast with features like saved sections & global styles","wp-marketing-automations")}]},{type:"buttons",data:{buttons:[{text:Object(o.__)("Create Email Template","wp-marketing-automations"),proCheck:!0,onClick:function(){Object(c.cc)()?f(!0):u(!0)}}]}},{type:"link-wth-text",data:{text:Object(o.__)("Curious about templates?","wp-marketing-automations"),link:"https://funnelkit.com/docs/autonami-2/email-builder/email-templates/",linkText:Object(o.__)("Learn More","wp-marketing-automations")}}];return Object(r.createElement)(r.Fragment,null,Object(c.fb)()&&0!==c.p?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(kt.a,null),Object(r.createElement)(yt,{menuButtons:e,pitchData:O,setOpenProModal:u})):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-content-header-new"},Object(r.createElement)("div",{className:"bwf-content-header-left"},Object(r.createElement)("div",{className:"bwf-content-header-title"},Object(o.__)("Templates","wp-marketing-automations")),!Object(c.cc)()&&c.e)),Object(r.createElement)(et.a,{data:O})),!Object(c.cc)()&&Object(r.createElement)(Pt.b,{isOpen:i,onRequestClose:function(){return u(!1)},modalContent:{isFeature:!0,featureTitle:Object(o.__)("Templates","wp-marketing-automations"),proLink:Object(c.gb)("upgrade",{utm_medium:"Create+Templates+Upgrade+Modal"}),image:Object(c.tb)("templates.png"),benefit:Object(o.__)("Unlock Templates and other awesome features.","wp-marketing-automations")}}),s&&Object(r.createElement)(ht,{onCloseModal:function(){return f(!1)}}))}}}]);