var C=Object.defineProperty;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var N=(a,t,s)=>t in a?C(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,y=(a,t)=>{for(var s in t||(t={}))I.call(t,s)&&N(a,s,t[s]);if(v)for(var s of v(t))A.call(t,s)&&N(a,s,t[s]);return a};import{r as m,j as e,h as W,u as z}from"./main.js";import{_ as r,L as _,b as F,z as B,c as M}from"./bi-336-181.js";import{S as T}from"./bi-980-944.js";import{s as q}from"./bi-171-733.js";import{I as D}from"./bi-803-734.js";import{S as E,h as P,c as L}from"./bi-688-740.js";import{B as H}from"./bi-230-776.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";import"./bi-993-739.js";function R({formID:a,sliceWpConf:t,setSliceWpConf:s,step:d,setStep:x,isLoading:u,setIsLoading:f,setSnackbar:S}){const[i,p]=m.useState(!1),[l,h]=m.useState(!1),j=()=>{f("auth"),F({},"slicewp_authorize").then(o=>{o!=null&&o.success&&(p(!0),S({show:!0,msg:r("Connected with SliceWp affiliate Successfully","bit-integrations")})),f(!1),h(!0)})},c=o=>{const b=B(t);b[o.target.name]=o.target.value,s(b)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:d===1&&900,height:d===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:r("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:c,name:"name",value:t.name,type:"text",placeholder:r("Integration Name...","bit-integrations")}),u==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(_,{size:25,clr:"#022217",className:"mr-2"}),"Checking if SliceWp affiliate is active!!!"]}),l&&!i&&!u&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"SliceWp affiliate plugin must be activated to integrate with Bit Integrations."]}),!i&&e.jsx("button",{onClick:j,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:r("Connect","bit-integrations")}),i&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!i,children:[r("Next","bit-integrations"),e.jsx(H,{className:"ml-1 rev-icn"})]})]})}function te({formFields:a,setFlow:t,flow:s,allIntegURL:d,isInfo:x,edit:u}){const f=W(),{formID:S}=z(),[i,p]=m.useState(!1),[l,h]=m.useState(1),[j,c]=m.useState({show:!1}),o=[{key:"1",label:"Add commission to user's affiliate"}],b=[{key:"commission_date",label:"commission_date",required:!0},{key:"reference",label:"Reference",required:!1},{key:"amount",label:"Amount",required:!1}],[n,g]=m.useState({name:"SliceWp",type:"SliceWp",mainAction:"",field_map:[{formField:"",slicewpFormField:""}],allActions:o,sliceWpFields:b,actions:{}}),w=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),!L(n)){c({show:!0,msg:r("Please map mandatory fields","bit-integrations")});return}n.mainAction!==""&&h(3)};return e.jsxs("div",{children:[e.jsx(M,{snack:j,setSnackbar:c}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(T,{step:3,active:l})}),e.jsx(R,{formID:S,sliceWpConf:n,setSliceWpConf:g,step:l,setStep:h,isLoading:i,setIsLoading:p,setSnackbar:c}),e.jsxs("div",{className:"btcd-stp-page",style:y({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(E,{formFields:a,handleInput:k=>P(k,n,g),sliceWpConf:n,setSliceWpConf:g,isLoading:i,setIsLoading:p,setSnackbar:c,allIntegURL:d,isInfo:x,edit:u}),e.jsxs("button",{onClick:()=>w(),disabled:!n.mainAction||i||n.statusId===void 0,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[r("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(D,{step:l,saveConfig:()=>q({flow:s,setFlow:t,allIntegURL:d,navigate:f,conf:n,setIsLoading:p,setSnackbar:c}),isLoading:i,dataConf:n,setDataConf:g,formFields:a})]})}export{te as default};
