var F=Object.defineProperty;var y=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var x=(t,a,s)=>a in t?F(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,q=(t,a)=>{for(var s in a||(a={}))I.call(a,s)&&x(t,s,a[s]);if(y)for(var s of y(a))z.call(a,s)&&x(t,s,a[s]);return t};import{h as E,r,j as i}from"./main.js";import{c as A,_ as L,a as c}from"./bi-336-181.js";import{S as M}from"./bi-980-944.js";import{e as D}from"./bi-171-733.js";import{I as T}from"./bi-803-734.js";import R from"./bi-421-387.js";import{h as W,c as v}from"./bi-416-917.js";import{C as B}from"./bi-169-918.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";function ee({formFields:t,setFlow:a,flow:s,allIntegURL:p}){const u=E(),[N,f]=r.useState(!1),[b,h]=r.useState({}),[n,g]=r.useState(1),[S,m]=r.useState({show:!1}),j=[{key:"name",label:"Name",required:!0},{key:"phone",label:"Phone",required:!1},{key:"email",label:"Email",required:!1},{key:"website",label:"Website",required:!1},{key:"address",label:"Address",required:!1}],C=[{key:"name",label:"Name",required:!0},{key:"designation",label:"Designation",required:!1},{key:"phone",label:"Phone",required:!1},{key:"email",label:"Email",required:!1},{key:"address",label:"Address",required:!1}],P=[{key:"name",label:"Name",required:!0},{key:"size",label:"Size",required:!1}],[e,l]=r.useState({name:"ClinchPad",type:"ClinchPad",api_key:"",field_map:[{formField:"",clinchPadFormField:""}],actionName:"",organizationFields:j,contactFields:C,leadFields:P,actions:{}}),_=()=>{f(!0),D(s,a,p,e,u,"","",f).then(d=>{var k;d.success?(c.success((k=d.data)==null?void 0:k.msg),u(p)):c.error(d.data||d)})},w=o=>{if(!v(e)){c.error("Please map mandatory fields");return}if(e.actionName==="lead"&&!e.selectedCRMPipeline){c.error("Please select a pipeline");return}e.field_map.length>0&&g(o)};return document.querySelector(".btcd-s-wrp").scrollTop=0,i.jsxs("div",{children:[i.jsx(A,{snack:S,setSnackbar:m}),i.jsx("div",{className:"txt-center mt-2",children:i.jsx(M,{step:3,active:n})}),i.jsx(R,{clinchPadConf:e,setClinchPadConf:l,step:n,setStep:g,loading:b,setLoading:h,setSnackbar:m}),i.jsxs("div",{className:"btcd-stp-page",style:q({},n===2&&{width:900,height:"auto",overflow:"visible"}),children:[i.jsx(B,{formFields:t,handleInput:o=>W(o,e,l),clinchPadConf:e,setClinchPadConf:l,loading:b,setLoading:h,setSnackbar:m}),(e==null?void 0:e.actionName)&&i.jsxs("button",{onClick:()=>w(3),disabled:!v(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[L("Next","bit-integrations")," ","Â ",i.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&i.jsx(T,{step:n,saveConfig:()=>_(),isLoading:N,dataConf:e,setDataConf:l,formFields:t})]})}export{ee as default};
