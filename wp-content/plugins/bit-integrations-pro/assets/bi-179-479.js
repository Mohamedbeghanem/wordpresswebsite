var N=Object.defineProperty;var x=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var k=(a,t,s)=>t in a?N(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,v=(a,t)=>{for(var s in t||(t={}))w.call(t,s)&&k(a,s,t[s]);if(x)for(var s of x(t))F.call(t,s)&&k(a,s,t[s]);return a};import{h as I,r as i,j as r}from"./main.js";import{c as C,_ as L,a as u}from"./bi-336-181.js";import{S as E}from"./bi-980-944.js";import{e as T}from"./bi-171-733.js";import{I as z}from"./bi-803-734.js";import A from"./bi-956-360.js";import{h as P,c as R}from"./bi-946-866.js";import{M as B}from"./bi-626-867.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";import"./bi-993-739.js";function U({formFields:a,setFlow:t,flow:s,allIntegURL:m}){const p=I(),[S,f]=i.useState(!1),[b,y]=i.useState({auth:!1,groups:!1,customFields:!1}),[l,g]=i.useState(1),[j,c]=i.useState({show:!1}),q=[{key:"email",label:"Email",required:!0},{key:"name",label:"Name",required:!1},{key:"address",label:"Address",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1},{key:"country",label:"Country",required:!1},{key:"birthday",label:"Birthday",required:!1},{key:"website",label:"Website",required:!1},{key:"locale",label:"Locale",required:!1},{key:"time_zone",label:"Time Zone",required:!1}],[e,o]=i.useState({name:"MailRelay",type:"MailRelay",auth_token:"",domain:"",field_map:[{formField:"",mailRelayFormField:""}],staticFields:q,status:"",customFields:[],groups:[],selectedGroups:[],actions:{}}),M=()=>{f(!0),T(s,t,m,e,p,"","",f).then(d=>{var h;d.success?(u.success((h=d.data)==null?void 0:h.msg),p(m)):u.error(d.data||d)})},_=n=>{if(!R(e)){u.error("Please map mandatory fields");return}e.field_map.length>0&&g(n)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(C,{snack:j,setSnackbar:c}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(E,{step:3,active:l})}),r.jsx(A,{mailRelayConf:e,setMailRelayConf:o,step:l,setStep:g,loading:b,setLoading:y,setSnackbar:c}),r.jsxs("div",{className:"btcd-stp-page",style:v({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(B,{formFields:a,handleInput:n=>P(n,e,o),mailRelayConf:e,setMailRelayConf:o,loading:b,setLoading:y,setSnackbar:c}),(e==null?void 0:e.status)&&r.jsxs("button",{onClick:()=>_(3),disabled:!(e!=null&&e.status),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[L("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.status)&&r.jsx(z,{step:l,saveConfig:()=>M(),isLoading:S,dataConf:e,setDataConf:o,formFields:a})]})}export{U as default};
