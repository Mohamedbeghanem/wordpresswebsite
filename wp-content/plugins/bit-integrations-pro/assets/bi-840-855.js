var K=Object.defineProperty,A=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var _=(s,t,e)=>t in s?K(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,f=(s,t)=>{for(var e in t||(t={}))q.call(t,e)&&_(s,e,t[e]);if(p)for(var e of p(t))w.call(t,e)&&_(s,e,t[e]);return s},h=(s,t)=>A(s,P(t));var o=(s,t,e)=>new Promise((r,u)=>{var l=i=>{try{a(e.next(i))}catch(m){u(m)}},c=i=>{try{a(e.throw(i))}catch(m){u(m)}},a=i=>i.done?r(i.value):Promise.resolve(i.value).then(l,c);a((e=e.apply(s,t)).next())});import{_ as d,b as y,a as n}from"./bi-336-181.js";import{e as b,s as T}from"./bi-171-733.js";const x=(s,t,e,r,u)=>{const l=f({},t),c=f({},r);c[s.target.name]="",l[s.target.name]=s.target.value,u(c),e(l)},I=(s,t,e,r,u)=>{if(!s.authKey){t({authKey:s.authKey?"":d("API key can't be empty")});return}t({}),u(h(f({},r),{auth:!0}));const l={authKey:s.authKey};y(l,"mailercloud_handle_authorize").then(c=>{if(!c.data.errors){e(!0),u(h(f({},r),{auth:!1})),n.success(d("Authorized successfully"));return}u(h(f({},r),{auth:!1})),n.error(d("Authorized failed"))})},M=(s,t,e,r)=>o(void 0,null,function*(){r&&r(h(f({},e),{list:!0}));const u={authKey:s.authKey},l=yield y(u,"mailercloud_get_all_lists");if(l.success){const{data:c}=l.data,a=f({},s);return c&&(a.default||(a.default={}),a.default.lists=c,t(a),r&&(r(h(f({},e),{list:!1})),n.success(d("Tag refresh successfully")))),!0}return r&&(r(h(f({},e),{list:!1})),n.success(d("Tag refresh failed"))),!1}),g=(s,t,e,r)=>o(void 0,null,function*(){r&&r(h(f({},e),{field:!0}));const u={authKey:s.authKey},l=yield y(u,"mailercloud_get_all_fields");if(l.success){const{data:c}=l,a=f({},s);return c&&(a.default||(a.default={}),a.default.fields=c,t(a),r&&(r(h(f({},e),{field:!1})),n.success(d("Tag refresh successfully")))),!0}return r&&(r(h(f({},e),{field:!1})),n.success(d("Tag refresh failed"))),!1}),S=s=>{var e;const t=(e=s==null?void 0:s.default)==null?void 0:e.fields.filter(r=>r.required===!0);return t.length>0?t.map(r=>({formField:"",mailercloudFormField:r.key})):[{formField:"",mailercloudFormField:""}]},F=s=>!((s!=null&&s.field_map?s.field_map.filter(e=>!e.formField||!e.mailercloudFormField||!e.formField==="custom"&&!e.customValue):[]).length>0),V=(s,t,e)=>{if(!F(s)){n.error("Please map mandatory fields");return}s.field_map.length>0&&t(e),document.querySelector(".btcd-s-wrp").scrollTop=0},j=(s,t,e,r,u,l)=>{l(!0),b(s,t,e,r,u,"","",l).then(a=>{var i;a.success?(n.success((i=a.data)==null?void 0:i.msg),u(e)):n.error(a.data||a)})},B=(s,t,e,r,u,l)=>{if(!F(e)){n.error("Please map mandatory fields");return}T({flow:s,allIntegURL:t,conf:e,navigate:r,edit:u,setIsLoading:l})};export{M as a,g as b,I as c,j as d,S as g,x as h,V as n,B as s};
