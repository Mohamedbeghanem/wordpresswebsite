var D=Object.defineProperty;var g=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var b=(a,t,s)=>t in a?D(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,S=(a,t)=>{for(var s in t||(t={}))_.call(t,s)&&b(a,s,t[s]);if(g)for(var s of g(t))k.call(t,s)&&b(a,s,t[s]);return a};import{h as w,u as y,r as i,j as o}from"./main.js";import{c as I,_ as d}from"./bi-336-181.js";import{S as N}from"./bi-980-944.js";import{s as P}from"./bi-171-733.js";import{I as A}from"./bi-803-734.js";import L from"./bi-652-378.js";import{h as E,c as M,a as R}from"./bi-735-901.js";import{F as T}from"./bi-310-902.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-90-750.js";import"./bi-648-738.js";import"./bi-993-739.js";function $({formFields:a,setFlow:t,flow:s,allIntegURL:x}){const F=w(),{formID:u}=y(),[m,n]=i.useState(!1),[l,f]=i.useState(1),[v,r]=i.useState({show:!1}),[h,j]=i.useState(0),[e,c]=i.useState({name:"FreshSales",type:"FreshSales",api_key:"",bundle_alias:"",default:{modules:{Account:{required:!0,requiredFields:[]},Deal:{required:!0,requiredFields:[]},Contact:{required:!0,requiredFields:[]},Product:{requiredFields:[]}}},moduleData:{module:""},field_map:[{formField:"",freshSalesFormField:""}],relatedlists:[],actions:{}}),C=()=>{P({flow:s,setFlow:t,allIntegURL:x,conf:e,navigate:F,setIsLoading:n,setSnackbar:r})},q=p=>{if(!M(e)){r({show:!0,msg:d("Please map mandatory fields","bit-integrations")});return}if(!R(e)){["Deal","Contact"].includes(e.moduleData.module)&&r({show:!0,msg:d("Please select a account or a contact","bit-integrations")}),e.moduleData.module==="Contacts"&&r({show:!0,msg:d("Please select a account","bit-integrations")});return}e.moduleData.module&&e.field_map.length>0&&f(p)};return document.querySelector(".btcd-s-wrp").scrollTop=0,o.jsxs("div",{children:[o.jsx(I,{snack:v,setSnackbar:r}),o.jsx("div",{className:"txt-center mt-2",children:o.jsx(N,{step:3,active:l})}),o.jsx(L,{formID:u,freshSalesConf:e,setFreshSalesConf:c,step:l,setstep:f,isLoading:m,setIsLoading:n,setSnackbar:r}),o.jsxs("div",{className:"btcd-stp-page",style:S({},l===2&&{width:900,height:"auto",overflow:"visible"}),children:[o.jsx(T,{tab:h,settab:j,formID:u,formFields:a,handleInput:p=>E(p,h,e,c,u,n,r),freshSalesConf:e,setFreshSalesConf:c,isLoading:m,setIsLoading:n,setSnackbar:r}),o.jsxs("button",{onClick:()=>q(3),disabled:e.moduleData.module===""||e.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[d("Next","bit-integrations")," ","Â ",o.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),o.jsx(A,{step:l,saveConfig:()=>C(),isLoading:m,dataConf:e,setDataConf:c,formFields:a})]})}export{$ as default};
