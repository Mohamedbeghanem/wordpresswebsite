var k=Object.defineProperty;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var A=(a,t,s)=>t in a?k(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,N=(a,t)=>{for(var s in t||(t={}))S.call(t,s)&&A(a,s,t[s]);if(y)for(var s of y(t))D.call(t,s)&&A(a,s,t[s]);return a};import{r as l,j as e,h as w,u as T}from"./main.js";import{_ as n,L as z,c as C}from"./bi-336-181.js";import{S as B}from"./bi-980-944.js";import{s as W}from"./bi-171-733.js";import{I as E}from"./bi-803-734.js";import{B as P}from"./bi-230-776.js";import{a as _,W as F,h as L,c as M}from"./bi-592-833.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-457-780.js";import"./bi-648-738.js";import"./bi-993-739.js";function q({formID:a,whatsAppConf:t,setWhatsAppConf:s,step:g,setstep:I,isLoading:x,setIsLoading:d,setSnackbar:m,redirectLocation:p,isInfo:o}){const[u,c]=l.useState(!1),[b,j]=l.useState({dataCenter:"",clientId:""}),i=()=>{setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),I(2)},r=h=>{const f=N({},t),v=N({},b);v[h.target.name]="",f[h.target.name]=h.target.value,j(v),s(f)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:g===1&&900,height:g===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:r,name:"name",value:t.name,type:"text",placeholder:n("Integration Name...","bit-integrations"),disabled:o}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Phone number ID:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:r,name:"numberID",value:t.numberID,type:"text",placeholder:n("Number ID...","bit-integrations"),disabled:o}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("WhatsApp Business Account ID:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:r,name:"businessAccountID",value:t.businessAccountID,type:"text",placeholder:n("Business Account ID...","bit-integrations"),disabled:o}),e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:n("Access Token:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:r,name:"token",value:t.token,type:"text",placeholder:n("Access Token...","bit-integrations"),disabled:o}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:b.clientId}),e.jsx("div",{style:{color:"red",fontSize:"15px"},children:b.clientSecret}),!o&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>_(t,s,j,c,d,m),className:"btn btcd-btn-lg green sh-sm flx",type:"button",disabled:u||x,children:[u?n("Authorized ✔","bit-integrations"):n("Authorize","bit-integrations"),x&&e.jsx(z,{size:20,clr:"#022217",className:"ml-2"})]}),e.jsx("br",{}),e.jsxs("button",{onClick:i,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",disabled:!u,children:[n("Next","bit-integrations"),e.jsx(P,{className:"ml-1 rev-icn"})]})]})]})}function ee({formFields:a,setFlow:t,flow:s,allIntegURL:g}){const I=w(),{formID:x}=T(),[d,m]=l.useState(!1),[p,o]=l.useState(1),[u,c]=l.useState({show:!1}),b=[{key:"phone",label:"Phone",required:!0}],j=[{id:"2",label:"Template"}],[i,r]=l.useState({name:"WhatsApp",type:"WhatsApp",numberID:"",businessAccountID:"",messageType:j,messageTypeId:"",body:"",templateName:"",token:"",field_map:[{formField:"",whatsAppFormField:""}],whatsAppFields:b,address_field:[],actions:{}}),h=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),M(i)){c({show:!0,msg:"Please map fields to continue."});return}o(3)},f=i.messageTypeId==="1"?i.body==="":i.templateName==="";return e.jsxs("div",{children:[e.jsx(C,{snack:u,setSnackbar:c}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(B,{step:3,active:p})}),e.jsx(q,{formID:x,whatsAppConf:i,setWhatsAppConf:r,step:p,setstep:o,isLoading:d,setIsLoading:m,setSnackbar:c}),e.jsxs("div",{className:"btcd-stp-page",style:N({},p===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(F,{formFields:a,handleInput:v=>L(v,i,r),whatsAppConf:i,setWhatsAppConf:r,isLoading:d,setIsLoading:m,setSnackbar:c}),e.jsxs("button",{onClick:()=>h(),disabled:f,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[n("Next","bit-integrations")," "," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),e.jsx(E,{step:p,saveConfig:()=>W({flow:s,setFlow:t,allIntegURL:g,navigate:I,conf:i,setIsLoading:m,setSnackbar:c}),isLoading:d,dataConf:i,setDataConf:r,formFields:a})]})}export{ee as default};
