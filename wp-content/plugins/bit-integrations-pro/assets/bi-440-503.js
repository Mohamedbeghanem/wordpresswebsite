var q=Object.defineProperty;var j=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var k=(a,t,s)=>t in a?q(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,S=(a,t)=>{for(var s in t||(t={}))w.call(t,s)&&k(a,s,t[s]);if(j)for(var s of j(t))P.call(t,s)&&k(a,s,t[s]);return a};import{h as C,r as o,j as r}from"./main.js";import{c as F,_ as D,a as n}from"./bi-336-181.js";import{S as L}from"./bi-980-944.js";import{e as E}from"./bi-171-733.js";import{I as M}from"./bi-803-734.js";import T from"./bi-897-383.js";import{h as z,c as v}from"./bi-929-910.js";import{A as O}from"./bi-341-911.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";function $({formFields:a,setFlow:t,flow:s,allIntegURL:p}){const u=C(),[N,f]=o.useState(!1),[g,h]=o.useState({}),[i,b]=o.useState(1),[y,m]=o.useState({show:!1}),_=[{key:"name",label:"Name",required:!0},{key:"due_at",label:"Due At",required:!1},{key:"due_on",label:"Due On",required:!1},{key:"notes",label:"Notes",required:!1}],[e,c]=o.useState({name:"Asana",type:"Asana",api_key:"",field_map:[{formField:"",asanaFormField:""}],actionName:"",taskFields:_,actions:{}}),A=()=>{f(!0),E(s,t,p,e,u,"","",f).then(d=>{var x;d.success?(n.success((x=d.data)==null?void 0:x.msg),u(p)):n.error(d.data||d)})},I=l=>{if(!v(e)){n.error("Please map mandatory fields");return}if(e.actionName==="task"){if(!e.selectedProject){n.error("Please select a project");return}if(!e.selectedSections&&e.actionName==="task"){n.error("Please select a Section");return}}e.field_map.length>0&&b(l)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(F,{snack:y,setSnackbar:m}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(L,{step:3,active:i})}),r.jsx(T,{asanaConf:e,setAsanaConf:c,step:i,setStep:b,loading:g,setLoading:h,setSnackbar:m}),r.jsxs("div",{className:"btcd-stp-page",style:S({},i===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(O,{formFields:a,handleInput:l=>z(l,e,c),asanaConf:e,setAsanaConf:c,loading:g,setLoading:h,setSnackbar:m}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>I(3),disabled:!v(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[D("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(M,{step:i,saveConfig:()=>A(),isLoading:N,dataConf:e,setDataConf:c,formFields:a})]})}export{$ as default};
