var R=Object.defineProperty;var I=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var T=(i,d,s)=>d in i?R(i,d,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[d]=s,o=(i,d)=>{for(var s in d||(d={}))k.call(d,s)&&T(i,s,d[s]);if(I)for(var s of I(d))M.call(d,s)&&T(i,s,d[s]);return i};import{j as e,l as V,r as A,L}from"./main.js";import{a2 as O,g as c,x as q,a3 as E}from"./bi-336-181.js";import{h as H,a as P}from"./bi-171-733.js";import{r as _,a as S,b as $}from"./bi-447-773.js";import{T as U}from"./bi-811-731.js";import{S as B}from"./bi-648-738.js";import{T as D}from"./bi-993-739.js";function G({activeCampaingConf:i,setActiveCampaingConf:d}){var t;const s=(u,h)=>{const b=o({},i);h==="update"&&(u.target.checked?b.actions.update=!0:delete b.actions.update),d(o({},b))};return e.jsx("div",{className:"pos-rel d-flx w-8",children:e.jsx(O,{checked:((t=i.actions)==null?void 0:t.update)||!1,onChange:u=>s(u,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:c("Update ActiveCampaign","bit-integrations"),subTitle:c("Update Responses with ActiveCampaign existing email?","bit-integrations")})})}function z({i,formFields:d,field:s,activeCampaingConf:t,setActiveCampaingConf:u}){var a,n,r,x;const h=s.required,b=((a=t==null?void 0:t.default)==null?void 0:a.fields)&&Object.values((n=t==null?void 0:t.default)==null?void 0:n.fields).filter(l=>!l.required),y=V(q),{isPro:p}=y,N=l=>{const m=o({},t);m.field_map.splice(l,0,{}),u(m)},F=l=>{const m=o({},t);m.field_map.length>1&&m.field_map.splice(l,1),u(m)},j=(l,m)=>{const w=o({},t);w.field_map[m][l.target.name]=l.target.value,l.target.value==="custom"&&(w.field_map[m].customValue=""),u(w)};return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:s.formField||"",onChange:l=>j(l,i),children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:d==null?void 0:d.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`))}),e.jsx("option",{value:"custom",children:c("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${p?"":"(PRO)"}`,children:p&&((r=B)==null?void 0:r.map(l=>e.jsx("option",{value:l.name,children:l.label},`ff-rm-${l.name}`)))})]}),s.formField==="custom"&&e.jsx(D,{onChange:l=>H(l,i,t,u),label:c("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:s.customValue,placeholder:c("Custom Value","bit-integrations"),formFields:d}),e.jsxs("select",{className:"btcd-paper-inp",name:"activeCampaignField",value:s.activeCampaignField,onChange:l=>j(l,i),disabled:h,children:[e.jsx("option",{value:"",children:c("Select Field","bit-integrations")}),h?((x=t==null?void 0:t.default)==null?void 0:x.fields)&&Object.values(t.default.fields).map(l=>e.jsx("option",{value:l.fieldId,children:l.fieldName},`${l.fieldId}-1`)):b&&b.map(l=>e.jsx("option",{value:l.fieldId,children:l.fieldName},`${l.fieldId}-1`))]})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>N(i),className:"icn-btn sh-sm ml-2",type:"button",children:"+"}),e.jsx("button",{onClick:()=>F(i),className:"icn-btn sh-sm ml-2",type:"button","aria-label":"btn",children:e.jsx(U,{})})]})]})}function f({formID:i,formFields:d,activeCampaingConf:s,setActiveCampaingConf:t,isLoading:u,setIsLoading:h,setSnackbar:b}){var F,j,a,n;const y=r=>{const x=o({},s);r?x.tagIds=r?r.split(","):[]:delete x.tagIds,t(o({},x))},p=r=>{const x=r.target.value,l=o({},s);x?l.listId=x:delete l.listId,$(l,t,h,b)},N=(F=s==null?void 0:s.default)==null?void 0:F.activeCampaignLists;return A.useEffect(()=>{N&&_(s,t,h,b)},[N]),e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:c("List:","bit-integrations")}),e.jsxs("select",{value:s==null?void 0:s.listId,name:"listId",id:"",className:"btcd-paper-inp w-5",onChange:p,children:[e.jsx("option",{value:"",children:c("Select List","bit-integrations")}),((j=s==null?void 0:s.default)==null?void 0:j.activeCampaignLists)&&Object.keys(s.default.activeCampaignLists).map(r=>e.jsx("option",{value:s.default.activeCampaignLists[r].listId,children:s.default.activeCampaignLists[r].listName},`${r+1}`))]}),e.jsx("button",{onClick:()=>S(s,t,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Activecapmaign list"'},type:"button",disabled:u,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{style:{marginTop:"15px"},className:"wdt-200 d-in-b",children:c("Tags: ","bit-integrations")}),e.jsx(E,{defaultValue:s==null?void 0:s.tagIds,className:"btcd-paper-drpdwn w-5",options:((a=s==null?void 0:s.default)==null?void 0:a.activeCampaignTags)&&Object.keys(s.default.activeCampaignTags).map(r=>({label:s.default.activeCampaignTags[r].tagName,value:s.default.activeCampaignTags[r].tagId})),onChange:r=>y(r)}),e.jsx("button",{onClick:()=>_(s,t,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Activecapmaign Tags","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),e.jsx("br",{}),u&&e.jsx(L,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:c("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>$(s,t,h,b),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${c("Refresh Activecapmaign Field","bit-integrations")}'`},type:"button",disabled:u,children:"↻"})]}),((s==null?void 0:s.listId)||((n=s==null?void 0:s.default)==null?void 0:n.fields))&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:c("ActiveCampaign Fields","bit-integrations")})})]}),s.field_map.map((r,x)=>e.jsx(z,{i:x,field:r,activeCampaingConf:s,formFields:d,setActiveCampaingConf:t},`Activecampaign-m-${x+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>P(s.field_map.length,s,t),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:c("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(G,{activeCampaingConf:s,setActiveCampaingConf:t})]})]})}export{f as A};
