var w=Object.defineProperty;var k=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var j=(s,t,a)=>t in s?w(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,N=(s,t)=>{for(var a in t||(t={}))E.call(t,a)&&j(s,a,t[a]);if(k)for(var a of k(t))P.call(t,a)&&j(s,a,t[a]);return s};import{h as C,r as i,j as r}from"./main.js";import{c as L,_ as I,a as l}from"./bi-336-181.js";import{S as F}from"./bi-980-944.js";import{e as M}from"./bi-171-733.js";import{I as R}from"./bi-803-734.js";import A from"./bi-901-398.js";import{b as T,c as S}from"./bi-26-939.js";import{D as W}from"./bi-644-940.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";function Z({formFields:s,setFlow:t,flow:a,allIntegURL:p}){const u=C(),[f,c]=i.useState(!1),[b,g]=i.useState({}),[o,h]=i.useState(1),[_,m]=i.useState({show:!1}),x=[{label:"First Name",key:"name",required:!0},{label:"Email Address",key:"email",required:!0},{label:"Last Name",key:"last_name",required:!1},{label:"Phone Number",key:"phone_number",required:!1},{label:"Company",key:"company",required:!1},{label:"Website",key:"website",required:!1},{label:"GDPR",key:"gdpr",required:!1},{label:"Event Registration page URL",key:"ref_url",required:!1}],[e,d]=i.useState({name:"Demio",type:"Demio",api_key:"",api_secret:"",field_map:T(x),actionName:"registerPeopletoWabinar",demioFields:x,actions:{}}),q=()=>{c(!0),M(a,t,p,e,u,"","",c).then(n=>{var v;n.success?(l.success((v=n.data)==null?void 0:v.msg),u(p)):l.error(n.data||n)})},D=y=>{if(!S(e)){l.error("Please map mandatory fields");return}if(!e.selectedEvent){l.error("Please select a Event");return}e.field_map.length>0&&h(y)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(L,{snack:_,setSnackbar:m}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(F,{step:3,active:o})}),r.jsx(A,{demioConf:e,setDemioConf:d,step:o,setStep:h,loading:b,setLoading:g,setSnackbar:m}),r.jsxs("div",{className:"btcd-stp-page",style:N({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(W,{formFields:s,demioConf:e,setDemioConf:d,loading:b,setLoading:g,isLoading:f,setIsLoading:c,setSnackbar:m}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>D(3),disabled:!S(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[I("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(R,{step:o,saveConfig:()=>q(),isLoading:f,dataConf:e,setDataConf:d,formFields:s})]})}export{Z as default};
