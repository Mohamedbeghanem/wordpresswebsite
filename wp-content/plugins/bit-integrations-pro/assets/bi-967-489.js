var F=Object.defineProperty;var g=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var h=(s,a,t)=>a in s?F(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,x=(s,a)=>{for(var t in a||(a={}))P.call(a,t)&&h(s,t,a[t]);if(g)for(var t of g(a))L.call(a,t)&&h(s,t,a[t]);return s};import{h as T,r as i,j as l}from"./main.js";import{c as I,_ as M,a as r}from"./bi-336-181.js";import{S as D}from"./bi-980-944.js";import{e as E}from"./bi-171-733.js";import{I as R}from"./bi-803-734.js";import z from"./bi-362-370.js";import{h as J,c as N}from"./bi-837-885.js";import{A as W}from"./bi-945-886.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";function ee({formFields:s,setFlow:a,flow:t,allIntegURL:f}){const m=T(),[S,b]=i.useState(!1),[p,k]=i.useState({}),[o,y]=i.useState(1),[_,u]=i.useState({show:!1}),j=[{key:"name",label:"Name",required:!0},{key:"description",label:"Description",required:!1},{key:"size",label:"Size",required:!1},{key:"email",label:"Email",required:!1},{key:"phone",label:"Phone",required:!1},{key:"website",label:"Website",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"linkedin",label:"Linkedin",required:!1},{key:"twitter",label:"Twitter",required:!1},{key:"skype",label:"Skype",required:!1},{key:"note",label:"Note",required:!1},{key:"tax_no",label:"Tax No",required:!1}],v=[{key:"first_name",label:"First Name",required:!0},{key:"email",label:"Email",required:!0},{key:"last_name",label:"Last Name",required:!1},{key:"phone",label:"Phone",required:!1},{key:"job_title",label:"Job Title",required:!1},{key:"facebook",label:"Facebook",required:!1},{key:"linkedin",label:"Linkedin",required:!1},{key:"twitter",label:"Twitter",required:!1},{key:"skype",label:"Skype",required:!1},{key:"note",label:"Note",required:!1},{key:"tax_no",label:"Tax No",required:!1},{key:"last_contacted",label:"Last Contacted",required:!1}],w=[{key:"deal_name",label:"Deal Name",required:!0},{key:"amount",label:"Amount",required:!1},{key:"close_date",label:"Close Date",required:!1}],[e,n]=i.useState({name:"Agiled CRM",type:"Agiled CRM",auth_token:"",brand:"",field_map:[{formField:"",agiledFormField:""}],actionName:"",accountFields:j,contactFields:v,dealFields:w,actions:{}}),C=()=>{b(!0),E(t,a,f,e,m,"","",b).then(c=>{var q;c.success?(r.success((q=c.data)==null?void 0:q.msg),m(f)):r.error(c.data||c)})},A=d=>{if(!N(e)){r.error("Please map mandatory fields");return}if(e.actionName==="deal"){if(!e.selectedCRMPipeline){r.error("Please select a pipeline");return}if(!e.selectedCRMPipelineStages){r.error("Please select a pipeline stage");return}}e.field_map.length>0&&y(d)};return document.querySelector(".btcd-s-wrp").scrollTop=0,l.jsxs("div",{children:[l.jsx(I,{snack:_,setSnackbar:u}),l.jsx("div",{className:"txt-center mt-2",children:l.jsx(D,{step:3,active:o})}),l.jsx(z,{agiledConf:e,setAgiledConf:n,step:o,setStep:y,loading:p,setLoading:k,setSnackbar:u}),l.jsxs("div",{className:"btcd-stp-page",style:x({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[l.jsx(W,{formFields:s,handleInput:d=>J(d,e,n),agiledConf:e,setAgiledConf:n,loading:p,setLoading:k,setSnackbar:u}),(e==null?void 0:e.actionName)&&l.jsxs("button",{onClick:()=>A(3),disabled:!N(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[M("Next","bit-integrations")," ","Â ",l.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&l.jsx(R,{step:o,saveConfig:()=>C(),isLoading:S,dataConf:e,setDataConf:n,formFields:s})]})}export{ee as default};
