var I=Object.defineProperty;var v=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var j=(a,t,s)=>t in a?I(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,N=(a,t)=>{for(var s in t||(t={}))M.call(t,s)&&j(a,s,t[s]);if(v)for(var s of v(t))R.call(t,s)&&j(a,s,t[s]);return a};import{r as h,j as e,h as z,u as _,l as F}from"./main.js";import{_ as m,L as T,b as B,z as E,x as G,c as P}from"./bi-336-181.js";import{S as q}from"./bi-980-944.js";import{s as U}from"./bi-171-733.js";import{I as H}from"./bi-803-734.js";import{L as O,h as $,c as J}from"./bi-251-834.js";import{B as K}from"./bi-230-776.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-722-194.js";import"./bi-648-738.js";import"./bi-457-780.js";import"./bi-476-732.js";import"./bi-993-739.js";function Q({formID:a,learnDashConf:t,setLearnDashConf:s,step:u,setStep:x,isLoading:p,setIsLoading:b,setSnackbar:k}){const[i,y]=h.useState(!1),[l,d]=h.useState(!1),c=()=>{b("auth"),B({},"learnDash_authorize").then(r=>{r!=null&&r.success&&(y(!0),k({show:!0,msg:m("Connected with LearnDash Successfully","bit-integrations")})),b(!1),d(!0)})},g=r=>{const n=E(t);n[r.target.name]=r.target.value,s(n)};return e.jsxs("div",{className:"btcd-stp-page",style:{width:u===1&&900,height:u===1&&"auto"},children:[e.jsx("div",{className:"mt-3",children:e.jsx("b",{children:m("Integration Name:","bit-integrations")})}),e.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:g,name:"name",value:t.name,type:"text",placeholder:m("Integration Name...","bit-integrations")}),p==="auth"&&e.jsxs("div",{className:"flx mt-5",children:[e.jsx(T,{size:25,clr:"#022217",className:"mr-2"}),"Checking if LearnDash is active!!!"]}),l&&!i&&!p&&e.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[e.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"LearnDash plugin must be activated to integrate with Bit Integrations."]}),!i&&e.jsx("button",{onClick:c,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:m("Connect","bit-integrations")}),i&&e.jsxs("button",{onClick:()=>x(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!i,children:[m("Next","bit-integrations"),e.jsx(K,{className:"ml-1 rev-icn"})]})]})}function me({formFields:a,setFlow:t,flow:s,allIntegURL:u,isInfo:x,edit:p}){const b=z(),{formID:k}=_(),i=F(G),{siteURL:y}=i,[l,d]=h.useState(!1),[c,g]=h.useState(1),[r,n]=h.useState({show:!1}),L=[{key:"1",label:"Create Group"},{key:"2",label:"Add the user to a group pro"},{key:"3",label:"Enroll the user in a course"},{key:"4",label:"Make the user the leader of group"},{key:"5",label:"Mark a course complete for the user"},{key:"6",label:"Mark a lesson complete for the user"},{key:"7",label:"Mark a lesson not complete for the user pro"},{key:"8",label:"Mark a topic complete for the user"},{key:"9",label:"Mark a topic not complete for the user pro"},{key:"10",label:"Remove the Leader from a group and its children pro"},{key:"11",label:"Remove the user from a group pro"},{key:"12",label:"Remove the user from a group and its children pro"},{key:"13",label:"Reset the users attempts for a quiz pro "},{key:"14",label:"Reset the users progress in a course pro"},{key:"16",label:"Send an email to the users group leaders"},{key:"17",label:"Unenroll the user from a course pro"}],S=[{key:"1",label:"Do not add group leader role"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],w=[{key:"1",label:"Do nothing"},{key:"2",label:"Add the role to their exiting role"},{key:"3",label:"Replace their existing role(s) with the Group Leader role"}],A=[{key:"title",label:"Title",required:!0}],[o,f]=h.useState({name:"LearnDash",type:"LearnDash",mainAction:"",courseId:"",domainName:y,field_map:[{formField:"",learnDeshFormField:""}],allActions:L,groupUserRole:S,groupOfLeader4:w,createGroupFields:A,actions:{}}),D=()=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),o.mainAction==="1"&&!J(o)){n({show:!0,msg:"Please map fields to continue."});return}o.mainAction!==""&&g(3)};return e.jsxs("div",{children:[e.jsx(P,{snack:r,setSnackbar:n}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(q,{step:3,active:c})}),e.jsx(Q,{formID:k,learnDashConf:o,setLearnDashConf:f,step:c,setStep:g,isLoading:l,setIsLoading:d,setSnackbar:n}),e.jsxs("div",{className:"btcd-stp-page",style:N({},c===2&&{width:900,height:"auto",overflow:"visible"}),children:[e.jsx(O,{formFields:a,handleInput:C=>$(C,o,f),learnDashConf:o,setLearnDashConf:f,isLoading:l,setIsLoading:d,setSnackbar:n,allIntegURL:u,isInfo:x,edit:p}),o.mainAction!=="16"&&e.jsxs("button",{onClick:()=>D(),disabled:!o.mainAction||l,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[m("Next","bit-integrations")," ",e.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),o.mainAction!=="16"&&e.jsx(H,{step:c,saveConfig:()=>U({flow:s,setFlow:t,allIntegURL:u,navigate:b,conf:o,setIsLoading:d,setSnackbar:n}),isLoading:l,dataConf:o,setDataConf:f,formFields:a})]})}export{me as default};
