var N=Object.defineProperty;var j=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var v=(a,s,e)=>s in a?N(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e,S=(a,s)=>{for(var e in s||(s={}))C.call(s,e)&&v(a,e,s[e]);if(j)for(var e of j(s))L.call(s,e)&&v(a,e,s[e]);return a};import{r as m,j as t,h as w}from"./main.js";import{_ as d,L as y,b as T,z as I,c as k}from"./bi-336-181.js";import{S as z}from"./bi-980-944.js";import{s as M}from"./bi-171-733.js";import{I as A}from"./bi-803-734.js";import{B as _}from"./bi-230-776.js";import{T as B,h as D}from"./bi-851-781.js";import"./bi-212-737.js";import"./bi-811-731.js";function E({tutorlmsConf:a,setTutorlmsConf:s,step:e,setStep:p,setSnackbar:b}){const[n,r]=m.useState(!1),[i,h]=m.useState(!1),[f,c]=m.useState(!1),l=()=>{h("auth"),T({},"tutor_authorize").then(o=>{o!=null&&o.success&&(r(!0),b({show:!0,msg:d("Connected with Tutor LMS Successfully","bit-integrations")})),h(!1),c(!0)})},u=o=>{const g=I(a);g[o.target.name]=o.target.value,s(g)};return t.jsxs("div",{className:"btcd-stp-page",style:{width:e===1&&900,height:e===1&&"auto"},children:[t.jsx("div",{className:"mt-3",children:t.jsx("b",{children:d("Integration Name:","bit-integrations")})}),t.jsx("input",{className:"btcd-paper-inp w-6 mt-1",onChange:u,name:"name",value:a.name,type:"text",placeholder:d("Integration Name...","bit-integrations")}),i==="auth"&&t.jsxs("div",{className:"flx mt-5",children:[t.jsx(y,{size:25,clr:"#022217",className:"mr-2"}),"Checking if Tutor LMS is active!!!"]}),f&&!n&&!i&&t.jsxs("div",{className:"flx mt-5",style:{color:"red"},children:[t.jsx("span",{className:"btcd-icn mr-2",style:{fontSize:30,marginTop:-5},children:"×"}),"Tutor LMS plugin must be activated to integrate with Bit Integrations."]}),!n&&t.jsx("button",{onClick:l,className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",children:d("Connect","bit-integrations")}),n&&t.jsxs("button",{onClick:()=>p(2),className:"btn btcd-btn-lg green sh-sm flx mt-5",type:"button",disabled:!n,children:[d("Next","bit-integrations"),t.jsx(_,{className:"ml-1 rev-icn"})]})]})}function Q({formFields:a,setFlow:s,flow:e,allIntegURL:p}){const b=w(),[n,r]=m.useState(!1),[i,h]=m.useState(1),[f,c]=m.useState({show:!1}),[l,u]=m.useState({name:"Tutor LMS",type:"Tutor Lms",field_map:[{formField:"",tutorField:""}],actions:{},actionData:{}}),o=()=>{r(!0),M({flow:e,setFlow:s,allIntegURL:p,conf:l,navigate:b,setIsLoading:r,setSnackbar:c})},g=x=>{h(x)};return document.querySelector(".btcd-s-wrp").scrollTop=0,t.jsxs("div",{children:[t.jsx(k,{snack:f,setSnackbar:c}),t.jsx("div",{className:"txt-center mt-2",children:t.jsx(z,{step:3,active:i})}),t.jsx(E,{tutorlmsConf:l,setTutorlmsConf:u,step:i,setStep:h,isLoading:n,setIsLoading:r,setSnackbar:c}),t.jsxs("div",{className:"btcd-stp-page",style:S({},i===2&&{width:900,height:"auto",minHeight:i===2&&"260px",overflow:"visible"}),children:[t.jsx(B,{formFields:a,handleInput:x=>D(x,l,u,r,c),tutorlmsConf:l,setTutorlmsConf:u,isLoading:n,setIsLoading:r,setSnackbar:c}),t.jsxs("button",{onClick:()=>g(3),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[d("Next","bit-integrations")," "," ",t.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),t.jsx(A,{step:i,saveConfig:()=>o(),isLoading:n,dataConf:l,setDataConf:u,formFields:a})]})}export{Q as default};
