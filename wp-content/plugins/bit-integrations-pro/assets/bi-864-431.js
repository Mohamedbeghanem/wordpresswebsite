import{h as j,u as b,r as o,j as e}from"./main.js";import{c as C,_ as S}from"./bi-336-181.js";import{B as F}from"./bi-230-776.js";import{S as I}from"./bi-980-944.js";import{e as N}from"./bi-171-733.js";import{I as _}from"./bi-803-734.js";import k from"./bi-482-322.js";import{F as v,c as w,r as y}from"./bi-664-782.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";import"./bi-993-739.js";function $({formFields:c,setFlow:d,flow:f,allIntegURL:g}){const x=j(),{formID:m}=b(),[l,i]=o.useState(!1),[s,p]=o.useState(1),[h,a]=o.useState({show:!1}),[t,n]=o.useState({name:"Fluent CRM",type:"Fluent Crm",field_map:[{formField:"",fluentCRMField:""}],actions:{}}),u=r=>{if(setTimeout(()=>{document.getElementById("btcd-settings-wrp").scrollTop=0},300),r===3){if(!w(t)){a({show:!0,msg:"Please map all required fields to continue."});return}if((t==null?void 0:t.actionName)==="add-user"&&!t.list_id){a({show:!0,msg:"Please select list to continue."});return}t.name!==""&&t.field_map.length>0&&p(r)}else p(r),r===2&&t.name&&y(m,t,n,i,a)};return e.jsxs("div",{children:[e.jsx(C,{snack:h,setSnackbar:a}),e.jsx("div",{className:"txt-center mt-2",children:e.jsx(I,{step:3,active:s})}),e.jsx(k,{formID:m,fluentCrmConf:t,setFluentCrmConf:n,step:s,nextPage:u,isLoading:l,setIsLoading:i,setSnackbar:a}),e.jsxs("div",{className:"btcd-stp-page",style:{width:s===2&&900,height:s===2&&"auto",minHeight:s===2&&"200px"},children:[e.jsx(v,{formID:m,formFields:c,fluentCrmConf:t,setFluentCrmConf:n,setIsLoading:i,setSnackbar:a}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("button",{onClick:()=>u(3),disabled:t.field_map.length<1,className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[S("Next","bit-integrations"),e.jsx(F,{className:"ml-1 rev-icn"})]})]}),e.jsx(_,{step:s,saveConfig:()=>N(f,d,g,t,x,"","",i),isLoading:l,dataConf:t,setDataConf:n,formFields:c})]})}export{$ as default};
