var C=Object.defineProperty;var y=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var b=(s,e,t)=>e in s?C(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,S=(s,e)=>{for(var t in e||(e={}))N.call(e,t)&&b(s,t,e[t]);if(y)for(var t of y(e))I.call(e,t)&&b(s,t,e[t]);return s};import{h as w,r as l,j as a}from"./main.js";import{c as q,_ as E,a as f}from"./bi-336-181.js";import{S as F}from"./bi-980-944.js";import{e as L}from"./bi-171-733.js";import M from"./bi-662-334.js";import{I as P}from"./bi-803-734.js";import{S as T,h as z,c as A}from"./bi-31-810.js";import"./bi-230-776.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";import"./bi-993-739.js";function Z({formFields:s,setFlow:e,flow:t,allIntegURL:u}){const g=w(),[m,r]=l.useState(!1),[i,h]=l.useState(1),[v,p]=l.useState({show:!1}),j=[{key:"email",label:"Email",required:!0},{key:"name",label:"Name",required:!1}],[n,o]=l.useState({name:"Sendy",type:"Sendy",api_key:"",sendy_url:"",field_map:[{formField:"",sendyField:""}],subscriberFields:j,actions:{}}),k=()=>{r(!0),L(t,e,u,n,g,"","",r).then(d=>{var x;d.success?(f.success((x=d.data)==null?void 0:x.msg),g(u)):f.error(d.data||d)})},_=c=>{if(!A(n)){f.error("Please map mandatory fields");return}n.field_map.length>0&&h(c)};return document.querySelector(".btcd-s-wrp").scrollTop=0,a.jsxs("div",{children:[a.jsx(q,{snack:v,setSnackbar:p}),a.jsx("div",{className:"txt-center mt-2",children:a.jsx(F,{step:3,active:i})}),a.jsx(M,{sendyConf:n,setSendyConf:o,step:i,setstep:h,isLoading:m,setIsLoading:r,setSnackbar:p}),a.jsxs("div",{className:"btcd-stp-page",style:S({},i===2&&{width:900,height:"auto",overflow:"visible"}),children:[a.jsx(T,{formFields:s,handleInput:c=>z(c,n,o),sendyConf:n,setSendyConf:o,isLoading:m,setIsLoading:r,setSnackbar:p}),a.jsxs("button",{onClick:()=>_(3),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[E("Next","bit-integrations")," ","Â ",a.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),a.jsx(P,{step:i,saveConfig:()=>k(),isLoading:m,dataConf:n,setDataConf:o,formFields:s})]})}export{Z as default};
