var w=Object.defineProperty;var h=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var g=(t,a,s)=>a in t?w(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,q=(t,a)=>{for(var s in a||(a={}))F.call(a,s)&&g(t,s,a[s]);if(h)for(var s of h(a))C.call(a,s)&&g(t,s,a[s]);return t};import{h as D,r as i,j as r}from"./main.js";import{c as P,_ as A,a as u}from"./bi-336-181.js";import{S as E}from"./bi-980-944.js";import{e as M}from"./bi-171-733.js";import{I as T}from"./bi-803-734.js";import z from"./bi-459-392.js";import{s as B,h as G,c as x}from"./bi-457-927.js";import{L as H}from"./bi-107-928.js";import"./bi-212-737.js";import"./bi-811-731.js";import"./bi-648-738.js";function ee({formFields:t,setFlow:a,flow:s,allIntegURL:f}){const b=D(),[m,l]=i.useState(!1),[S,_]=i.useState({}),[o,y]=i.useState(1),[v,p]=i.useState({show:!1}),N=[{key:"name",label:"Name",required:!0}],j=[{key:"first_name",label:"First Name",required:!1},{key:"last_name",label:"Last Name",required:!1},{key:"email",label:"Email",required:!0},{key:"mobile_phone",label:"Mobile Phone",required:!1},{key:"home_phone",label:"Home Phone",required:!1},{key:"office_phone",label:"Office Phone",required:!1},{key:"fax",label:"Fax",required:!1},{key:"company",label:"Company",required:!1},{key:"birthday",label:"Birthday",required:!1},{key:"anniversary",label:"Anniversary",required:!1},{key:"spouse_name",label:"Spouse Name",required:!1},{key:"spouse_email",label:"Spouse Email",required:!1},{key:"spouse_phone",label:"Spouse Phone",required:!1},{key:"spouse_birthday",label:"Spouse Birthday",required:!1},{key:"type",label:"Address type",required:!1},{key:"street_address_1",label:"Street Address 1",required:!1},{key:"street_address_2",label:"Street Address 2",required:!1},{key:"zip",label:"Zip",required:!1},{key:"city",label:"City",required:!1},{key:"state",label:"State",required:!1}],[e,n]=i.useState({name:"LionDesk",type:"LionDesk",clientId:"",clientSecret:"",field_map:[{formField:"",lionDeskFormField:""}],actionName:"",actionId:"",campaignFields:N,contactFields:j,actions:{}});i.useEffect(()=>{window.opener&&B("lionDesk")},[]);const L=()=>{l(!0),M(s,a,f,e,b,"","",l).then(c=>{var k;c.success?(u.success((k=c.data)==null?void 0:k.msg),b(f)):u.error(c.data||c)})},I=d=>{if(!x(e)){u.error("Please map mandatory fields");return}e.field_map.length>0&&y(d)};return document.querySelector(".btcd-s-wrp").scrollTop=0,r.jsxs("div",{children:[r.jsx(P,{snack:v,setSnackbar:p}),r.jsx("div",{className:"txt-center mt-2",children:r.jsx(E,{step:3,active:o})}),r.jsx(z,{lionDeskConf:e,setLionDeskConf:n,step:o,setStep:y,setSnackbar:p,isLoading:m,setIsLoading:l}),r.jsxs("div",{className:"btcd-stp-page",style:q({},o===2&&{width:900,height:"auto",overflow:"visible"}),children:[r.jsx(H,{formFields:t,handleInput:d=>G(d,e,n),lionDeskConf:e,setLionDeskConf:n,loading:S,setLoading:_,isLoading:m,setIsLoading:l,setSnackbar:p}),(e==null?void 0:e.actionName)&&r.jsxs("button",{onClick:()=>I(3),disabled:!x(e),className:"btn f-right btcd-btn-lg green sh-sm flx",type:"button",children:[A("Next","bit-integrations")," ","Â ",r.jsx("div",{className:"btcd-icn icn-arrow_back rev-icn d-in-b"})]})]}),(e==null?void 0:e.actionName)&&r.jsx(T,{step:o,saveConfig:()=>L(),isLoading:m,dataConf:e,setDataConf:n,formFields:t})]})}export{ee as default};
